"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RosStack = void 0;
const runtime_1 = require("./runtime");
const tag_manager_1 = require("./tag-manager");
const ros_resource_1 = require("./ros-resource");
const tag_manager_2 = require("./tag-manager");
function rosStackPropsToRosTemplate(properties) {
    if (!(0, runtime_1.canInspect)(properties)) {
        return properties;
    }
    return {
        TemplateBody: (0, runtime_1.stringToRosTemplate)(properties.templateBody),
        TemplateURL: (0, runtime_1.stringToRosTemplate)(properties.templateUrl),
        NotificationARNs: (0, runtime_1.listMapper)(runtime_1.stringToRosTemplate)(properties.notificationArns),
        Parameters: (0, runtime_1.hashMapper)(runtime_1.stringToRosTemplate)(properties.parameters),
        Tags: (0, runtime_1.listMapper)(runtime_1.rosTagToRosTemplate)(properties.tags),
        TimeoutMins: (0, runtime_1.numberToRosTemplate)(properties.timeoutMins),
    };
}
class RosStack extends ros_resource_1.RosResource {
    constructor(scope, id, props) {
        super(scope, id, {
            type: RosStack.ROS_RESOURCE_TYPE_NAME,
            properties: props,
        });
        this.templateBody = props.templateBody;
        this.templateUrl = props.templateUrl;
        this.parameters = props.parameters;
        this.tags = new tag_manager_1.TagManager(tag_manager_2.TagType.STANDARD, "ALIYUN::ROS::Stack", props.tags, { tagPropertyName: "tags" });
        this.timeoutMins = props.timeoutMins;
    }
    get rosProperties() {
        return {
            templateBody: this.templateBody,
            templateUrl: this.templateUrl,
            parameters: this.parameters,
            tags: this.tags.renderTags(),
            timeoutMins: this.timeoutMins,
        };
    }
    renderProperties(props) {
        return rosStackPropsToRosTemplate(props);
    }
}
exports.RosStack = RosStack;
RosStack.ROS_RESOURCE_TYPE_NAME = "ALIYUN::ROS::Stack";
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9zLXN0YWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicm9zLXN0YWNrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHVDQU9tQjtBQUVuQiwrQ0FBMkM7QUFFM0MsaURBQTZDO0FBRTdDLCtDQUF3QztBQVV4QyxTQUFTLDBCQUEwQixDQUFDLFVBQWU7SUFDakQsSUFBSSxDQUFDLElBQUEsb0JBQVUsRUFBQyxVQUFVLENBQUMsRUFBRTtRQUMzQixPQUFPLFVBQVUsQ0FBQztLQUNuQjtJQUNELE9BQU87UUFDTCxZQUFZLEVBQUUsSUFBQSw2QkFBbUIsRUFBQyxVQUFVLENBQUMsWUFBWSxDQUFDO1FBQzFELFdBQVcsRUFBRSxJQUFBLDZCQUFtQixFQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUM7UUFDeEQsZ0JBQWdCLEVBQUUsSUFBQSxvQkFBVSxFQUFDLDZCQUFtQixDQUFDLENBQy9DLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FDNUI7UUFDRCxVQUFVLEVBQUUsSUFBQSxvQkFBVSxFQUFDLDZCQUFtQixDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQztRQUNsRSxJQUFJLEVBQUUsSUFBQSxvQkFBVSxFQUFDLDZCQUFtQixDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQztRQUN0RCxXQUFXLEVBQUUsSUFBQSw2QkFBbUIsRUFBQyxVQUFVLENBQUMsV0FBVyxDQUFDO0tBQ3pELENBQUM7QUFDSixDQUFDO0FBRUQsTUFBYSxRQUFTLFNBQVEsMEJBQVc7SUFRdkMsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUFvQjtRQUM1RCxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRTtZQUNmLElBQUksRUFBRSxRQUFRLENBQUMsc0JBQXNCO1lBQ3JDLFVBQVUsRUFBRSxLQUFLO1NBQ2xCLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDLFlBQVksQ0FBQztRQUN2QyxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUM7UUFDckMsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDO1FBQ25DLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSx3QkFBVSxDQUN4QixxQkFBTyxDQUFDLFFBQVEsRUFDaEIsb0JBQW9CLEVBQ3BCLEtBQUssQ0FBQyxJQUFJLEVBQ1YsRUFBRSxlQUFlLEVBQUUsTUFBTSxFQUFFLENBQzVCLENBQUM7UUFDRixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUM7SUFDdkMsQ0FBQztJQUVELElBQWMsYUFBYTtRQUN6QixPQUFPO1lBQ0wsWUFBWSxFQUFFLElBQUksQ0FBQyxZQUFZO1lBQy9CLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztZQUM3QixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7WUFDM0IsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQzVCLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztTQUM5QixDQUFDO0lBQ0osQ0FBQztJQUNTLGdCQUFnQixDQUFDLEtBRTFCO1FBQ0MsT0FBTywwQkFBMEIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzQyxDQUFDOztBQXZDSCw0QkF3Q0M7QUF2Q3dCLCtCQUFzQixHQUFHLG9CQUFvQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgc3RyaW5nVG9Sb3NUZW1wbGF0ZSxcbiAgbGlzdE1hcHBlcixcbiAgaGFzaE1hcHBlcixcbiAgbnVtYmVyVG9Sb3NUZW1wbGF0ZSxcbiAgcm9zVGFnVG9Sb3NUZW1wbGF0ZSxcbiAgY2FuSW5zcGVjdCxcbn0gZnJvbSBcIi4vcnVudGltZVwiO1xuaW1wb3J0IHsgQ29uc3RydWN0IH0gZnJvbSBcIi4vY29uc3RydWN0LWNvbXBhdFwiO1xuaW1wb3J0IHsgVGFnTWFuYWdlciB9IGZyb20gXCIuL3RhZy1tYW5hZ2VyXCI7XG5pbXBvcnQgeyBSb3NUYWcgfSBmcm9tIFwiLi9yb3MtdGFnXCI7XG5pbXBvcnQgeyBSb3NSZXNvdXJjZSB9IGZyb20gXCIuL3Jvcy1yZXNvdXJjZVwiO1xuaW1wb3J0IHsgSVJlc29sdmFibGUgfSBmcm9tIFwiLi9yZXNvbHZhYmxlXCI7XG5pbXBvcnQgeyBUYWdUeXBlIH0gZnJvbSBcIi4vdGFnLW1hbmFnZXJcIjtcblxuZXhwb3J0IGludGVyZmFjZSBSb3NTdGFja1Byb3BzIHtcbiAgcmVhZG9ubHkgdGVtcGxhdGVCb2R5Pzogc3RyaW5nO1xuICByZWFkb25seSB0ZW1wbGF0ZVVybD86IHN0cmluZztcbiAgcmVhZG9ubHkgcGFyYW1ldGVycz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gfCBJUmVzb2x2YWJsZTtcbiAgcmVhZG9ubHkgdGFncz86IFJvc1RhZ1tdO1xuICByZWFkb25seSB0aW1lb3V0TWlucz86IG51bWJlcjtcbn1cblxuZnVuY3Rpb24gcm9zU3RhY2tQcm9wc1RvUm9zVGVtcGxhdGUocHJvcGVydGllczogYW55KTogYW55IHtcbiAgaWYgKCFjYW5JbnNwZWN0KHByb3BlcnRpZXMpKSB7XG4gICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBUZW1wbGF0ZUJvZHk6IHN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy50ZW1wbGF0ZUJvZHkpLFxuICAgIFRlbXBsYXRlVVJMOiBzdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMudGVtcGxhdGVVcmwpLFxuICAgIE5vdGlmaWNhdGlvbkFSTnM6IGxpc3RNYXBwZXIoc3RyaW5nVG9Sb3NUZW1wbGF0ZSkoXG4gICAgICBwcm9wZXJ0aWVzLm5vdGlmaWNhdGlvbkFybnNcbiAgICApLFxuICAgIFBhcmFtZXRlcnM6IGhhc2hNYXBwZXIoc3RyaW5nVG9Sb3NUZW1wbGF0ZSkocHJvcGVydGllcy5wYXJhbWV0ZXJzKSxcbiAgICBUYWdzOiBsaXN0TWFwcGVyKHJvc1RhZ1RvUm9zVGVtcGxhdGUpKHByb3BlcnRpZXMudGFncyksXG4gICAgVGltZW91dE1pbnM6IG51bWJlclRvUm9zVGVtcGxhdGUocHJvcGVydGllcy50aW1lb3V0TWlucyksXG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBSb3NTdGFjayBleHRlbmRzIFJvc1Jlc291cmNlIHtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1NfUkVTT1VSQ0VfVFlQRV9OQU1FID0gXCJBTElZVU46OlJPUzo6U3RhY2tcIjtcbiAgcHVibGljIHRlbXBsYXRlVXJsPzogc3RyaW5nO1xuICBwdWJsaWMgcGFyYW1ldGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSB8IElSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuICBwdWJsaWMgcmVhZG9ubHkgdGFnczogVGFnTWFuYWdlcjtcbiAgcHVibGljIHRpbWVvdXRNaW5zOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHB1YmxpYyB0ZW1wbGF0ZUJvZHk/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFJvc1N0YWNrUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQsIHtcbiAgICAgIHR5cGU6IFJvc1N0YWNrLlJPU19SRVNPVVJDRV9UWVBFX05BTUUsXG4gICAgICBwcm9wZXJ0aWVzOiBwcm9wcyxcbiAgICB9KTtcblxuICAgIHRoaXMudGVtcGxhdGVCb2R5ID0gcHJvcHMudGVtcGxhdGVCb2R5O1xuICAgIHRoaXMudGVtcGxhdGVVcmwgPSBwcm9wcy50ZW1wbGF0ZVVybDtcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSBwcm9wcy5wYXJhbWV0ZXJzO1xuICAgIHRoaXMudGFncyA9IG5ldyBUYWdNYW5hZ2VyKFxuICAgICAgVGFnVHlwZS5TVEFOREFSRCxcbiAgICAgIFwiQUxJWVVOOjpST1M6OlN0YWNrXCIsXG4gICAgICBwcm9wcy50YWdzLFxuICAgICAgeyB0YWdQcm9wZXJ0eU5hbWU6IFwidGFnc1wiIH1cbiAgICApO1xuICAgIHRoaXMudGltZW91dE1pbnMgPSBwcm9wcy50aW1lb3V0TWlucztcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgcm9zUHJvcGVydGllcygpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVCb2R5OiB0aGlzLnRlbXBsYXRlQm9keSxcbiAgICAgIHRlbXBsYXRlVXJsOiB0aGlzLnRlbXBsYXRlVXJsLFxuICAgICAgcGFyYW1ldGVyczogdGhpcy5wYXJhbWV0ZXJzLFxuICAgICAgdGFnczogdGhpcy50YWdzLnJlbmRlclRhZ3MoKSxcbiAgICAgIHRpbWVvdXRNaW5zOiB0aGlzLnRpbWVvdXRNaW5zLFxuICAgIH07XG4gIH1cbiAgcHJvdGVjdGVkIHJlbmRlclByb3BlcnRpZXMocHJvcHM6IHtcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG4gIH0pOiB7IFtrZXk6IHN0cmluZ106IGFueSB9IHtcbiAgICByZXR1cm4gcm9zU3RhY2tQcm9wc1RvUm9zVGVtcGxhdGUocHJvcHMpO1xuICB9XG59XG4iXX0=