"use strict";
// Generated from the AliCloud ROS Resource Specification
Object.defineProperty(exports, "__esModule", { value: true });
exports.RosRuleAction = exports.RosRule = exports.RosProductTopic = exports.RosProduct = exports.RosDeviceGroup = exports.RosDevice = void 0;
const ros = require("@alicloud/ros-cdk-core");
/**
 * Determine whether the given properties match those of a `RosDeviceProps`
 *
 * @param properties - the TypeScript properties of a `RosDeviceProps`
 *
 * @returns the result of the validation.
 */
function RosDevicePropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('iotInstanceId', ros.validateString)(properties.iotInstanceId));
    errors.collect(ros.propertyValidator('devEui', ros.validateString)(properties.devEui));
    errors.collect(ros.propertyValidator('productKey', ros.requiredValidator)(properties.productKey));
    errors.collect(ros.propertyValidator('productKey', ros.validateString)(properties.productKey));
    errors.collect(ros.propertyValidator('deviceName', ros.validateString)(properties.deviceName));
    errors.collect(ros.propertyValidator('pinCode', ros.validateString)(properties.pinCode));
    errors.collect(ros.propertyValidator('nickname', ros.validateString)(properties.nickname));
    return errors.wrap('supplied properties not correct for "RosDeviceProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::IOT::Device` resource
 *
 * @param properties - the TypeScript properties of a `RosDeviceProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::IOT::Device` resource.
 */
// @ts-ignore TS6133
function rosDevicePropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosDevicePropsValidator(properties).assertSuccess();
    }
    return {
        'ProductKey': ros.stringToRosTemplate(properties.productKey),
        'DevEui': ros.stringToRosTemplate(properties.devEui),
        'DeviceName': ros.stringToRosTemplate(properties.deviceName),
        'IotInstanceId': ros.stringToRosTemplate(properties.iotInstanceId),
        'Nickname': ros.stringToRosTemplate(properties.nickname),
        'PinCode': ros.stringToRosTemplate(properties.pinCode),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::IOT::Device`.
 * @Note This class does not contain additional functions, so it is recommended to use the `Device` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-iot-device
 */
class RosDevice extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosDevice.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrDeviceName = this.getAtt('DeviceName');
        this.attrDeviceSecret = this.getAtt('DeviceSecret');
        this.attrIotId = this.getAtt('IotId');
        this.attrIotInstanceId = this.getAtt('IotInstanceId');
        this.attrIpAddress = this.getAtt('IpAddress');
        this.attrNickName = this.getAtt('NickName');
        this.attrNodeType = this.getAtt('NodeType');
        this.attrProductKey = this.getAtt('ProductKey');
        this.attrProductName = this.getAtt('ProductName');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.productKey = props.productKey;
        this.devEui = props.devEui;
        this.deviceName = props.deviceName;
        this.iotInstanceId = props.iotInstanceId;
        this.nickname = props.nickname;
        this.pinCode = props.pinCode;
    }
    get rosProperties() {
        return {
            productKey: this.productKey,
            devEui: this.devEui,
            deviceName: this.deviceName,
            iotInstanceId: this.iotInstanceId,
            nickname: this.nickname,
            pinCode: this.pinCode,
        };
    }
    renderProperties(props) {
        return rosDevicePropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosDevice = RosDevice;
/**
 * The resource type name for this resource class.
 */
RosDevice.ROS_RESOURCE_TYPE_NAME = "ALIYUN::IOT::Device";
/**
 * Determine whether the given properties match those of a `RosDeviceGroupProps`
 *
 * @param properties - the TypeScript properties of a `RosDeviceGroupProps`
 *
 * @returns the result of the validation.
 */
function RosDeviceGroupPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('groupName', ros.requiredValidator)(properties.groupName));
    errors.collect(ros.propertyValidator('groupName', ros.validateString)(properties.groupName));
    errors.collect(ros.propertyValidator('superGroupId', ros.validateString)(properties.superGroupId));
    errors.collect(ros.propertyValidator('iotInstanceId', ros.validateString)(properties.iotInstanceId));
    errors.collect(ros.propertyValidator('groupDesc', ros.validateString)(properties.groupDesc));
    return errors.wrap('supplied properties not correct for "RosDeviceGroupProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::IOT::DeviceGroup` resource
 *
 * @param properties - the TypeScript properties of a `RosDeviceGroupProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::IOT::DeviceGroup` resource.
 */
// @ts-ignore TS6133
function rosDeviceGroupPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosDeviceGroupPropsValidator(properties).assertSuccess();
    }
    return {
        'GroupName': ros.stringToRosTemplate(properties.groupName),
        'GroupDesc': ros.stringToRosTemplate(properties.groupDesc),
        'IotInstanceId': ros.stringToRosTemplate(properties.iotInstanceId),
        'SuperGroupId': ros.stringToRosTemplate(properties.superGroupId),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::IOT::DeviceGroup`.
 * @Note This class does not contain additional functions, so it is recommended to use the `DeviceGroup` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-iot-devicegroup
 */
class RosDeviceGroup extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosDeviceGroup.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrGroupId = this.getAtt('GroupId');
        this.attrIotInstanceId = this.getAtt('IotInstanceId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.groupName = props.groupName;
        this.groupDesc = props.groupDesc;
        this.iotInstanceId = props.iotInstanceId;
        this.superGroupId = props.superGroupId;
    }
    get rosProperties() {
        return {
            groupName: this.groupName,
            groupDesc: this.groupDesc,
            iotInstanceId: this.iotInstanceId,
            superGroupId: this.superGroupId,
        };
    }
    renderProperties(props) {
        return rosDeviceGroupPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosDeviceGroup = RosDeviceGroup;
/**
 * The resource type name for this resource class.
 */
RosDeviceGroup.ROS_RESOURCE_TYPE_NAME = "ALIYUN::IOT::DeviceGroup";
/**
 * Determine whether the given properties match those of a `RosProductProps`
 *
 * @param properties - the TypeScript properties of a `RosProductProps`
 *
 * @returns the result of the validation.
 */
function RosProductPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('publishAuto', ros.validateBoolean)(properties.publishAuto));
    errors.collect(ros.propertyValidator('description', ros.validateString)(properties.description));
    errors.collect(ros.propertyValidator('iotInstanceId', ros.validateString)(properties.iotInstanceId));
    errors.collect(ros.propertyValidator('productName', ros.requiredValidator)(properties.productName));
    errors.collect(ros.propertyValidator('productName', ros.validateString)(properties.productName));
    errors.collect(ros.propertyValidator('resourceGroupId', ros.validateString)(properties.resourceGroupId));
    errors.collect(ros.propertyValidator('aliyunCommodityCode', ros.validateString)(properties.aliyunCommodityCode));
    errors.collect(ros.propertyValidator('categoryKey', ros.validateString)(properties.categoryKey));
    if (properties.protocolType && (typeof properties.protocolType) !== 'object') {
        errors.collect(ros.propertyValidator('protocolType', ros.validateAllowedValues)({
            data: properties.protocolType,
            allowedValues: ["ble", "customize", "modbus", "opc-ua", "zigbee"],
        }));
    }
    errors.collect(ros.propertyValidator('protocolType', ros.validateString)(properties.protocolType));
    errors.collect(ros.propertyValidator('id2', ros.validateBoolean)(properties.id2));
    errors.collect(ros.propertyValidator('nodeType', ros.requiredValidator)(properties.nodeType));
    if (properties.nodeType && (typeof properties.nodeType) !== 'object') {
        errors.collect(ros.propertyValidator('nodeType', ros.validateAllowedValues)({
            data: properties.nodeType,
            allowedValues: [0, 1],
        }));
    }
    errors.collect(ros.propertyValidator('nodeType', ros.validateNumber)(properties.nodeType));
    if (properties.dataFormat && (typeof properties.dataFormat) !== 'object') {
        errors.collect(ros.propertyValidator('dataFormat', ros.validateAllowedValues)({
            data: properties.dataFormat,
            allowedValues: [0, 1],
        }));
    }
    errors.collect(ros.propertyValidator('dataFormat', ros.validateNumber)(properties.dataFormat));
    errors.collect(ros.propertyValidator('authType', ros.validateString)(properties.authType));
    errors.collect(ros.propertyValidator('joinPermissionId', ros.validateString)(properties.joinPermissionId));
    if (properties.netType && (typeof properties.netType) !== 'object') {
        errors.collect(ros.propertyValidator('netType', ros.validateAllowedValues)({
            data: properties.netType,
            allowedValues: ["CELLULAR", "ETHERNET", "LORA", "OTHER", "WIFI"],
        }));
    }
    errors.collect(ros.propertyValidator('netType', ros.validateString)(properties.netType));
    return errors.wrap('supplied properties not correct for "RosProductProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::IOT::Product` resource
 *
 * @param properties - the TypeScript properties of a `RosProductProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::IOT::Product` resource.
 */
// @ts-ignore TS6133
function rosProductPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosProductPropsValidator(properties).assertSuccess();
    }
    return {
        'NodeType': ros.numberToRosTemplate(properties.nodeType),
        'ProductName': ros.stringToRosTemplate(properties.productName),
        'AliyunCommodityCode': ros.stringToRosTemplate(properties.aliyunCommodityCode),
        'AuthType': ros.stringToRosTemplate(properties.authType),
        'CategoryKey': ros.stringToRosTemplate(properties.categoryKey),
        'DataFormat': ros.numberToRosTemplate(properties.dataFormat),
        'Description': ros.stringToRosTemplate(properties.description),
        'Id2': ros.booleanToRosTemplate(properties.id2),
        'IotInstanceId': ros.stringToRosTemplate(properties.iotInstanceId),
        'JoinPermissionId': ros.stringToRosTemplate(properties.joinPermissionId),
        'NetType': ros.stringToRosTemplate(properties.netType),
        'ProtocolType': ros.stringToRosTemplate(properties.protocolType),
        'PublishAuto': ros.booleanToRosTemplate(properties.publishAuto),
        'ResourceGroupId': ros.stringToRosTemplate(properties.resourceGroupId),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::IOT::Product`, which is used to create a product.
 * @Note This class does not contain additional functions, so it is recommended to use the `Product` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-iot-product
 */
class RosProduct extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosProduct.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrIotInstanceId = this.getAtt('IotInstanceId');
        this.attrProductKey = this.getAtt('ProductKey');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.nodeType = props.nodeType;
        this.productName = props.productName;
        this.aliyunCommodityCode = props.aliyunCommodityCode;
        this.authType = props.authType;
        this.categoryKey = props.categoryKey;
        this.dataFormat = props.dataFormat;
        this.description = props.description;
        this.id2 = props.id2;
        this.iotInstanceId = props.iotInstanceId;
        this.joinPermissionId = props.joinPermissionId;
        this.netType = props.netType;
        this.protocolType = props.protocolType;
        this.publishAuto = props.publishAuto;
        this.resourceGroupId = props.resourceGroupId;
    }
    get rosProperties() {
        return {
            nodeType: this.nodeType,
            productName: this.productName,
            aliyunCommodityCode: this.aliyunCommodityCode,
            authType: this.authType,
            categoryKey: this.categoryKey,
            dataFormat: this.dataFormat,
            description: this.description,
            id2: this.id2,
            iotInstanceId: this.iotInstanceId,
            joinPermissionId: this.joinPermissionId,
            netType: this.netType,
            protocolType: this.protocolType,
            publishAuto: this.publishAuto,
            resourceGroupId: this.resourceGroupId,
        };
    }
    renderProperties(props) {
        return rosProductPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosProduct = RosProduct;
/**
 * The resource type name for this resource class.
 */
RosProduct.ROS_RESOURCE_TYPE_NAME = "ALIYUN::IOT::Product";
/**
 * Determine whether the given properties match those of a `RosProductTopicProps`
 *
 * @param properties - the TypeScript properties of a `RosProductTopicProps`
 *
 * @returns the result of the validation.
 */
function RosProductTopicPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    if (properties.desc && (Array.isArray(properties.desc) || (typeof properties.desc) === 'string')) {
        errors.collect(ros.propertyValidator('desc', ros.validateLength)({
            data: properties.desc.length,
            min: undefined,
            max: 100,
        }));
    }
    errors.collect(ros.propertyValidator('desc', ros.validateString)(properties.desc));
    errors.collect(ros.propertyValidator('iotInstanceId', ros.validateString)(properties.iotInstanceId));
    errors.collect(ros.propertyValidator('topicShortName', ros.requiredValidator)(properties.topicShortName));
    errors.collect(ros.propertyValidator('topicShortName', ros.validateString)(properties.topicShortName));
    errors.collect(ros.propertyValidator('operation', ros.requiredValidator)(properties.operation));
    if (properties.operation && (typeof properties.operation) !== 'object') {
        errors.collect(ros.propertyValidator('operation', ros.validateAllowedValues)({
            data: properties.operation,
            allowedValues: ["ALL", "PUB", "SUB"],
        }));
    }
    errors.collect(ros.propertyValidator('operation', ros.validateString)(properties.operation));
    errors.collect(ros.propertyValidator('productKey', ros.requiredValidator)(properties.productKey));
    errors.collect(ros.propertyValidator('productKey', ros.validateString)(properties.productKey));
    return errors.wrap('supplied properties not correct for "RosProductTopicProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::IOT::ProductTopic` resource
 *
 * @param properties - the TypeScript properties of a `RosProductTopicProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::IOT::ProductTopic` resource.
 */
// @ts-ignore TS6133
function rosProductTopicPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosProductTopicPropsValidator(properties).assertSuccess();
    }
    return {
        'Operation': ros.stringToRosTemplate(properties.operation),
        'ProductKey': ros.stringToRosTemplate(properties.productKey),
        'TopicShortName': ros.stringToRosTemplate(properties.topicShortName),
        'Desc': ros.stringToRosTemplate(properties.desc),
        'IotInstanceId': ros.stringToRosTemplate(properties.iotInstanceId),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::IOT::ProductTopic`.
 * @Note This class does not contain additional functions, so it is recommended to use the `ProductTopic` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-iot-producttopic
 */
class RosProductTopic extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosProductTopic.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrTopicId = this.getAtt('TopicId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.operation = props.operation;
        this.productKey = props.productKey;
        this.topicShortName = props.topicShortName;
        this.desc = props.desc;
        this.iotInstanceId = props.iotInstanceId;
    }
    get rosProperties() {
        return {
            operation: this.operation,
            productKey: this.productKey,
            topicShortName: this.topicShortName,
            desc: this.desc,
            iotInstanceId: this.iotInstanceId,
        };
    }
    renderProperties(props) {
        return rosProductTopicPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosProductTopic = RosProductTopic;
/**
 * The resource type name for this resource class.
 */
RosProductTopic.ROS_RESOURCE_TYPE_NAME = "ALIYUN::IOT::ProductTopic";
/**
 * Determine whether the given properties match those of a `RosRuleProps`
 *
 * @param properties - the TypeScript properties of a `RosRuleProps`
 *
 * @returns the result of the validation.
 */
function RosRulePropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('topicType', ros.validateNumber)(properties.topicType));
    errors.collect(ros.propertyValidator('iotInstanceId', ros.validateString)(properties.iotInstanceId));
    errors.collect(ros.propertyValidator('resourceGroupId', ros.validateString)(properties.resourceGroupId));
    if (properties.ruleAction && (Array.isArray(properties.ruleAction) || (typeof properties.ruleAction) === 'string')) {
        errors.collect(ros.propertyValidator('ruleAction', ros.validateLength)({
            data: properties.ruleAction.length,
            min: 1,
            max: 10,
        }));
    }
    errors.collect(ros.propertyValidator('ruleAction', ros.listValidator(RosRule_RuleActionPropertyValidator))(properties.ruleAction));
    errors.collect(ros.propertyValidator('shortTopic', ros.validateString)(properties.shortTopic));
    errors.collect(ros.propertyValidator('select', ros.validateString)(properties.select));
    errors.collect(ros.propertyValidator('startRule', ros.validateBoolean)(properties.startRule));
    if (properties.dataType && (typeof properties.dataType) !== 'object') {
        errors.collect(ros.propertyValidator('dataType', ros.validateAllowedValues)({
            data: properties.dataType,
            allowedValues: ["BINARY", "JSON"],
        }));
    }
    errors.collect(ros.propertyValidator('dataType', ros.validateString)(properties.dataType));
    errors.collect(ros.propertyValidator('ruleDesc', ros.validateString)(properties.ruleDesc));
    errors.collect(ros.propertyValidator('where', ros.validateString)(properties.where));
    errors.collect(ros.propertyValidator('productKey', ros.validateString)(properties.productKey));
    errors.collect(ros.propertyValidator('name', ros.requiredValidator)(properties.name));
    errors.collect(ros.propertyValidator('name', ros.validateString)(properties.name));
    return errors.wrap('supplied properties not correct for "RosRuleProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::IOT::Rule` resource
 *
 * @param properties - the TypeScript properties of a `RosRuleProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::IOT::Rule` resource.
 */
// @ts-ignore TS6133
function rosRulePropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosRulePropsValidator(properties).assertSuccess();
    }
    return {
        'Name': ros.stringToRosTemplate(properties.name),
        'DataType': ros.stringToRosTemplate(properties.dataType),
        'IotInstanceId': ros.stringToRosTemplate(properties.iotInstanceId),
        'ProductKey': ros.stringToRosTemplate(properties.productKey),
        'ResourceGroupId': ros.stringToRosTemplate(properties.resourceGroupId),
        'RuleAction': ros.listMapper(rosRuleRuleActionPropertyToRosTemplate)(properties.ruleAction),
        'RuleDesc': ros.stringToRosTemplate(properties.ruleDesc),
        'Select': ros.stringToRosTemplate(properties.select),
        'ShortTopic': ros.stringToRosTemplate(properties.shortTopic),
        'StartRule': ros.booleanToRosTemplate(properties.startRule),
        'TopicType': ros.numberToRosTemplate(properties.topicType),
        'Where': ros.stringToRosTemplate(properties.where),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::IOT::Rule`, which is used to create a rule for a specific topic.
 * @Note This class does not contain additional functions, so it is recommended to use the `Rule` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-iot-rule
 */
class RosRule extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosRule.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrActionId = this.getAtt('ActionId');
        this.attrRuleId = this.getAtt('RuleId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.name = props.name;
        this.dataType = props.dataType;
        this.iotInstanceId = props.iotInstanceId;
        this.productKey = props.productKey;
        this.resourceGroupId = props.resourceGroupId;
        this.ruleAction = props.ruleAction;
        this.ruleDesc = props.ruleDesc;
        this.select = props.select;
        this.shortTopic = props.shortTopic;
        this.startRule = props.startRule;
        this.topicType = props.topicType;
        this.where = props.where;
    }
    get rosProperties() {
        return {
            name: this.name,
            dataType: this.dataType,
            iotInstanceId: this.iotInstanceId,
            productKey: this.productKey,
            resourceGroupId: this.resourceGroupId,
            ruleAction: this.ruleAction,
            ruleDesc: this.ruleDesc,
            select: this.select,
            shortTopic: this.shortTopic,
            startRule: this.startRule,
            topicType: this.topicType,
            where: this.where,
        };
    }
    renderProperties(props) {
        return rosRulePropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosRule = RosRule;
/**
 * The resource type name for this resource class.
 */
RosRule.ROS_RESOURCE_TYPE_NAME = "ALIYUN::IOT::Rule";
/**
 * Determine whether the given properties match those of a `RuleActionProperty`
 *
 * @param properties - the TypeScript properties of a `RuleActionProperty`
 *
 * @returns the result of the validation.
 */
function RosRule_RuleActionPropertyValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    if (properties.errorActionFlag && (typeof properties.errorActionFlag) !== 'object') {
        errors.collect(ros.propertyValidator('errorActionFlag', ros.validateAllowedValues)({
            data: properties.errorActionFlag,
            allowedValues: ["true", "false"],
        }));
    }
    errors.collect(ros.propertyValidator('errorActionFlag', ros.validateString)(properties.errorActionFlag));
    errors.collect(ros.propertyValidator('type', ros.requiredValidator)(properties.type));
    if (properties.type && (typeof properties.type) !== 'object') {
        errors.collect(ros.propertyValidator('type', ros.validateAllowedValues)({
            data: properties.type,
            allowedValues: ["AMQP", "DATAHUB", "FC", "MNS", "ONS", "OTS", "REPUBLISH"],
        }));
    }
    errors.collect(ros.propertyValidator('type', ros.validateString)(properties.type));
    errors.collect(ros.propertyValidator('configuration', ros.requiredValidator)(properties.configuration));
    errors.collect(ros.propertyValidator('configuration', ros.validateString)(properties.configuration));
    return errors.wrap('supplied properties not correct for "RuleActionProperty"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::IOT::Rule.RuleAction` resource
 *
 * @param properties - the TypeScript properties of a `RuleActionProperty`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::IOT::Rule.RuleAction` resource.
 */
// @ts-ignore TS6133
function rosRuleRuleActionPropertyToRosTemplate(properties) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    RosRule_RuleActionPropertyValidator(properties).assertSuccess();
    return {
        'ErrorActionFlag': ros.stringToRosTemplate(properties.errorActionFlag),
        'Type': ros.stringToRosTemplate(properties.type),
        'Configuration': ros.stringToRosTemplate(properties.configuration),
    };
}
/**
 * Determine whether the given properties match those of a `RosRuleActionProps`
 *
 * @param properties - the TypeScript properties of a `RosRuleActionProps`
 *
 * @returns the result of the validation.
 */
function RosRuleActionPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('errorActionFlag', ros.validateBoolean)(properties.errorActionFlag));
    errors.collect(ros.propertyValidator('type', ros.requiredValidator)(properties.type));
    if (properties.type && (typeof properties.type) !== 'object') {
        errors.collect(ros.propertyValidator('type', ros.validateAllowedValues)({
            data: properties.type,
            allowedValues: ["AMQP", "DATAHUB", "FC", "MNS", "ONS", "OTS", "REPUBLISH"],
        }));
    }
    errors.collect(ros.propertyValidator('type', ros.validateString)(properties.type));
    errors.collect(ros.propertyValidator('iotInstanceId', ros.validateString)(properties.iotInstanceId));
    errors.collect(ros.propertyValidator('configuration', ros.requiredValidator)(properties.configuration));
    errors.collect(ros.propertyValidator('configuration', ros.validateString)(properties.configuration));
    errors.collect(ros.propertyValidator('ruleId', ros.requiredValidator)(properties.ruleId));
    errors.collect(ros.propertyValidator('ruleId', ros.validateNumber)(properties.ruleId));
    return errors.wrap('supplied properties not correct for "RosRuleActionProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::IOT::RuleAction` resource
 *
 * @param properties - the TypeScript properties of a `RosRuleActionProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::IOT::RuleAction` resource.
 */
// @ts-ignore TS6133
function rosRuleActionPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosRuleActionPropsValidator(properties).assertSuccess();
    }
    return {
        'Configuration': ros.stringToRosTemplate(properties.configuration),
        'RuleId': ros.numberToRosTemplate(properties.ruleId),
        'Type': ros.stringToRosTemplate(properties.type),
        'ErrorActionFlag': ros.booleanToRosTemplate(properties.errorActionFlag),
        'IotInstanceId': ros.stringToRosTemplate(properties.iotInstanceId),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::IOT::RuleAction`, which is used to create a rule action for a specified rule.
 * @Note This class does not contain additional functions, so it is recommended to use the `RuleAction` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-iot-ruleaction
 */
class RosRuleAction extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosRuleAction.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrActionId = this.getAtt('ActionId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.configuration = props.configuration;
        this.ruleId = props.ruleId;
        this.type = props.type;
        this.errorActionFlag = props.errorActionFlag;
        this.iotInstanceId = props.iotInstanceId;
    }
    get rosProperties() {
        return {
            configuration: this.configuration,
            ruleId: this.ruleId,
            type: this.type,
            errorActionFlag: this.errorActionFlag,
            iotInstanceId: this.iotInstanceId,
        };
    }
    renderProperties(props) {
        return rosRuleActionPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosRuleAction = RosRuleAction;
/**
 * The resource type name for this resource class.
 */
RosRuleAction.ROS_RESOURCE_TYPE_NAME = "ALIYUN::IOT::RuleAction";
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW90LmdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImlvdC5nZW5lcmF0ZWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHlEQUF5RDs7O0FBRXpELDhDQUE4QztBQStDOUM7Ozs7OztHQU1HO0FBQ0gsU0FBUyx1QkFBdUIsQ0FBQyxVQUFlO0lBQzVDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1FBQUUsT0FBTyxHQUFHLENBQUMsa0JBQWtCLENBQUM7S0FBRTtJQUNuRSxNQUFNLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLGVBQWUsRUFBRSxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7SUFDckcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN2RixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFDbEcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsWUFBWSxFQUFFLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUMvRixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQy9GLE1BQU0s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LGdDQUFnQyxDQUFDO1FBQ3pFLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQztRQUN6QyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFDM0IsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDLGVBQWUsQ0FBQztRQUM3QyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7SUFDN0MsQ0FBQztJQUdELElBQWMsYUFBYTtRQUN2QixPQUFPO1lBQ0gsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1lBQ2pDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtZQUNuQixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7WUFDZixlQUFlLEVBQUUsSUFBSSxDQUFDLGVBQWU7WUFDckMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO1NBQ3BDLENBQUM7SUFDTixDQUFDO0lBQ1MsZ0JBQWdCLENBQUMsS0FBMkI7UUFDbEQsT0FBTywrQkFBK0IsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7SUFDekYsQ0FBQzs7QUE1Rkwsc0NBNkZDO0FBNUZHOztHQUVHO0FBQ29CLG9DQUFzQixHQUFHLHlCQUF5QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGZyb20gdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBTcGVjaWZpY2F0aW9uXG5cbmltcG9ydCAqIGFzIHJvcyBmcm9tICdAYWxpY2xvdWQvcm9zLWNkay1jb3JlJztcblxuLyoqXG4gKiBQcm9wZXJ0aWVzIGZvciBkZWZpbmluZyBhIGBSb3NEZXZpY2VgLlxuICogU2VlIGh0dHBzOi8vd3d3LmFsaWJhYmFjbG91ZC5jb20vaGVscC9yb3MvZGV2ZWxvcGVyLXJlZmVyZW5jZS9hbGl5dW4taW90LWRldmljZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJvc0RldmljZVByb3BzIHtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwcm9kdWN0S2V5OiBUaGUgaWRlbnRpZmllciBvZiB0aGUgcHJvZHVjdCB0byB3aGljaCB0aGUgZGV2aWNlIHRvIGJlIHJlZ2lzdGVyZWQgYmVsb25ncy5cbiAgICAgKi9cbiAgICByZWFkb25seSBwcm9kdWN0S2V5OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZGV2RXVpOiBEZXZFVUkgTG9SYVdBTiBlcXVpcG1lbnQuXG4gICAgICogV2hlbiB5b3UgY3JlYXRlIGEgTG9SYVdBTiBkZXZpY2VzLCB0aGlzIHdpbGwgcGFzcy5cbiAgICAgKi9cbiAgICByZWFkb25seSBkZXZFdWk/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZGV2aWNlTmFtZTogVGhlIG5hbWUgb2YgdGhlIGRldmljZSB0aGF0IHlvdSB3YW50IHRvIHJlZ2lzdGVyLiBUaGUgZGV2aWNlIG5hbWUgbXVzdCBjb25zaXN0IG9mXG4gICAgICogNCB0byAzMiBjaGFyYWN0ZXJzLCBpbmNsdWRpbmcgRW5nbGlzaCBsZXR0ZXJzLCBkaWdpdHMsIGFuZCBzcGVjaWFsIGNoYXJhY3RlcnMsIGZvclxuICAgICAqIGV4YW1wbGUsIGh5cGhlbnMgKC0pLCB1bmRlcnNjb3JlcyAoXyksIGF0IHNpZ25zIChAKSwgcGVyaW9kcyAoLikgLCBhbmQgY29sb25zICg6KS5cbiAgICAgKiBEZXZpY2VOYW1lIGlzIHVzZWQgd2l0aCBQcm9kdWN0S2V5IHRvIGlkZW50aWZ5IGEgc3BlY2lmaWVkIGRldmljZS5cbiAgICAgKiBOb3RlIElmIHlvdSBkbyBub3Qgc3BlY2lmeSB0aGlzIHBhcmFtZXRlciwgdGhlIHN5c3RlbSB3aWxsIGdlbmVyYXRlIGEgbmFtZSBmb3IgdGhlIGRldmljZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBkZXZpY2VOYW1lPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGlvdEluc3RhbmNlSWQ6IFB1YmxpYyBpbnN0YW5jZSBkb2VzIG5vdCBwYXNzIHRoaXMgcGFyYW1ldGVyOyBpbnN0YW5jZSB0aGF0IHlvdSBuZWVkIHRvIGJ1eSB0aGUgaW5jb21pbmcgaW5zdGFuY2UgSUQuXG4gICAgICovXG4gICAgcmVhZG9ubHkgaW90SW5zdGFuY2VJZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBuaWNrbmFtZTogQWRkIGEgbmlja25hbWUgZm9yIHRoZSBkZXZpY2UuIEEgbmlja25hbWUgY2FuIGJlIDQtNjQgY2hhcmFjdGVycyBpbiBsZW5ndGgsIGFuZCBjYW5cbiAgICAgKiBjb250YWluIENoaW5lc2UgY2hhcmFjdGVycywgRW5nbGlzaCBsZXR0ZXJzLCBudW1iZXJzIGFuZCB1bmRlcnNjb3JlcyAoXykuIEEgQ2hpbmVzZVxuICAgICAqIGNoYXJhY3RlciBjb3VudHMgYXMgdHdvIGNoYXJhY3RlcnMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgbmlja25hbWU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcGluQ29kZTogUElOIENvZGUgTG9SYVdBTiBkZXZpY2UgZm9yIGNoZWNraW5nIHRoZSBsZWdpdGltYWN5IG9mIERldkVVSS5cbiAgICAgKiBXaGVuIHlvdSBjcmVhdGUgYSBMb1JhV0FOIGRldmljZXMsIHRoaXMgd2lsbCBwYXNzLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHBpbkNvZGU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGdpdmVuIHByb3BlcnRpZXMgbWF0Y2ggdGhvc2Ugb2YgYSBgUm9zRGV2aWNlUHJvcHNgXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc0RldmljZVByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIHZhbGlkYXRpb24uXG4gKi9cbmZ1bmN0aW9uIFJvc0RldmljZVByb3BzVmFsaWRhdG9yKHByb3BlcnRpZXM6IGFueSk6IHJvcy5WYWxpZGF0aW9uUmVzdWx0IHtcbiAgICBpZiAoIXJvcy5jYW5JbnNwZWN0KHByb3BlcnRpZXMpKSB7IHJldHVybiByb3MuVkFMSURBVElPTl9TVUNDRVNTOyB9XG4gICAgY29uc3QgZXJyb3JzID0gbmV3IHJvcy5WYWxpZGF0aW9uUmVzdWx0cygpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignaW90SW5zdGFuY2VJZCcsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5pb3RJbnN0YW5jZUlkKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdkZXZFdWknLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuZGV2RXVpKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdwcm9kdWN0S2V5Jywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLnByb2R1Y3RLZXkpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3Byb2R1Y3RLZXknLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMucHJvZHVjdEtleSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZGV2aWNlTmFtZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5kZXZpY2VOYW1lKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdwaW5Db2RlJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnBpbkNvZGUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ25pY2tuYW1lJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLm5pY2tuYW1lKSk7XG4gICAgcmV0dXJuIGVycm9ycy53cmFwKCdzdXBwbGllZCBwcm9wZXJ0aWVzIG5vdCBjb3JyZWN0IGZvciBcIlJvc0RldmljZVByb3BzXCInKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpJT1Q6OkRldmljZWAgcmVzb3VyY2VcbiAqXG4gKiBAcGFyYW0gcHJvcGVydGllcyAtIHRoZSBUeXBlU2NyaXB0IHByb3BlcnRpZXMgb2YgYSBgUm9zRGV2aWNlUHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OklPVDo6RGV2aWNlYCByZXNvdXJjZS5cbiAqL1xuLy8gQHRzLWlnbm9yZSBUUzYxMzNcbmZ1bmN0aW9uIHJvc0RldmljZVByb3BzVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzOiBhbnksIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuKTogYW55IHtcbiAgICBpZiAoIXJvcy5jYW5JbnNwZWN0KHByb3BlcnRpZXMpKSB7IHJldHVybiBwcm9wZXJ0aWVzOyB9XG4gICAgaWYoZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQpIHtcbiAgICAgICAgUm9zRGV2aWNlUHJvcHNWYWxpZGF0b3IocHJvcGVydGllcykuYXNzZXJ0U3VjY2VzcygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ1Byb2R1Y3RLZXknOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnByb2R1Y3RLZXkpLFxuICAgICAgJ0RldkV1aSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuZGV2RXVpKSxcbiAgICAgICdEZXZpY2VOYW1lJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5kZXZpY2VOYW1lKSxcbiAgICAgICdJb3RJbnN0YW5jZUlkJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5pb3RJbnN0YW5jZUlkKSxcbiAgICAgICdOaWNrbmFtZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMubmlja25hbWUpLFxuICAgICAgJ1BpbkNvZGUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnBpbkNvZGUpLFxuICAgIH07XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyBhIGJhc2UgZW5jYXBzdWxhdGlvbiBhcm91bmQgdGhlIFJPUyByZXNvdXJjZSB0eXBlIGBBTElZVU46OklPVDo6RGV2aWNlYC5cbiAqIEBOb3RlIFRoaXMgY2xhc3MgZG9lcyBub3QgY29udGFpbiBhZGRpdGlvbmFsIGZ1bmN0aW9ucywgc28gaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBgRGV2aWNlYCBjbGFzcyBpbnN0ZWFkIG9mIHRoaXMgY2xhc3MgZm9yIGEgbW9yZSBjb252ZW5pZW50IGRldmVsb3BtZW50IGV4cGVyaWVuY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1pb3QtZGV2aWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBSb3NEZXZpY2UgZXh0ZW5kcyByb3MuUm9zUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZXNvdXJjZSB0eXBlIG5hbWUgZm9yIHRoaXMgcmVzb3VyY2UgY2xhc3MuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1NfUkVTT1VSQ0VfVFlQRV9OQU1FID0gXCJBTElZVU46OklPVDo6RGV2aWNlXCI7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIERldmljZU5hbWU6IERldmljZSBuYW1lLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyRGV2aWNlTmFtZTogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBEZXZpY2VTZWNyZXQ6IERldmljZSBrZXkuXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGF0dHJEZXZpY2VTZWNyZXQ6IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgSW90SWQ6IFRoaW5ncyBpbnRlcm5ldCBkZXZpY2UgSUQgaXNzdWVkIGZvciB0aGUgZGV2aWNlLCBhcyB0aGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIGRldmljZS5cbkRlc2NyaXB0aW9uIEtlZXAsIGRvIG5vdCBsZWFrLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRySW90SWQ6IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgSW90SW5zdGFuY2VJZDogSU9UIGluc3RhbmNlIElELlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRySW90SW5zdGFuY2VJZDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBJcEFkZHJlc3M6IElQIGFkZHJlc3MuXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGF0dHJJcEFkZHJlc3M6IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgTmlja05hbWU6IE5pY2sgbmFtZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0ck5pY2tOYW1lOiByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIE5vZGVUeXBlOiBOb2RlIHR5cGUuXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGF0dHJOb2RlVHlwZTogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBQcm9kdWN0S2V5OiBQcm9kdWN0IGtleS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0clByb2R1Y3RLZXk6IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgUHJvZHVjdE5hbWU6IFByb2R1Y3QgbmFtZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0clByb2R1Y3ROYW1lOiByb3MuSVJlc29sdmFibGU7XG5cbiAgICBwdWJsaWMgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW47XG5cblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwcm9kdWN0S2V5OiBUaGUgaWRlbnRpZmllciBvZiB0aGUgcHJvZHVjdCB0byB3aGljaCB0aGUgZGV2aWNlIHRvIGJlIHJlZ2lzdGVyZWQgYmVsb25ncy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHJvZHVjdEtleTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGRldkV1aTogRGV2RVVJIExvUmFXQU4gZXF1aXBtZW50LlxuICAgICAqIFdoZW4geW91IGNyZWF0ZSBhIExvUmFXQU4gZGV2aWNlcywgdGhpcyB3aWxsIHBhc3MuXG4gICAgICovXG4gICAgcHVibGljIGRldkV1aTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGRldmljZU5hbWU6IFRoZSBuYW1lIG9mIHRoZSBkZXZpY2UgdGhhdCB5b3Ugd2FudCB0byByZWdpc3Rlci4gVGhlIGRldmljZSBuYW1lIG11c3QgY29uc2lzdCBvZlxuICAgICAqIDQgdG8gMzIgY2hhcmFjdGVycywgaW5jbHVkaW5nIEVuZ2xpc2ggbGV0dGVycywgZGlnaXRzLCBhbmQgc3BlY2lhbCBjaGFyYWN0ZXJzLCBmb3JcbiAgICAgKiBleGFtcGxlLCBoeXBoZW5zICgtKSwgdW5kZXJzY29yZXMgKF8pLCBhdCBzaWducyAoQCksIHBlcmlvZHMgKC4pICwgYW5kIGNvbG9ucyAoOikuXG4gICAgICogRGV2aWNlTmFtZSBpcyB1c2VkIHdpdGggUHJvZHVjdEtleSB0byBpZGVudGlmeSBhIHNwZWNpZmllZCBkZXZpY2UuXG4gICAgICogTm90ZSBJZiB5b3UgZG8gbm90IHNwZWNpZnkgdGhpcyBwYXJhbWV0ZXIsIHRoZSBzeXN0ZW0gd2lsbCBnZW5lcmF0ZSBhIG5hbWUgZm9yIHRoZSBkZXZpY2UuXG4gICAgICovXG4gICAgcHVibGljIGRldmljZU5hbWU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBpb3RJbnN0YW5jZUlkOiBQdWJsaWMgaW5zdGFuY2UgZG9lcyBub3QgcGFzcyB0aGlzIHBhcmFtZXRlcjsgaW5zdGFuY2UgdGhhdCB5b3UgbmVlZCB0byBidXkgdGhlIGluY29taW5nIGluc3RhbmNlIElELlxuICAgICAqL1xuICAgIHB1YmxpYyBpb3RJbnN0YW5jZUlkOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgbmlja25hbWU6IEFkZCBhIG5pY2tuYW1lIGZvciB0aGUgZGV2aWNlLiBBIG5pY2tuYW1lIGNhbiBiZSA0LTY0IGNoYXJhY3RlcnMgaW4gbGVuZ3RoLCBhbmQgY2FuXG4gICAgICogY29udGFpbiBDaGluZXNlIGNoYXJhY3RlcnMsIEVuZ2xpc2ggbGV0dGVycywgbnVtYmVycyBhbmQgdW5kZXJzY29yZXMgKF8pLiBBIENoaW5lc2VcbiAgICAgKiBjaGFyYWN0ZXIgY291bnRzIGFzIHR3byBjaGFyYWN0ZXJzLlxuICAgICAqL1xuICAgIHB1YmxpYyBuaWNrbmFtZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHBpbkNvZGU6IFBJTiBDb2RlIExvUmFXQU4gZGV2aWNlIGZvciBjaGVja2luZyB0aGUgbGVnaXRpbWFjeSBvZiBEZXZFVUkuXG4gICAgICogV2hlbiB5b3UgY3JlYXRlIGEgTG9SYVdBTiBkZXZpY2VzLCB0aGlzIHdpbGwgcGFzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcGluQ29kZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNjb3BlIC0gc2NvcGUgaW4gd2hpY2ggdGhpcyByZXNvdXJjZSBpcyBkZWZpbmVkXG4gICAgICogQHBhcmFtIGlkICAgIC0gc2NvcGVkIGlkIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBwcm9wcyAtIHJlc291cmNlIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY29wZTogcm9zLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFJvc0RldmljZVByb3BzLCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbikge1xuICAgICAgICBzdXBlcihzY29wZSwgaWQsIHsgdHlwZTogUm9zRGV2aWNlLlJPU19SRVNPVVJDRV9UWVBFX05BTUUsIHByb3BlcnRpZXM6IHByb3BzIH0pO1xuICAgICAgICB0aGlzLmF0dHJEZXZpY2VOYW1lID0gdGhpcy5nZXRBdHQoJ0RldmljZU5hbWUnKTtcbiAgICAgICAgdGhpcy5hdHRyRGV2aWNlU2VjcmV0ID0gdGhpcy5nZXRBdHQoJ0RldmljZVNlY3JldCcpO1xuICAgICAgICB0aGlzLmF0dHJJb3RJZCA9IHRoaXMuZ2V0QXR0KCdJb3RJZCcpO1xuICAgICAgICB0aGlzLmF0dHJJb3RJbnN0YW5jZUlkID0gdGhpcy5nZXRBdHQoJ0lvdEluc3RhbmNlSWQnKTtcbiAgICAgICAgdGhpcy5hdHRySXBBZGRyZXNzID0gdGhpcy5nZXRBdHQoJ0lwQWRkcmVzcycpO1xuICAgICAgICB0aGlzLmF0dHJOaWNrTmFtZSA9IHRoaXMuZ2V0QXR0KCdOaWNrTmFtZScpO1xuICAgICAgICB0aGlzLmF0dHJOb2RlVHlwZSA9IHRoaXMuZ2V0QXR0KCdOb2RlVHlwZScpO1xuICAgICAgICB0aGlzLmF0dHJQcm9kdWN0S2V5ID0gdGhpcy5nZXRBdHQoJ1Byb2R1Y3RLZXknKTtcbiAgICAgICAgdGhpcy5hdHRyUHJvZHVjdE5hbWUgPSB0aGlzLmdldEF0dCgnUHJvZHVjdE5hbWUnKTtcblxuICAgICAgICB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50ID0gZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ7XG4gICAgICAgIHRoaXMucHJvZHVjdEtleSA9IHByb3BzLnByb2R1Y3RLZXk7XG4gICAgICAgIHRoaXMuZGV2RXVpID0gcHJvcHMuZGV2RXVpO1xuICAgICAgICB0aGlzLmRldmljZU5hbWUgPSBwcm9wcy5kZXZpY2VOYW1lO1xuICAgICAgICB0aGlzLmlvdEluc3RhbmNlSWQgPSBwcm9wcy5pb3RJbnN0YW5jZUlkO1xuICAgICAgICB0aGlzLm5pY2tuYW1lID0gcHJvcHMubmlja25hbWU7XG4gICAgICAgIHRoaXMucGluQ29kZSA9IHByb3BzLnBpbkNvZGU7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvZHVjdEtleTogdGhpcy5wcm9kdWN0S2V5LFxuICAgICAgICAgICAgZGV2RXVpOiB0aGlzLmRldkV1aSxcbiAgICAgICAgICAgIGRldmljZU5hbWU6IHRoaXMuZGV2aWNlTmFtZSxcbiAgICAgICAgICAgIGlvdEluc3RhbmNlSWQ6IHRoaXMuaW90SW5zdGFuY2VJZCxcbiAgICAgICAgICAgIG5pY2tuYW1lOiB0aGlzLm5pY2tuYW1lLFxuICAgICAgICAgICAgcGluQ29kZTogdGhpcy5waW5Db2RlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgcmVuZGVyUHJvcGVydGllcyhwcm9wczoge1trZXk6IHN0cmluZ106IGFueX0pOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICB7XG4gICAgICAgIHJldHVybiByb3NEZXZpY2VQcm9wc1RvUm9zVGVtcGxhdGUocHJvcHMsIHRoaXMuZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm9wZXJ0aWVzIGZvciBkZWZpbmluZyBhIGBSb3NEZXZpY2VHcm91cGAuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1pb3QtZGV2aWNlZ3JvdXBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSb3NEZXZpY2VHcm91cFByb3BzIHtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBncm91cE5hbWU6IFRoZSBuYW1lIG9mIHRoZSBncm91cC4gVGhlIG5hbWUgY2FuIGNvbnRhaW4gQ2hpbmVzZSBjaGFyYWN0ZXJzLCBFbmdsaXNoIGxldHRlcnMsIGRpZ2l0cywgYW5kIHVuZGVyc2NvcmVzIChfKS4gVGhlIGxlbmd0aCBtdXN0IGJlIDQgdG8gMzAgY2hhcmFjdGVycyAoYSBDaGluZXNlIGNoYXJhY3RlciBjb3VudHMgYXMgdHdvIGNoYXJhY3RlcnMpLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGdyb3VwTmFtZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGdyb3VwRGVzYzogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBncm91cC4gWW91IGNhbiBlbnRlciBhIGRlc2NyaXB0aW9uIHdpdGggdXAgdG8gMTAwIGNoYXJhY3RlcnMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgZ3JvdXBEZXNjPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGlvdEluc3RhbmNlSWQ6IFB1YmxpYyBpbnN0YW5jZSBkb2VzIG5vdCBwYXNzIHRoaXMgcGFyYW1ldGVyOyBpbnN0YW5jZSB0aGF0IHlvdSBuZWVkIHRvIGJ1eSB0aGUgaW5jb21pbmcgaW5zdGFuY2UgSUQuXG4gICAgICovXG4gICAgcmVhZG9ubHkgaW90SW5zdGFuY2VJZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBzdXBlckdyb3VwSWQ6IFRoZSBJRCBvZiB0aGUgcGFyZW50IGdyb3VwLlxuICAgICAqIElmIHlvdSB3YW50IHRvIGNyZWF0ZSBhIGZpcnN0LWxldmVsIGdyb3VwLCBkbyBub3QgZW50ZXIgdGhpcyBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgcmVhZG9ubHkgc3VwZXJHcm91cElkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xufVxuXG4vKipcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBnaXZlbiBwcm9wZXJ0aWVzIG1hdGNoIHRob3NlIG9mIGEgYFJvc0RldmljZUdyb3VwUHJvcHNgXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc0RldmljZUdyb3VwUHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgdmFsaWRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gUm9zRGV2aWNlR3JvdXBQcm9wc1ZhbGlkYXRvcihwcm9wZXJ0aWVzOiBhbnkpOiByb3MuVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcm9zLlZBTElEQVRJT05fU1VDQ0VTUzsgfVxuICAgIGNvbnN0IGVycm9ycyA9IG5ldyByb3MuVmFsaWRhdGlvblJlc3VsdHMoKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2dyb3VwTmFtZScsIHJvcy5yZXF1aXJlZFZhbGlkYXRvcikocHJvcGVydGllcy5ncm91cE5hbWUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2dyb3VwTmFtZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5ncm91cE5hbWUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3N1cGVyR3JvdXBJZCcsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5zdXBlckdyb3VwSWQpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2lvdEluc3RhbmNlSWQnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuaW90SW5zdGFuY2VJZCkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZ3JvdXBEZXNjJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmdyb3VwRGVzYykpO1xuICAgIHJldHVybiBlcnJvcnMud3JhcCgnc3VwcGxpZWQgcHJvcGVydGllcyBub3QgY29ycmVjdCBmb3IgXCJSb3NEZXZpY2VHcm91cFByb3BzXCInKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpJT1Q6OkRldmljZUdyb3VwYCByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NEZXZpY2VHcm91cFByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpJT1Q6OkRldmljZUdyb3VwYCByZXNvdXJjZS5cbiAqL1xuLy8gQHRzLWlnbm9yZSBUUzYxMzNcbmZ1bmN0aW9uIHJvc0RldmljZUdyb3VwUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXM6IGFueSwgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pOiBhbnkge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHByb3BlcnRpZXM7IH1cbiAgICBpZihlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCkge1xuICAgICAgICBSb3NEZXZpY2VHcm91cFByb3BzVmFsaWRhdG9yKHByb3BlcnRpZXMpLmFzc2VydFN1Y2Nlc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICdHcm91cE5hbWUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmdyb3VwTmFtZSksXG4gICAgICAnR3JvdXBEZXNjJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5ncm91cERlc2MpLFxuICAgICAgJ0lvdEluc3RhbmNlSWQnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmlvdEluc3RhbmNlSWQpLFxuICAgICAgJ1N1cGVyR3JvdXBJZCc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuc3VwZXJHcm91cElkKSxcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYSBiYXNlIGVuY2Fwc3VsYXRpb24gYXJvdW5kIHRoZSBST1MgcmVzb3VyY2UgdHlwZSBgQUxJWVVOOjpJT1Q6OkRldmljZUdyb3VwYC5cbiAqIEBOb3RlIFRoaXMgY2xhc3MgZG9lcyBub3QgY29udGFpbiBhZGRpdGlvbmFsIGZ1bmN0aW9ucywgc28gaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBgRGV2aWNlR3JvdXBgIGNsYXNzIGluc3RlYWQgb2YgdGhpcyBjbGFzcyBmb3IgYSBtb3JlIGNvbnZlbmllbnQgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZS5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWlvdC1kZXZpY2Vncm91cFxuICovXG5leHBvcnQgY2xhc3MgUm9zRGV2aWNlR3JvdXAgZXh0ZW5kcyByb3MuUm9zUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZXNvdXJjZSB0eXBlIG5hbWUgZm9yIHRoaXMgcmVzb3VyY2UgY2xhc3MuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1NfUkVTT1VSQ0VfVFlQRV9OQU1FID0gXCJBTElZVU46OklPVDo6RGV2aWNlR3JvdXBcIjtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgR3JvdXBJZDogUGFja2V0LCBJRCwgU3lzdGVtIGZvciB0aGUgZ2xvYmFsbHkgdW5pcXVlIGlkZW50aWZpZXIgZ2VuZXJhdGVkIHBhY2tldC5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0ckdyb3VwSWQ6IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgSW90SW5zdGFuY2VJZDogSU9UIGluc3RhbmNlIElELlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRySW90SW5zdGFuY2VJZDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgcHVibGljIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuO1xuXG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZ3JvdXBOYW1lOiBUaGUgbmFtZSBvZiB0aGUgZ3JvdXAuIFRoZSBuYW1lIGNhbiBjb250YWluIENoaW5lc2UgY2hhcmFjdGVycywgRW5nbGlzaCBsZXR0ZXJzLCBkaWdpdHMsIGFuZCB1bmRlcnNjb3JlcyAoXykuIFRoZSBsZW5ndGggbXVzdCBiZSA0IHRvIDMwIGNoYXJhY3RlcnMgKGEgQ2hpbmVzZSBjaGFyYWN0ZXIgY291bnRzIGFzIHR3byBjaGFyYWN0ZXJzKS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ3JvdXBOYW1lOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZ3JvdXBEZXNjOiBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIGdyb3VwLiBZb3UgY2FuIGVudGVyIGEgZGVzY3JpcHRpb24gd2l0aCB1cCB0byAxMDAgY2hhcmFjdGVycy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ3JvdXBEZXNjOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgaW90SW5zdGFuY2VJZDogUHVibGljIGluc3RhbmNlIGRvZXMgbm90IHBhc3MgdGhpcyBwYXJhbWV0ZXI7IGluc3RhbmNlIHRoYXQgeW91IG5lZWQgdG8gYnV5IHRoZSBpbmNvbWluZyBpbnN0YW5jZSBJRC5cbiAgICAgKi9cbiAgICBwdWJsaWMgaW90SW5zdGFuY2VJZDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHN1cGVyR3JvdXBJZDogVGhlIElEIG9mIHRoZSBwYXJlbnQgZ3JvdXAuXG4gICAgICogSWYgeW91IHdhbnQgdG8gY3JlYXRlIGEgZmlyc3QtbGV2ZWwgZ3JvdXAsIGRvIG5vdCBlbnRlciB0aGlzIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3VwZXJHcm91cElkOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2NvcGUgLSBzY29wZSBpbiB3aGljaCB0aGlzIHJlc291cmNlIGlzIGRlZmluZWRcbiAgICAgKiBAcGFyYW0gaWQgICAgLSBzY29wZWQgaWQgb2YgdGhlIHJlc291cmNlXG4gICAgICogQHBhcmFtIHByb3BzIC0gcmVzb3VyY2UgcHJvcGVydGllc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjb3BlOiByb3MuQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogUm9zRGV2aWNlR3JvdXBQcm9wcywgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pIHtcbiAgICAgICAgc3VwZXIoc2NvcGUsIGlkLCB7IHR5cGU6IFJvc0RldmljZUdyb3VwLlJPU19SRVNPVVJDRV9UWVBFX05BTUUsIHByb3BlcnRpZXM6IHByb3BzIH0pO1xuICAgICAgICB0aGlzLmF0dHJHcm91cElkID0gdGhpcy5nZXRBdHQoJ0dyb3VwSWQnKTtcbiAgICAgICAgdGhpcy5hdHRySW90SW5zdGFuY2VJZCA9IHRoaXMuZ2V0QXR0KCdJb3RJbnN0YW5jZUlkJyk7XG5cbiAgICAgICAgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCA9IGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50O1xuICAgICAgICB0aGlzLmdyb3VwTmFtZSA9IHByb3BzLmdyb3VwTmFtZTtcbiAgICAgICAgdGhpcy5ncm91cERlc2MgPSBwcm9wcy5ncm91cERlc2M7XG4gICAgICAgIHRoaXMuaW90SW5zdGFuY2VJZCA9IHByb3BzLmlvdEluc3RhbmNlSWQ7XG4gICAgICAgIHRoaXMuc3VwZXJHcm91cElkID0gcHJvcHMuc3VwZXJHcm91cElkO1xuICAgIH1cblxuXG4gICAgcHJvdGVjdGVkIGdldCByb3NQcm9wZXJ0aWVzKCk6IHsgW2tleTogc3RyaW5nXTogYW55IH0gIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdyb3VwTmFtZTogdGhpcy5ncm91cE5hbWUsXG4gICAgICAgICAgICBncm91cERlc2M6IHRoaXMuZ3JvdXBEZXNjLFxuICAgICAgICAgICAgaW90SW5zdGFuY2VJZDogdGhpcy5pb3RJbnN0YW5jZUlkLFxuICAgICAgICAgICAgc3VwZXJHcm91cElkOiB0aGlzLnN1cGVyR3JvdXBJZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIHJlbmRlclByb3BlcnRpZXMocHJvcHM6IHtba2V5OiBzdHJpbmddOiBhbnl9KTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4gcm9zRGV2aWNlR3JvdXBQcm9wc1RvUm9zVGVtcGxhdGUocHJvcHMsIHRoaXMuZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm9wZXJ0aWVzIGZvciBkZWZpbmluZyBhIGBSb3NQcm9kdWN0YC5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWlvdC1wcm9kdWN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUm9zUHJvZHVjdFByb3BzIHtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBub2RlVHlwZTogVGhlIG5vZGUgdHlwZSBvZiB0aGUgcHJvZHVjdC4gVmFsdWVzOlxuICAgICAqIDA6IERldmljZS4gQSBkZXZpY2UgY2Fubm90IGJlIG1vdW50ZWQgd2l0aCBzdWItZGV2aWNlcy4gSXQgY2FuIGNvbm5lY3QgdG8gSW9UIFBsYXRmb3JtXG4gICAgICogZWl0aGVyIGRpcmVjdGx5IG9yIGFzIGEgc3ViLWRldmljZSBvZiBhIGdhdGV3YXkuXG4gICAgICogMTogR2F0ZXdheS4gQSBnYXRld2F5IGNhbiBiZSBtb3VudGVkIHdpdGggc3ViLWRldmljZXMuIEl0IGNhbiBtYW5hZ2Ugc3ViLWRldmljZXMsIG1haW50YWluXG4gICAgICogdGhlIHRvcG9sb2dpY2FsIHJlbGF0aW9uc2hpcHMgd2l0aCBzdWItZGV2aWNlcywgYW5kIHN5bmNocm9uaXplIHRoZSB0b3BvbG9naWNhbCByZWxhdGlvbnNoaXBzXG4gICAgICogdG8gSW9UIFBsYXRmb3JtLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IG5vZGVUeXBlOiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcHJvZHVjdE5hbWU6IFRoZSBuYW1lIG9mIHRoZSBwcm9kdWN0LiBBIHByb2R1Y3QgbmFtZSBjYW4gYmUgNCB0byAzMCBjaGFyYWN0ZXJzIGluIGxlbmd0aCBhbmQgY2FuXG4gICAgICogY29udGFpbiBDaGluZXNlIGNoYXJhY3RlcnMsIEVuZ2xpc2ggbGV0dGVycywgZGlnaXRzLCBhbmQgdW5kZXJzY29yZXMgKF8pLlxuICAgICAqIE5vdGUgQSBwcm9kdWN0IG5hbWUgbXVzdCBiZSB1bmlxdWUgaW4gYW4gYWNjb3VudC5cbiAgICAgKi9cbiAgICByZWFkb25seSBwcm9kdWN0TmFtZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGFsaXl1bkNvbW1vZGl0eUNvZGU6IFRoZSBlZGl0aW9uIG9mIHRoZSBwcm9kdWN0IHRoYXQgeW91IHdhbnQgdG8gY3JlYXRlLiBUaGVyZSBhcmUgdHdvIG9wdGlvbnM6XG4gICAgICogaW90aHViX3NlbmlvcjogUHJvIEVkaXRpb24uXG4gICAgICogaW90aHViOiBCYXNpYyBFZGl0aW9uLlxuICAgICAqIElmIHlvdSBkbyBub3QgaW5wdXQgdGhpcyBwYXJhbWV0ZXIsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIHVzZWQsIHdoaWNoIGlzIGlvdGh1YiAoQmFzaWNcbiAgICAgKiBFZGl0aW9uKS5cbiAgICAgKi9cbiAgICByZWFkb25seSBhbGl5dW5Db21tb2RpdHlDb2RlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGF1dGhUeXBlOiBBdXRoZW50aWNhdGlvbiBkZXZpY2UgdG8gYWNjZXNzIHRoZSBJbnRlcm5ldCBvZiBUaGluZ3MgcGxhdGZvcm0gdW5kZXIgdGhlIHByb2R1Y3QuIE9wdGlvbmFsOlxuICAgICAqIHNlY3JldDogdXNpbmcgYSBkZXZpY2Uga2V5IGZvciBkZXZpY2UgYXV0aGVudGljYXRpb24uXG4gICAgICogRGV0YWlscyBjYW4gYmUgZm91bmQgTVFUVC1UQ1AgY29ubmVjdGlvbiBjb21tdW5pY2F0aW9uLlxuICAgICAqIGlkMjogVXNlIHRoaW5ncyBkZXZpY2UgYXV0aGVudGljYXRpb24gSUQuXG4gICAgICogeDUwOTogWC41MDkgY2VydGlmaWNhdGVzIHVzaW5nIHRoZSBkZXZpY2UgZm9yIGRldmljZSBhdXRoZW50aWNhdGlvbi5cbiAgICAgKiBUaGUgdXNlIG9mIFguNTA5IGNlcnRpZmljYXRlcyBkZXZpY2Ugc2lkZSBjb25maWd1cmF0aW9uIGluc3RydWN0aW9ucywgc2VlIFVzaW5nIFguNTA5IGNlcnRpZmljYXRlIGF1dGhlbnRpY2F0aW9uLlxuICAgICAqIElmIHRoaXMgcGFyYW1ldGVyIGlzIHBhc3NlZCwgdGhlIGRlZmF1bHQgdmFsdWUgaXMgc2VjcmV0LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGF1dGhUeXBlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGNhdGVnb3J5S2V5OiBJZGVudGlmaWVyIFByb2R1Y3QgY2F0ZWdvcnkuIElmIHlvdSBwYXNzIHRoaXMgcGFyYW1ldGVyLCB0aGUgcHJvZHVjdCB3aWxsIGJlIGNyZWF0ZWQgdXNpbmcgdGhlIG9iamVjdCBtb2RlbCBzcGVjaWZpZWQgY2F0ZWdvcnk7IG5vdCBwYXNzZWQsIHRoZSBzdGFuZGFyZCBtb2RlbCBpcyBub3QgdXNlZCBpbiBhbnkgY2F0ZWdvcnkuXG4gICAgICogQ2FsbCBMaXN0VGhpbmdUZW1wbGF0ZXMsIHZpZXcgb2YgdGhpbmdzIHBsYXRmb3JtIHByZWRlZmluZWQgY2F0ZWdvcnkgaW5mb3JtYXRpb24gZnJvbSB0aGUgcmV0dXJuZWQgcmVzdWx0cywgZ2V0IHRoZSB2YWx1ZSBvZiBDYXRlZ29yeUtleS5cbiAgICAgKi9cbiAgICByZWFkb25seSBjYXRlZ29yeUtleT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBkYXRhRm9ybWF0OiBZb3UgbXVzdCBzcGVjaWZ5IHRoaXMgcGFyYW1ldGVyIGlmIHRoZSB2YWx1ZSBvZiBBbGl5dW5Db21tb2RpdHlDb2RlIGlzIGlvdGh1Yl9zZW5pb3IuXG4gICAgICogVGhpcyBwYXJhbWV0ZXIgaXMgb25seSBhdmFpbGFibGUgYW5kIHJlcXVpcmVkIHdoZW4geW91IGNyZWF0ZSBhIFBybyBFZGl0aW9uIHByb2R1Y3QuXG4gICAgICogT3B0aW9uczpcbiAgICAgKiAwOiBEbyBub3QgcGFyc2VcXC9DdXN0b20uXG4gICAgICogMTogQWxpbmsgSlNPTi5cbiAgICAgKi9cbiAgICByZWFkb25seSBkYXRhRm9ybWF0PzogbnVtYmVyIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGRlc2NyaXB0aW9uOiBBIGRlc2NyaXB0aW9uIG9mIHRoZSBwcm9kdWN0LiBUaGUgZGVzY3JpcHRpb24gY2FuIGJlIGEgbWF4aW11bSBvZiAxMDAgY2hhcmFjdGVycyBpblxuICAgICAqIGxlbmd0aC5cbiAgICAgKi9cbiAgICByZWFkb25seSBkZXNjcmlwdGlvbj86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBpZDI6IFdoZXRoZXIgSUQyIGNlcnRpZmljYXRpb24uXG4gICAgICogT3B0aW9uYWwgdmFsdWVzOlxuICAgICAqIHRydWU6IHRoZSBvcGVuaW5nIG9mIElEMiBjZXJ0aWZpY2F0aW9uLlxuICAgICAqIGZhbHNlOiBkbyBub3Qgb3BlbiBJRDIgY2VydGlmaWNhdGlvbi5cbiAgICAgKiBEbyBub3QgcGFzcyB0aGlzIHBhcmFtZXRlciwgdGhlIGRlZmF1bHQgaXMgbm90IG9wZW5lZC5cbiAgICAgKiBFeHBsYW5hdGlvblxuICAgICAqIE9ubHkgMiBFYXN0IENoaW5hIChTaGFuZ2hhaSkgcmVnaW9uYWwgc3VwcG9ydCBJRDIgYXV0aGVudGljYXRpb24uXG4gICAgICogSWYgdGhpcyBwYXJhbWV0ZXIgdmFsdWUgaXMgc2V0IHRvIHRydWUsIGJ1dCBwYXNzZWQgQXV0aFR5cGUgcGFyYW1ldGVyIHZhbHVlIGlzIG5vdCBpZDIsIHRoZSBzeXN0ZW0gd2lsbCBBdXRoVHlwZSBwYXJhbWV0ZXIgdmFsdWVzIHByZXZhaWwuXG4gICAgICovXG4gICAgcmVhZG9ubHkgaWQyPzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBpb3RJbnN0YW5jZUlkOiBQdWJsaWMgaW5zdGFuY2UgZG9lcyBub3QgcGFzcyB0aGlzIHBhcmFtZXRlcjsgaW5zdGFuY2UgdGhhdCB5b3UgbmVlZCB0byBidXkgdGhlIGluY29taW5nIGluc3RhbmNlIElELlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGlvdEluc3RhbmNlSWQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgam9pblBlcm1pc3Npb25JZDogTG9SYVdBTiBuZXR3b3JrIGNyZWRlbnRpYWwgSUQuIFdoZW4gbmV0d29ya2luZyBtb2RlIE5ldFR5cGUgY2hvc2VuIExPUkEsIHRoZSBuZWNlc3NhcnkgcGFyYW1ldGVycy5cbiAgICAgKiBQbGVhc2UgY2FsbCBRdWVyeUxvUmFKb2luUGVybWlzc2lvbnMgcXVlcnkgSm9pblBlcm1pc3Npb25JZCBuZXR3b3JrIGNyZWRlbnRpYWxzIExvUmFXQU4gdW5kZXIgeW91ciBhY2NvdW50LlxuICAgICAqIElmIHlvdSBkbyBub3QgTG9SYVdBTiBuZXR3b3JrIGNyZWRlbnRpYWxzLCB2aXNpdCB0aGUgbmV0d29yayBtYW5hZ2VtZW50IHBsYXRmb3JtIHRvIGNyZWF0ZSB0aGluZ3MgdG9nZXRoZXIuXG4gICAgICovXG4gICAgcmVhZG9ubHkgam9pblBlcm1pc3Npb25JZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBuZXRUeXBlOiBOZXR3b3JraW5nIG1vZGUuXG4gICAgICogU2V0IHRoaXMgcGFyYW1ldGVyIG9ubHkgaWYgeW91IGFyZSBjcmVhdGluZyBhIHByb2R1Y3Qgd2hvc2UgZGV2aWNlcyBkaXJlY3RseSBjb25uZWN0XG4gICAgICogdG8gSW9UIFBsYXRmb3JtLlxuICAgICAqIE9wdGlvbnM6XG4gICAgICogV0lGSVxuICAgICAqIENFTExVTEFSXG4gICAgICogRVRIRVJORVRcbiAgICAgKiBPVEhFUlxuICAgICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIFdJRkkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgbmV0VHlwZT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwcm90b2NvbFR5cGU6IFRoZSBwcm90b2NvbCB0aGF0IGRldmljZXMgb2YgdGhpcyBwcm9kdWN0IHVzZSB0byBjb25uZWN0IHRvIGdhdGV3YXlzLlxuICAgICAqIFNldCB0aGlzIHBhcmFtZXRlciBvbmx5IGlmIHlvdSBhcmUgY3JlYXRpbmcgYSBwcm9kdWN0IHdob3NlIGRldmljZXMgd2lsbCBiZSBjb25uZWN0ZWRcbiAgICAgKiB0byBnYXRld2F5cy5cbiAgICAgKiBPcHRpb25zOlxuICAgICAqIG1vZGJ1czogTW9kYnVzLlxuICAgICAqIG9wYy11YTogT1BDIFVBLlxuICAgICAqIGN1c3RvbWl6ZTogQ3VzdG9taXplZCBwcm90b2NvbC5cbiAgICAgKiBibGU6IEJMRS5cbiAgICAgKiB6aWdiZWU6IFppZ0JlZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBwcm90b2NvbFR5cGU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcHVibGlzaEF1dG86IFdoZXRoZXIgdG8gYXV0b21hdGljYWxseSBtb2RlbCBwdWJsaWNhdGlvbiBhZnRlciB0aGUgcHJvZHVjdCBpcyBjcmVhdGVkLlxuICAgICAqIHRydWU6IHB1Ymxpc2hpbmcuXG4gICAgICogZmFsc2U6IG5vdCByZWxlYXNlZC5cbiAgICAgKiBUaGlzIHBhcmFtZXRlciBpcyBub3QgcGFzc2VkLCB0aGUgZGVmYXVsdCB2YWx1ZSB0cnVlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHB1Ymxpc2hBdXRvPzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSByZXNvdXJjZUdyb3VwSWQ6IFJlc291cmNlIGdyb3VwIElEIChncm91cCBJRCB0byB2aWV3IHRoZSByZXNvdXJjZSBpbiB0aGUgcmVzb3VyY2UgbWFuYWdlbWVudCBjb25zb2xlKSwgc3BlY2lmeSB0aGUgcHJvZHVjdCBpcyBjbGFzc2lmaWVkIGFzIGEgcmVzb3VyY2UgZ3JvdXAuXG4gICAgICogSWYgdGhpcyBwYXJhbWV0ZXIgaXMgcGFzc2VkLCB0aGUgcHJvZHVjdCB3aWxsIGJlIGNsYXNzaWZpZWQgYXMgYSBkZWZhdWx0IHJlc291cmNlIGdyb3VwLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHJlc291cmNlR3JvdXBJZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgZ2l2ZW4gcHJvcGVydGllcyBtYXRjaCB0aG9zZSBvZiBhIGBSb3NQcm9kdWN0UHJvcHNgXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc1Byb2R1Y3RQcm9wc2BcbiAqXG4gKiBAcmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSB2YWxpZGF0aW9uLlxuICovXG5mdW5jdGlvbiBSb3NQcm9kdWN0UHJvcHNWYWxpZGF0b3IocHJvcGVydGllczogYW55KTogcm9zLlZhbGlkYXRpb25SZXN1bHQge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHJvcy5WQUxJREFUSU9OX1NVQ0NFU1M7IH1cbiAgICBjb25zdCBlcnJvcnMgPSBuZXcgcm9zLlZhbGlkYXRpb25SZXN1bHRzKCk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdwdWJsaXNoQXV0bycsIHJvcy52YWxpZGF0ZUJvb2xlYW4pKHByb3BlcnRpZXMucHVibGlzaEF1dG8pKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2Rlc2NyaXB0aW9uJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdpb3RJbnN0YW5jZUlkJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmlvdEluc3RhbmNlSWQpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3Byb2R1Y3ROYW1lJywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLnByb2R1Y3ROYW1lKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdwcm9kdWN0TmFtZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5wcm9kdWN0TmFtZSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncmVzb3VyY2VHcm91cElkJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnJlc291cmNlR3JvdXBJZCkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignYWxpeXVuQ29tbW9kaXR5Q29kZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5hbGl5dW5Db21tb2RpdHlDb2RlKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdjYXRlZ29yeUtleScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5jYXRlZ29yeUtleSkpO1xuICAgIGlmKHByb3BlcnRpZXMucHJvdG9jb2xUeXBlICYmICh0eXBlb2YgcHJvcGVydGllcy5wcm90b2NvbFR5cGUpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3Byb3RvY29sVHlwZScsIHJvcy52YWxpZGF0ZUFsbG93ZWRWYWx1ZXMpKHtcbiAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLnByb3RvY29sVHlwZSxcbiAgICAgICAgICBhbGxvd2VkVmFsdWVzOiBbXCJibGVcIixcImN1c3RvbWl6ZVwiLFwibW9kYnVzXCIsXCJvcGMtdWFcIixcInppZ2JlZVwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3Byb3RvY29sVHlwZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5wcm90b2NvbFR5cGUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2lkMicsIHJvcy52YWxpZGF0ZUJvb2xlYW4pKHByb3BlcnRpZXMuaWQyKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdub2RlVHlwZScsIHJvcy5yZXF1aXJlZFZhbGlkYXRvcikocHJvcGVydGllcy5ub2RlVHlwZSkpO1xuICAgIGlmKHByb3BlcnRpZXMubm9kZVR5cGUgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLm5vZGVUeXBlKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdub2RlVHlwZScsIHJvcy52YWxpZGF0ZUFsbG93ZWRWYWx1ZXMpKHtcbiAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLm5vZGVUeXBlLFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFswLDFdLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignbm9kZVR5cGUnLCByb3MudmFsaWRhdGVOdW1iZXIpKHByb3BlcnRpZXMubm9kZVR5cGUpKTtcbiAgICBpZihwcm9wZXJ0aWVzLmRhdGFGb3JtYXQgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLmRhdGFGb3JtYXQpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2RhdGFGb3JtYXQnLCByb3MudmFsaWRhdGVBbGxvd2VkVmFsdWVzKSh7XG4gICAgICAgICAgZGF0YTogcHJvcGVydGllcy5kYXRhRm9ybWF0LFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFswLDFdLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZGF0YUZvcm1hdCcsIHJvcy52YWxpZGF0ZU51bWJlcikocHJvcGVydGllcy5kYXRhRm9ybWF0KSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdhdXRoVHlwZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5hdXRoVHlwZSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignam9pblBlcm1pc3Npb25JZCcsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5qb2luUGVybWlzc2lvbklkKSk7XG4gICAgaWYocHJvcGVydGllcy5uZXRUeXBlICYmICh0eXBlb2YgcHJvcGVydGllcy5uZXRUeXBlKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCduZXRUeXBlJywgcm9zLnZhbGlkYXRlQWxsb3dlZFZhbHVlcykoe1xuICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMubmV0VHlwZSxcbiAgICAgICAgICBhbGxvd2VkVmFsdWVzOiBbXCJDRUxMVUxBUlwiLFwiRVRIRVJORVRcIixcIkxPUkFcIixcIk9USEVSXCIsXCJXSUZJXCJdLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignbmV0VHlwZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5uZXRUeXBlKSk7XG4gICAgcmV0dXJuIGVycm9ycy53cmFwKCdzdXBwbGllZCBwcm9wZXJ0aWVzIG5vdCBjb3JyZWN0IGZvciBcIlJvc1Byb2R1Y3RQcm9wc1wiJyk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgQWxpQ2xvdWQgUk9TIFJlc291cmNlIHByb3BlcnRpZXMgb2YgYW4gYEFMSVlVTjo6SU9UOjpQcm9kdWN0YCByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NQcm9kdWN0UHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OklPVDo6UHJvZHVjdGAgcmVzb3VyY2UuXG4gKi9cbi8vIEB0cy1pZ25vcmUgVFM2MTMzXG5mdW5jdGlvbiByb3NQcm9kdWN0UHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXM6IGFueSwgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pOiBhbnkge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHByb3BlcnRpZXM7IH1cbiAgICBpZihlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCkge1xuICAgICAgICBSb3NQcm9kdWN0UHJvcHNWYWxpZGF0b3IocHJvcGVydGllcykuYXNzZXJ0U3VjY2VzcygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ05vZGVUeXBlJzogcm9zLm51bWJlclRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5ub2RlVHlwZSksXG4gICAgICAnUHJvZHVjdE5hbWUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnByb2R1Y3ROYW1lKSxcbiAgICAgICdBbGl5dW5Db21tb2RpdHlDb2RlJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5hbGl5dW5Db21tb2RpdHlDb2RlKSxcbiAgICAgICdBdXRoVHlwZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuYXV0aFR5cGUpLFxuICAgICAgJ0NhdGVnb3J5S2V5Jzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5jYXRlZ29yeUtleSksXG4gICAgICAnRGF0YUZvcm1hdCc6IHJvcy5udW1iZXJUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuZGF0YUZvcm1hdCksXG4gICAgICAnRGVzY3JpcHRpb24nOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uKSxcbiAgICAgICdJZDInOiByb3MuYm9vbGVhblRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5pZDIpLFxuICAgICAgJ0lvdEluc3RhbmNlSWQnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmlvdEluc3RhbmNlSWQpLFxuICAgICAgJ0pvaW5QZXJtaXNzaW9uSWQnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmpvaW5QZXJtaXNzaW9uSWQpLFxuICAgICAgJ05ldFR5cGUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLm5ldFR5cGUpLFxuICAgICAgJ1Byb3RvY29sVHlwZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMucHJvdG9jb2xUeXBlKSxcbiAgICAgICdQdWJsaXNoQXV0byc6IHJvcy5ib29sZWFuVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnB1Ymxpc2hBdXRvKSxcbiAgICAgICdSZXNvdXJjZUdyb3VwSWQnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnJlc291cmNlR3JvdXBJZCksXG4gICAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGEgYmFzZSBlbmNhcHN1bGF0aW9uIGFyb3VuZCB0aGUgUk9TIHJlc291cmNlIHR5cGUgYEFMSVlVTjo6SU9UOjpQcm9kdWN0YCwgd2hpY2ggaXMgdXNlZCB0byBjcmVhdGUgYSBwcm9kdWN0LlxuICogQE5vdGUgVGhpcyBjbGFzcyBkb2VzIG5vdCBjb250YWluIGFkZGl0aW9uYWwgZnVuY3Rpb25zLCBzbyBpdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgdGhlIGBQcm9kdWN0YCBjbGFzcyBpbnN0ZWFkIG9mIHRoaXMgY2xhc3MgZm9yIGEgbW9yZSBjb252ZW5pZW50IGRldmVsb3BtZW50IGV4cGVyaWVuY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1pb3QtcHJvZHVjdFxuICovXG5leHBvcnQgY2xhc3MgUm9zUHJvZHVjdCBleHRlbmRzIHJvcy5Sb3NSZXNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogVGhlIHJlc291cmNlIHR5cGUgbmFtZSBmb3IgdGhpcyByZXNvdXJjZSBjbGFzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFJPU19SRVNPVVJDRV9UWVBFX05BTUUgPSBcIkFMSVlVTjo6SU9UOjpQcm9kdWN0XCI7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIElvdEluc3RhbmNlSWQ6IElPVCBpbnN0YW5jZSBJRC5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0cklvdEluc3RhbmNlSWQ6IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgUHJvZHVjdEtleTogVGhlIGdsb2JhbGx5IHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSBwcm9kdWN0IGlzc3VlZCBieSBJb1QgUGxhdGZvcm0uXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGF0dHJQcm9kdWN0S2V5OiByb3MuSVJlc29sdmFibGU7XG5cbiAgICBwdWJsaWMgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW47XG5cblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBub2RlVHlwZTogVGhlIG5vZGUgdHlwZSBvZiB0aGUgcHJvZHVjdC4gVmFsdWVzOlxuICAgICAqIDA6IERldmljZS4gQSBkZXZpY2UgY2Fubm90IGJlIG1vdW50ZWQgd2l0aCBzdWItZGV2aWNlcy4gSXQgY2FuIGNvbm5lY3QgdG8gSW9UIFBsYXRmb3JtXG4gICAgICogZWl0aGVyIGRpcmVjdGx5IG9yIGFzIGEgc3ViLWRldmljZSBvZiBhIGdhdGV3YXkuXG4gICAgICogMTogR2F0ZXdheS4gQSBnYXRld2F5IGNhbiBiZSBtb3VudGVkIHdpdGggc3ViLWRldmljZXMuIEl0IGNhbiBtYW5hZ2Ugc3ViLWRldmljZXMsIG1haW50YWluXG4gICAgICogdGhlIHRvcG9sb2dpY2FsIHJlbGF0aW9uc2hpcHMgd2l0aCBzdWItZGV2aWNlcywgYW5kIHN5bmNocm9uaXplIHRoZSB0b3BvbG9naWNhbCByZWxhdGlvbnNoaXBzXG4gICAgICogdG8gSW9UIFBsYXRmb3JtLlxuICAgICAqL1xuICAgIHB1YmxpYyBub2RlVHlwZTogbnVtYmVyIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHByb2R1Y3ROYW1lOiBUaGUgbmFtZSBvZiB0aGUgcHJvZHVjdC4gQSBwcm9kdWN0IG5hbWUgY2FuIGJlIDQgdG8gMzAgY2hhcmFjdGVycyBpbiBsZW5ndGggYW5kIGNhblxuICAgICAqIGNvbnRhaW4gQ2hpbmVzZSBjaGFyYWN0ZXJzLCBFbmdsaXNoIGxldHRlcnMsIGRpZ2l0cywgYW5kIHVuZGVyc2NvcmVzIChfKS5cbiAgICAgKiBOb3RlIEEgcHJvZHVjdCBuYW1lIG11c3QgYmUgdW5pcXVlIGluIGFuIGFjY291bnQuXG4gICAgICovXG4gICAgcHVibGljIHByb2R1Y3ROYW1lOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgYWxpeXVuQ29tbW9kaXR5Q29kZTogVGhlIGVkaXRpb24gb2YgdGhlIHByb2R1Y3QgdGhhdCB5b3Ugd2FudCB0byBjcmVhdGUuIFRoZXJlIGFyZSB0d28gb3B0aW9uczpcbiAgICAgKiBpb3RodWJfc2VuaW9yOiBQcm8gRWRpdGlvbi5cbiAgICAgKiBpb3RodWI6IEJhc2ljIEVkaXRpb24uXG4gICAgICogSWYgeW91IGRvIG5vdCBpbnB1dCB0aGlzIHBhcmFtZXRlciwgdGhlIGRlZmF1bHQgdmFsdWUgaXMgdXNlZCwgd2hpY2ggaXMgaW90aHViIChCYXNpY1xuICAgICAqIEVkaXRpb24pLlxuICAgICAqL1xuICAgIHB1YmxpYyBhbGl5dW5Db21tb2RpdHlDb2RlOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgYXV0aFR5cGU6IEF1dGhlbnRpY2F0aW9uIGRldmljZSB0byBhY2Nlc3MgdGhlIEludGVybmV0IG9mIFRoaW5ncyBwbGF0Zm9ybSB1bmRlciB0aGUgcHJvZHVjdC4gT3B0aW9uYWw6XG4gICAgICogc2VjcmV0OiB1c2luZyBhIGRldmljZSBrZXkgZm9yIGRldmljZSBhdXRoZW50aWNhdGlvbi5cbiAgICAgKiBEZXRhaWxzIGNhbiBiZSBmb3VuZCBNUVRULVRDUCBjb25uZWN0aW9uIGNvbW11bmljYXRpb24uXG4gICAgICogaWQyOiBVc2UgdGhpbmdzIGRldmljZSBhdXRoZW50aWNhdGlvbiBJRC5cbiAgICAgKiB4NTA5OiBYLjUwOSBjZXJ0aWZpY2F0ZXMgdXNpbmcgdGhlIGRldmljZSBmb3IgZGV2aWNlIGF1dGhlbnRpY2F0aW9uLlxuICAgICAqIFRoZSB1c2Ugb2YgWC41MDkgY2VydGlmaWNhdGVzIGRldmljZSBzaWRlIGNvbmZpZ3VyYXRpb24gaW5zdHJ1Y3Rpb25zLCBzZWUgVXNpbmcgWC41MDkgY2VydGlmaWNhdGUgYXV0aGVudGljYXRpb24uXG4gICAgICogSWYgdGhpcyBwYXJhbWV0ZXIgaXMgcGFzc2VkLCB0aGUgZGVmYXVsdCB2YWx1ZSBpcyBzZWNyZXQuXG4gICAgICovXG4gICAgcHVibGljIGF1dGhUeXBlOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgY2F0ZWdvcnlLZXk6IElkZW50aWZpZXIgUHJvZHVjdCBjYXRlZ29yeS4gSWYgeW91IHBhc3MgdGhpcyBwYXJhbWV0ZXIsIHRoZSBwcm9kdWN0IHdpbGwgYmUgY3JlYXRlZCB1c2luZyB0aGUgb2JqZWN0IG1vZGVsIHNwZWNpZmllZCBjYXRlZ29yeTsgbm90IHBhc3NlZCwgdGhlIHN0YW5kYXJkIG1vZGVsIGlzIG5vdCB1c2VkIGluIGFueSBjYXRlZ29yeS5cbiAgICAgKiBDYWxsIExpc3RUaGluZ1RlbXBsYXRlcywgdmlldyBvZiB0aGluZ3MgcGxhdGZvcm0gcHJlZGVmaW5lZCBjYXRlZ29yeSBpbmZvcm1hdGlvbiBmcm9tIHRoZSByZXR1cm5lZCByZXN1bHRzLCBnZXQgdGhlIHZhbHVlIG9mIENhdGVnb3J5S2V5LlxuICAgICAqL1xuICAgIHB1YmxpYyBjYXRlZ29yeUtleTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGRhdGFGb3JtYXQ6IFlvdSBtdXN0IHNwZWNpZnkgdGhpcyBwYXJhbWV0ZXIgaWYgdGhlIHZhbHVlIG9mIEFsaXl1bkNvbW1vZGl0eUNvZGUgaXMgaW90aHViX3Nlbmlvci5cbiAgICAgKiBUaGlzIHBhcmFtZXRlciBpcyBvbmx5IGF2YWlsYWJsZSBhbmQgcmVxdWlyZWQgd2hlbiB5b3UgY3JlYXRlIGEgUHJvIEVkaXRpb24gcHJvZHVjdC5cbiAgICAgKiBPcHRpb25zOlxuICAgICAqIDA6IERvIG5vdCBwYXJzZVxcL0N1c3RvbS5cbiAgICAgKiAxOiBBbGluayBKU09OLlxuICAgICAqL1xuICAgIHB1YmxpYyBkYXRhRm9ybWF0OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZGVzY3JpcHRpb246IEEgZGVzY3JpcHRpb24gb2YgdGhlIHByb2R1Y3QuIFRoZSBkZXNjcmlwdGlvbiBjYW4gYmUgYSBtYXhpbXVtIG9mIDEwMCBjaGFyYWN0ZXJzIGluXG4gICAgICogbGVuZ3RoLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGlkMjogV2hldGhlciBJRDIgY2VydGlmaWNhdGlvbi5cbiAgICAgKiBPcHRpb25hbCB2YWx1ZXM6XG4gICAgICogdHJ1ZTogdGhlIG9wZW5pbmcgb2YgSUQyIGNlcnRpZmljYXRpb24uXG4gICAgICogZmFsc2U6IGRvIG5vdCBvcGVuIElEMiBjZXJ0aWZpY2F0aW9uLlxuICAgICAqIERvIG5vdCBwYXNzIHRoaXMgcGFyYW1ldGVyLCB0aGUgZGVmYXVsdCBpcyBub3Qgb3BlbmVkLlxuICAgICAqIEV4cGxhbmF0aW9uXG4gICAgICogT25seSAyIEVhc3QgQ2hpbmEgKFNoYW5naGFpKSByZWdpb25hbCBzdXBwb3J0IElEMiBhdXRoZW50aWNhdGlvbi5cbiAgICAgKiBJZiB0aGlzIHBhcmFtZXRlciB2YWx1ZSBpcyBzZXQgdG8gdHJ1ZSwgYnV0IHBhc3NlZCBBdXRoVHlwZSBwYXJhbWV0ZXIgdmFsdWUgaXMgbm90IGlkMiwgdGhlIHN5c3RlbSB3aWxsIEF1dGhUeXBlIHBhcmFtZXRlciB2YWx1ZXMgcHJldmFpbC5cbiAgICAgKi9cbiAgICBwdWJsaWMgaWQyOiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGlvdEluc3RhbmNlSWQ6IFB1YmxpYyBpbnN0YW5jZSBkb2VzIG5vdCBwYXNzIHRoaXMgcGFyYW1ldGVyOyBpbnN0YW5jZSB0aGF0IHlvdSBuZWVkIHRvIGJ1eSB0aGUgaW5jb21pbmcgaW5zdGFuY2UgSUQuXG4gICAgICovXG4gICAgcHVibGljIGlvdEluc3RhbmNlSWQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBqb2luUGVybWlzc2lvbklkOiBMb1JhV0FOIG5ldHdvcmsgY3JlZGVudGlhbCBJRC4gV2hlbiBuZXR3b3JraW5nIG1vZGUgTmV0VHlwZSBjaG9zZW4gTE9SQSwgdGhlIG5lY2Vzc2FyeSBwYXJhbWV0ZXJzLlxuICAgICAqIFBsZWFzZSBjYWxsIFF1ZXJ5TG9SYUpvaW5QZXJtaXNzaW9ucyBxdWVyeSBKb2luUGVybWlzc2lvbklkIG5ldHdvcmsgY3JlZGVudGlhbHMgTG9SYVdBTiB1bmRlciB5b3VyIGFjY291bnQuXG4gICAgICogSWYgeW91IGRvIG5vdCBMb1JhV0FOIG5ldHdvcmsgY3JlZGVudGlhbHMsIHZpc2l0IHRoZSBuZXR3b3JrIG1hbmFnZW1lbnQgcGxhdGZvcm0gdG8gY3JlYXRlIHRoaW5ncyB0b2dldGhlci5cbiAgICAgKi9cbiAgICBwdWJsaWMgam9pblBlcm1pc3Npb25JZDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IG5ldFR5cGU6IE5ldHdvcmtpbmcgbW9kZS5cbiAgICAgKiBTZXQgdGhpcyBwYXJhbWV0ZXIgb25seSBpZiB5b3UgYXJlIGNyZWF0aW5nIGEgcHJvZHVjdCB3aG9zZSBkZXZpY2VzIGRpcmVjdGx5IGNvbm5lY3RcbiAgICAgKiB0byBJb1QgUGxhdGZvcm0uXG4gICAgICogT3B0aW9uczpcbiAgICAgKiBXSUZJXG4gICAgICogQ0VMTFVMQVJcbiAgICAgKiBFVEhFUk5FVFxuICAgICAqIE9USEVSXG4gICAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgV0lGSS5cbiAgICAgKi9cbiAgICBwdWJsaWMgbmV0VHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHByb3RvY29sVHlwZTogVGhlIHByb3RvY29sIHRoYXQgZGV2aWNlcyBvZiB0aGlzIHByb2R1Y3QgdXNlIHRvIGNvbm5lY3QgdG8gZ2F0ZXdheXMuXG4gICAgICogU2V0IHRoaXMgcGFyYW1ldGVyIG9ubHkgaWYgeW91IGFyZSBjcmVhdGluZyBhIHByb2R1Y3Qgd2hvc2UgZGV2aWNlcyB3aWxsIGJlIGNvbm5lY3RlZFxuICAgICAqIHRvIGdhdGV3YXlzLlxuICAgICAqIE9wdGlvbnM6XG4gICAgICogbW9kYnVzOiBNb2RidXMuXG4gICAgICogb3BjLXVhOiBPUEMgVUEuXG4gICAgICogY3VzdG9taXplOiBDdXN0b21pemVkIHByb3RvY29sLlxuICAgICAqIGJsZTogQkxFLlxuICAgICAqIHppZ2JlZTogWmlnQmVlLlxuICAgICAqL1xuICAgIHB1YmxpYyBwcm90b2NvbFR5cGU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwdWJsaXNoQXV0bzogV2hldGhlciB0byBhdXRvbWF0aWNhbGx5IG1vZGVsIHB1YmxpY2F0aW9uIGFmdGVyIHRoZSBwcm9kdWN0IGlzIGNyZWF0ZWQuXG4gICAgICogdHJ1ZTogcHVibGlzaGluZy5cbiAgICAgKiBmYWxzZTogbm90IHJlbGVhc2VkLlxuICAgICAqIFRoaXMgcGFyYW1ldGVyIGlzIG5vdCBwYXNzZWQsIHRoZSBkZWZhdWx0IHZhbHVlIHRydWUuXG4gICAgICovXG4gICAgcHVibGljIHB1Ymxpc2hBdXRvOiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHJlc291cmNlR3JvdXBJZDogUmVzb3VyY2UgZ3JvdXAgSUQgKGdyb3VwIElEIHRvIHZpZXcgdGhlIHJlc291cmNlIGluIHRoZSByZXNvdXJjZSBtYW5hZ2VtZW50IGNvbnNvbGUpLCBzcGVjaWZ5IHRoZSBwcm9kdWN0IGlzIGNsYXNzaWZpZWQgYXMgYSByZXNvdXJjZSBncm91cC5cbiAgICAgKiBJZiB0aGlzIHBhcmFtZXRlciBpcyBwYXNzZWQsIHRoZSBwcm9kdWN0IHdpbGwgYmUgY2xhc3NpZmllZCBhcyBhIGRlZmF1bHQgcmVzb3VyY2UgZ3JvdXAuXG4gICAgICovXG4gICAgcHVibGljIHJlc291cmNlR3JvdXBJZDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNjb3BlIC0gc2NvcGUgaW4gd2hpY2ggdGhpcyByZXNvdXJjZSBpcyBkZWZpbmVkXG4gICAgICogQHBhcmFtIGlkICAgIC0gc2NvcGVkIGlkIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBwcm9wcyAtIHJlc291cmNlIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY29wZTogcm9zLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFJvc1Byb2R1Y3RQcm9wcywgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pIHtcbiAgICAgICAgc3VwZXIoc2NvcGUsIGlkLCB7IHR5cGU6IFJvc1Byb2R1Y3QuUk9TX1JFU09VUkNFX1RZUEVfTkFNRSwgcHJvcGVydGllczogcHJvcHMgfSk7XG4gICAgICAgIHRoaXMuYXR0cklvdEluc3RhbmNlSWQgPSB0aGlzLmdldEF0dCgnSW90SW5zdGFuY2VJZCcpO1xuICAgICAgICB0aGlzLmF0dHJQcm9kdWN0S2V5ID0gdGhpcy5nZXRBdHQoJ1Byb2R1Y3RLZXknKTtcblxuICAgICAgICB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50ID0gZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ7XG4gICAgICAgIHRoaXMubm9kZVR5cGUgPSBwcm9wcy5ub2RlVHlwZTtcbiAgICAgICAgdGhpcy5wcm9kdWN0TmFtZSA9IHByb3BzLnByb2R1Y3ROYW1lO1xuICAgICAgICB0aGlzLmFsaXl1bkNvbW1vZGl0eUNvZGUgPSBwcm9wcy5hbGl5dW5Db21tb2RpdHlDb2RlO1xuICAgICAgICB0aGlzLmF1dGhUeXBlID0gcHJvcHMuYXV0aFR5cGU7XG4gICAgICAgIHRoaXMuY2F0ZWdvcnlLZXkgPSBwcm9wcy5jYXRlZ29yeUtleTtcbiAgICAgICAgdGhpcy5kYXRhRm9ybWF0ID0gcHJvcHMuZGF0YUZvcm1hdDtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHByb3BzLmRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmlkMiA9IHByb3BzLmlkMjtcbiAgICAgICAgdGhpcy5pb3RJbnN0YW5jZUlkID0gcHJvcHMuaW90SW5zdGFuY2VJZDtcbiAgICAgICAgdGhpcy5qb2luUGVybWlzc2lvbklkID0gcHJvcHMuam9pblBlcm1pc3Npb25JZDtcbiAgICAgICAgdGhpcy5uZXRUeXBlID0gcHJvcHMubmV0VHlwZTtcbiAgICAgICAgdGhpcy5wcm90b2NvbFR5cGUgPSBwcm9wcy5wcm90b2NvbFR5cGU7XG4gICAgICAgIHRoaXMucHVibGlzaEF1dG8gPSBwcm9wcy5wdWJsaXNoQXV0bztcbiAgICAgICAgdGhpcy5yZXNvdXJjZUdyb3VwSWQgPSBwcm9wcy5yZXNvdXJjZUdyb3VwSWQ7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbm9kZVR5cGU6IHRoaXMubm9kZVR5cGUsXG4gICAgICAgICAgICBwcm9kdWN0TmFtZTogdGhpcy5wcm9kdWN0TmFtZSxcbiAgICAgICAgICAgIGFsaXl1bkNvbW1vZGl0eUNvZGU6IHRoaXMuYWxpeXVuQ29tbW9kaXR5Q29kZSxcbiAgICAgICAgICAgIGF1dGhUeXBlOiB0aGlzLmF1dGhUeXBlLFxuICAgICAgICAgICAgY2F0ZWdvcnlLZXk6IHRoaXMuY2F0ZWdvcnlLZXksXG4gICAgICAgICAgICBkYXRhRm9ybWF0OiB0aGlzLmRhdGFGb3JtYXQsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGlkMjogdGhpcy5pZDIsXG4gICAgICAgICAgICBpb3RJbnN0YW5jZUlkOiB0aGlzLmlvdEluc3RhbmNlSWQsXG4gICAgICAgICAgICBqb2luUGVybWlzc2lvbklkOiB0aGlzLmpvaW5QZXJtaXNzaW9uSWQsXG4gICAgICAgICAgICBuZXRUeXBlOiB0aGlzLm5ldFR5cGUsXG4gICAgICAgICAgICBwcm90b2NvbFR5cGU6IHRoaXMucHJvdG9jb2xUeXBlLFxuICAgICAgICAgICAgcHVibGlzaEF1dG86IHRoaXMucHVibGlzaEF1dG8sXG4gICAgICAgICAgICByZXNvdXJjZUdyb3VwSWQ6IHRoaXMucmVzb3VyY2VHcm91cElkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgcmVuZGVyUHJvcGVydGllcyhwcm9wczoge1trZXk6IHN0cmluZ106IGFueX0pOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICB7XG4gICAgICAgIHJldHVybiByb3NQcm9kdWN0UHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BzLCB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50KTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvcGVydGllcyBmb3IgZGVmaW5pbmcgYSBgUm9zUHJvZHVjdFRvcGljYC5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWlvdC1wcm9kdWN0dG9waWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSb3NQcm9kdWN0VG9waWNQcm9wcyB7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgb3BlcmF0aW9uOiBPcGVyYXRpb24gcGVybWlzc2lvbnMgb2YgZGV2aWNlcyBvbiB0aGUgdG9waWMgY2F0ZWdvcnkuIFZhbHVlIG9wdGlvbnM6XG4gICAgICogU1VCOiBTdWJzY3JpYmUuIERldmljZXMgY2FuIHN1YnNjcmliZSB0byB0aGUgdG9waWNzIG9mIHRoaXMgY2F0ZWdvcnkuXG4gICAgICogUFVCOiBQdWJsaXNoLiBEZXZpY2VzIGNhbiBwdWJsaXNoIG1lc3NhZ2VzIHVzaW5nIHRoZSB0b3BpY3Mgb2YgdGhpcyBjYXRlZ29yeS5cbiAgICAgKiBBTEw6IFN1YnNjcmliZSBhbmQgcHVibGlzaC4gRGV2aWNlcyBjYW4gc3Vic2NyaWJlIHRvIGFuZCBwdWJsaXNoIG1lc3NhZ2VzIHRvIHRoZSB0b3BpY3Mgb2YgdGhpcyBjYXRlZ29yeS5cbiAgICAgKi9cbiAgICByZWFkb25seSBvcGVyYXRpb246IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwcm9kdWN0S2V5OiBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHByb2R1Y3QgZm9yIHdoaWNoIHlvdSB3YW50IHRvIGNyZWF0ZSBhIHRvcGljIGNhdGVnb3J5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHByb2R1Y3RLZXk6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSB0b3BpY1Nob3J0TmFtZTogVGhlIGN1c3RvbSBjYXRlZ29yeSBoaWVyYXJjaHkgaW4gdGhlIHRvcGljIGNhdGVnb3J5LiBCeSBkZWZhdWx0LCBhIHRvcGljIGNhdGVnb3J5IGNvbnRhaW5zIHR3byBzeXN0ZW0gZGVmaW5lZCBjYXRlZ29yeSBoaWVyYXJjaGllczogcHJvZHVjdEtleSBhbmQgJHtkZXZpY2VOYW1lfS4gRm9yd2FyZCBzbGFzaGVzIChcXC8pIGFyZSB1c2VkIHRvIGRlbGltaXQgdGhlIHRvcGljIGhpZXJhcmNoaWVzLiBUaGUgZm9ybWF0IG9mIGEgdG9waWMgY2F0ZWdvcnkgaXMgcHJvZHVjdEtleVxcLyR7ZGV2aWNlTmFtZX1cXC90b3BpY1Nob3J0TmFtZS5cbiAgICAgKiBOb3RlIFRoZSBuYW1lIG9mIGVhY2ggY2F0ZWdvcnkgaGllcmFyY2h5IGNhbiBjb250YWluIEVuZ2xpc2ggbGV0dGVycywgZGlnaXRzLCBhbmQgdW5kZXJzY29yZXMgKF8pLCBhbmQgY2Fubm90IGJlIGVtcHR5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHRvcGljU2hvcnROYW1lOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZGVzYzogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b3BpYyBjYXRlZ29yeS4gWW91IGNhbiBlbnRlciBhIGRlc2NyaXB0aW9uIHdpdGggdXAgdG8gMTAwIGNoYXJhY3RlcnMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgZGVzYz86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBpb3RJbnN0YW5jZUlkOiBJbnN0YW5jZSBJRCB5b3UgcHVyY2hhc2VkLiBQdWJsaWMgaW5zdGFuY2VzIGRvIG5vdCBuZWVkIHBhc3MgdGhpcyBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICByZWFkb25seSBpb3RJbnN0YW5jZUlkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xufVxuXG4vKipcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBnaXZlbiBwcm9wZXJ0aWVzIG1hdGNoIHRob3NlIG9mIGEgYFJvc1Byb2R1Y3RUb3BpY1Byb3BzYFxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NQcm9kdWN0VG9waWNQcm9wc2BcbiAqXG4gKiBAcmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSB2YWxpZGF0aW9uLlxuICovXG5mdW5jdGlvbiBSb3NQcm9kdWN0VG9waWNQcm9wc1ZhbGlkYXRvcihwcm9wZXJ0aWVzOiBhbnkpOiByb3MuVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcm9zLlZBTElEQVRJT05fU1VDQ0VTUzsgfVxuICAgIGNvbnN0IGVycm9ycyA9IG5ldyByb3MuVmFsaWRhdGlvblJlc3VsdHMoKTtcbiAgICBpZihwcm9wZXJ0aWVzLmRlc2MgJiYgKEFycmF5LmlzQXJyYXkocHJvcGVydGllcy5kZXNjKSB8fCAodHlwZW9mIHByb3BlcnRpZXMuZGVzYykgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2Rlc2MnLCByb3MudmFsaWRhdGVMZW5ndGgpKHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMuZGVzYy5sZW5ndGgsXG4gICAgICAgICAgICBtaW46IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG1heDogMTAwLFxuICAgICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdkZXNjJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmRlc2MpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2lvdEluc3RhbmNlSWQnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuaW90SW5zdGFuY2VJZCkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigndG9waWNTaG9ydE5hbWUnLCByb3MucmVxdWlyZWRWYWxpZGF0b3IpKHByb3BlcnRpZXMudG9waWNTaG9ydE5hbWUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3RvcGljU2hvcnROYW1lJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnRvcGljU2hvcnROYW1lKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdvcGVyYXRpb24nLCByb3MucmVxdWlyZWRWYWxpZGF0b3IpKHByb3BlcnRpZXMub3BlcmF0aW9uKSk7XG4gICAgaWYocHJvcGVydGllcy5vcGVyYXRpb24gJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLm9wZXJhdGlvbikgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignb3BlcmF0aW9uJywgcm9zLnZhbGlkYXRlQWxsb3dlZFZhbHVlcykoe1xuICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMub3BlcmF0aW9uLFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFtcIkFMTFwiLFwiUFVCXCIsXCJTVUJcIl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdvcGVyYXRpb24nLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMub3BlcmF0aW9uKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdwcm9kdWN0S2V5Jywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLnByb2R1Y3RLZXkpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3Byb2R1Y3RLZXknLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMucHJvZHVjdEtleSkpO1xuICAgIHJldHVybiBlcnJvcnMud3JhcCgnc3VwcGxpZWQgcHJvcGVydGllcyBub3QgY29ycmVjdCBmb3IgXCJSb3NQcm9kdWN0VG9waWNQcm9wc1wiJyk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgQWxpQ2xvdWQgUk9TIFJlc291cmNlIHByb3BlcnRpZXMgb2YgYW4gYEFMSVlVTjo6SU9UOjpQcm9kdWN0VG9waWNgIHJlc291cmNlXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc1Byb2R1Y3RUb3BpY1Byb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpJT1Q6OlByb2R1Y3RUb3BpY2AgcmVzb3VyY2UuXG4gKi9cbi8vIEB0cy1pZ25vcmUgVFM2MTMzXG5mdW5jdGlvbiByb3NQcm9kdWN0VG9waWNQcm9wc1RvUm9zVGVtcGxhdGUocHJvcGVydGllczogYW55LCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbik6IGFueSB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcHJvcGVydGllczsgfVxuICAgIGlmKGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50KSB7XG4gICAgICAgIFJvc1Byb2R1Y3RUb3BpY1Byb3BzVmFsaWRhdG9yKHByb3BlcnRpZXMpLmFzc2VydFN1Y2Nlc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICdPcGVyYXRpb24nOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLm9wZXJhdGlvbiksXG4gICAgICAnUHJvZHVjdEtleSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMucHJvZHVjdEtleSksXG4gICAgICAnVG9waWNTaG9ydE5hbWUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnRvcGljU2hvcnROYW1lKSxcbiAgICAgICdEZXNjJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5kZXNjKSxcbiAgICAgICdJb3RJbnN0YW5jZUlkJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5pb3RJbnN0YW5jZUlkKSxcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYSBiYXNlIGVuY2Fwc3VsYXRpb24gYXJvdW5kIHRoZSBST1MgcmVzb3VyY2UgdHlwZSBgQUxJWVVOOjpJT1Q6OlByb2R1Y3RUb3BpY2AuXG4gKiBATm90ZSBUaGlzIGNsYXNzIGRvZXMgbm90IGNvbnRhaW4gYWRkaXRpb25hbCBmdW5jdGlvbnMsIHNvIGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgYFByb2R1Y3RUb3BpY2AgY2xhc3MgaW5zdGVhZCBvZiB0aGlzIGNsYXNzIGZvciBhIG1vcmUgY29udmVuaWVudCBkZXZlbG9wbWVudCBleHBlcmllbmNlLlxuICogU2VlIGh0dHBzOi8vd3d3LmFsaWJhYmFjbG91ZC5jb20vaGVscC9yb3MvZGV2ZWxvcGVyLXJlZmVyZW5jZS9hbGl5dW4taW90LXByb2R1Y3R0b3BpY1xuICovXG5leHBvcnQgY2xhc3MgUm9zUHJvZHVjdFRvcGljIGV4dGVuZHMgcm9zLlJvc1Jlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzb3VyY2UgdHlwZSBuYW1lIGZvciB0aGlzIHJlc291cmNlIGNsYXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUk9TX1JFU09VUkNFX1RZUEVfTkFNRSA9IFwiQUxJWVVOOjpJT1Q6OlByb2R1Y3RUb3BpY1wiO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBUb3BpY0lkOiBUb3BpYyBJRFxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyVG9waWNJZDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgcHVibGljIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuO1xuXG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgb3BlcmF0aW9uOiBPcGVyYXRpb24gcGVybWlzc2lvbnMgb2YgZGV2aWNlcyBvbiB0aGUgdG9waWMgY2F0ZWdvcnkuIFZhbHVlIG9wdGlvbnM6XG4gICAgICogU1VCOiBTdWJzY3JpYmUuIERldmljZXMgY2FuIHN1YnNjcmliZSB0byB0aGUgdG9waWNzIG9mIHRoaXMgY2F0ZWdvcnkuXG4gICAgICogUFVCOiBQdWJsaXNoLiBEZXZpY2VzIGNhbiBwdWJsaXNoIG1lc3NhZ2VzIHVzaW5nIHRoZSB0b3BpY3Mgb2YgdGhpcyBjYXRlZ29yeS5cbiAgICAgKiBBTEw6IFN1YnNjcmliZSBhbmQgcHVibGlzaC4gRGV2aWNlcyBjYW4gc3Vic2NyaWJlIHRvIGFuZCBwdWJsaXNoIG1lc3NhZ2VzIHRvIHRoZSB0b3BpY3Mgb2YgdGhpcyBjYXRlZ29yeS5cbiAgICAgKi9cbiAgICBwdWJsaWMgb3BlcmF0aW9uOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcHJvZHVjdEtleTogVGhlIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoZSBwcm9kdWN0IGZvciB3aGljaCB5b3Ugd2FudCB0byBjcmVhdGUgYSB0b3BpYyBjYXRlZ29yeS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHJvZHVjdEtleTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHRvcGljU2hvcnROYW1lOiBUaGUgY3VzdG9tIGNhdGVnb3J5IGhpZXJhcmNoeSBpbiB0aGUgdG9waWMgY2F0ZWdvcnkuIEJ5IGRlZmF1bHQsIGEgdG9waWMgY2F0ZWdvcnkgY29udGFpbnMgdHdvIHN5c3RlbSBkZWZpbmVkIGNhdGVnb3J5IGhpZXJhcmNoaWVzOiBwcm9kdWN0S2V5IGFuZCAke2RldmljZU5hbWV9LiBGb3J3YXJkIHNsYXNoZXMgKFxcLykgYXJlIHVzZWQgdG8gZGVsaW1pdCB0aGUgdG9waWMgaGllcmFyY2hpZXMuIFRoZSBmb3JtYXQgb2YgYSB0b3BpYyBjYXRlZ29yeSBpcyBwcm9kdWN0S2V5XFwvJHtkZXZpY2VOYW1lfVxcL3RvcGljU2hvcnROYW1lLlxuICAgICAqIE5vdGUgVGhlIG5hbWUgb2YgZWFjaCBjYXRlZ29yeSBoaWVyYXJjaHkgY2FuIGNvbnRhaW4gRW5nbGlzaCBsZXR0ZXJzLCBkaWdpdHMsIGFuZCB1bmRlcnNjb3JlcyAoXyksIGFuZCBjYW5ub3QgYmUgZW1wdHkuXG4gICAgICovXG4gICAgcHVibGljIHRvcGljU2hvcnROYW1lOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZGVzYzogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b3BpYyBjYXRlZ29yeS4gWW91IGNhbiBlbnRlciBhIGRlc2NyaXB0aW9uIHdpdGggdXAgdG8gMTAwIGNoYXJhY3RlcnMuXG4gICAgICovXG4gICAgcHVibGljIGRlc2M6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBpb3RJbnN0YW5jZUlkOiBJbnN0YW5jZSBJRCB5b3UgcHVyY2hhc2VkLiBQdWJsaWMgaW5zdGFuY2VzIGRvIG5vdCBuZWVkIHBhc3MgdGhpcyBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBwdWJsaWMgaW90SW5zdGFuY2VJZDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNjb3BlIC0gc2NvcGUgaW4gd2hpY2ggdGhpcyByZXNvdXJjZSBpcyBkZWZpbmVkXG4gICAgICogQHBhcmFtIGlkICAgIC0gc2NvcGVkIGlkIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBwcm9wcyAtIHJlc291cmNlIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY29wZTogcm9zLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFJvc1Byb2R1Y3RUb3BpY1Byb3BzLCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbikge1xuICAgICAgICBzdXBlcihzY29wZSwgaWQsIHsgdHlwZTogUm9zUHJvZHVjdFRvcGljLlJPU19SRVNPVVJDRV9UWVBFX05BTUUsIHByb3BlcnRpZXM6IHByb3BzIH0pO1xuICAgICAgICB0aGlzLmF0dHJUb3BpY0lkID0gdGhpcy5nZXRBdHQoJ1RvcGljSWQnKTtcblxuICAgICAgICB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50ID0gZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ7XG4gICAgICAgIHRoaXMub3BlcmF0aW9uID0gcHJvcHMub3BlcmF0aW9uO1xuICAgICAgICB0aGlzLnByb2R1Y3RLZXkgPSBwcm9wcy5wcm9kdWN0S2V5O1xuICAgICAgICB0aGlzLnRvcGljU2hvcnROYW1lID0gcHJvcHMudG9waWNTaG9ydE5hbWU7XG4gICAgICAgIHRoaXMuZGVzYyA9IHByb3BzLmRlc2M7XG4gICAgICAgIHRoaXMuaW90SW5zdGFuY2VJZCA9IHByb3BzLmlvdEluc3RhbmNlSWQ7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3BlcmF0aW9uOiB0aGlzLm9wZXJhdGlvbixcbiAgICAgICAgICAgIHByb2R1Y3RLZXk6IHRoaXMucHJvZHVjdEtleSxcbiAgICAgICAgICAgIHRvcGljU2hvcnROYW1lOiB0aGlzLnRvcGljU2hvcnROYW1lLFxuICAgICAgICAgICAgZGVzYzogdGhpcy5kZXNjLFxuICAgICAgICAgICAgaW90SW5zdGFuY2VJZDogdGhpcy5pb3RJbnN0YW5jZUlkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgcmVuZGVyUHJvcGVydGllcyhwcm9wczoge1trZXk6IHN0cmluZ106IGFueX0pOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICB7XG4gICAgICAgIHJldHVybiByb3NQcm9kdWN0VG9waWNQcm9wc1RvUm9zVGVtcGxhdGUocHJvcHMsIHRoaXMuZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm9wZXJ0aWVzIGZvciBkZWZpbmluZyBhIGBSb3NSdWxlYC5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWlvdC1ydWxlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUm9zUnVsZVByb3BzIHtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBuYW1lOiBUaGUgbmFtZSBvZiB0aGUgcnVsZS4gVGhlIG5hbWUgbXVzdCBiZSAxIHRvIDMwIGNoYXJhY3RlcnMgaW4gbGVuZ3RoIGFuZCBjYW4gY29udGFpblxuICAgICAqIEVuZ2xpc2ggbGV0dGVycywgZGlnaXRzLCB1bmRlcnNjb3JlcyAoXyksIGFuZCBoeXBoZW5zICgtKS4gQ2hpbmVzZSBsYW5ndWFnZSBpcyBhbHNvXG4gICAgICogc3VwcG9ydGVkLiBFYWNoIENoaW5lc2Ugc3ltYm9sIG9jY3VwaWVzIDIgY2hhcmFjdGVycy5cbiAgICAgKi9cbiAgICByZWFkb25seSBuYW1lOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZGF0YVR5cGU6IFRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgdG8gYmUgcHJvY2Vzc2VkIGJ5IHRoZSBydWxlLiBZb3UgbXVzdCBzcGVjaWZ5IHRoZSBmb3JtYXQgb2ZcbiAgICAgKiBkZXZpY2UgZGF0YSB0byBiZSBwcm9jZXNzZWQgZm9yIHRoaXMgcGFyYW1ldGVyLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogSlNPTjogSlNPTiBkYXRhXG4gICAgICogQklOQVJZOiBiaW5hcnkgZGF0YVxuICAgICAqIE5vdGUgSWYgeW91IHNwZWNpZnlCSU5BUlksIHlvdSBjYW5ub3Qgc2V0IHRoZSBUb3BpY1R5cGUgcGFyYW1ldGVyIHRvIDAgYW5kIGZvcndhcmQgZGF0YSB0byBUYWJsZSBTdG9yZSwgVGltZSBTZXJpZXMgRGF0YWJhc2UgKFRTREIpLCBvciBBcHNhcmFkREJcbiAgICAgKiBmb3IgUkRTLlxuICAgICAqIERlZmF1bHQgdmFsdWU6IEpTT04uXG4gICAgICovXG4gICAgcmVhZG9ubHkgZGF0YVR5cGU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgaW90SW5zdGFuY2VJZDogVGhlIElEIG9mIHRoZSBpbnN0YW5jZS4gVGhpcyBwYXJhbWV0ZXIgaXMgbm90IHJlcXVpcmVkIGZvciBwdWJsaWMgaW5zdGFuY2VzLiBIb3dldmVyLFxuICAgICAqIHRoZSBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgZm9yIHRoZSBpbnN0YW5jZXMgdGhhdCB5b3UgaGF2ZSBwdXJjaGFzZWQuXG4gICAgICovXG4gICAgcmVhZG9ubHkgaW90SW5zdGFuY2VJZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwcm9kdWN0S2V5OiBUaGUgUHJvZHVjdEtleSBvZiB0aGUgcHJvZHVjdCB0byB3aGljaCB0aGUgcnVsZSBhcHBsaWVzLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHByb2R1Y3RLZXk/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcmVzb3VyY2VHcm91cElkOiBUaGUgSUQgb2YgdGhlIHJlc291cmNlIGdyb3VwIHRvIHdoaWNoIHRoZSBydWxlIGlzIGFzc2lnbmVkLiBZb3UgY2FuIHZpZXcgdGhlIHJlc291cmNlXG4gICAgICogZ3JvdXAgaW5mb3JtYXRpb24gaW4gdGhlIFJlc291cmNlIE1hbmFnZW1lbnQgY29uc29sZS5cbiAgICAgKiBJZiB5b3UgZG8gbm90IHNwZWNpZnkgdGhpcyBwYXJhbWV0ZXIsIHRoZSBydWxlIGlzIGFzc2lnbmVkIHRvIHRoZSBkZWZhdWx0IHJlc291cmNlXG4gICAgICogZ3JvdXAuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcmVzb3VyY2VHcm91cElkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHJ1bGVBY3Rpb246XG4gICAgICovXG4gICAgcmVhZG9ubHkgcnVsZUFjdGlvbj86IEFycmF5PFJvc1J1bGUuUnVsZUFjdGlvblByb3BlcnR5IHwgcm9zLklSZXNvbHZhYmxlPiB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBydWxlRGVzYzogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBydWxlLiBUaGUgZGVzY3JpcHRpb24gY2FuIGJlIHVwIHRvIDEwMCBjaGFyYWN0ZXJzIGluIGxlbmd0aC5cbiAgICAgKiBFYWNoIENoaW5lc2Ugc3ltYm9sIG9jY3VwaWVzIDEgY2hhcmFjdGVycy5cbiAgICAgKi9cbiAgICByZWFkb25seSBydWxlRGVzYz86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBzZWxlY3Q6IFRoZSBTUUwgU0VMRUNUIHN0YXRlbWVudCB0aGF0IHlvdSB3YW50IHRvIGV4ZWN1dGUuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVTUUwgZXhwcmVzc2lvbnMuXG4gICAgICogTm90ZSBTcGVjaWZ5IHRoZSBmaWVsZHMgdGhhdCBmb2xsb3cgdGhlIFNlbGVjdCBrZXl3b3JkIGZvciB0aGlzIHBhcmFtZXRlci4gRm9yIGV4YW1wbGUsIGlmIHRoZSBTZWxlY3Qgc3RhdGVtZW50IGlzIFNlbGVjdCBhLGIsYywgc3BlY2lmeSBhLGIsYyBmb3IgdGhpcyBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgcmVhZG9ubHkgc2VsZWN0Pzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHNob3J0VG9waWM6IFRoZSB0b3BpYyB0byB3aGljaCB0aGlzIHJ1bGUgaXMgYXBwbGllZC4gU3ludGF4OiAke2RldmljZU5hbWV9XFwvdG9waWNTaG9ydE5hbWUuICR7ZGV2aWNlTmFtZX1zcGVjaWZpZXMgdGhlIG5hbWUgb2YgdGhlIGRldmljZSwgYW5kIHRvcGljU2hvcnROYW1lc3BlY2lmaWVzIHRoZSBjdXN0b20gbmFtZSBvZiB0aGUgdG9waWMuXG4gICAgICogQmFzaWMgY29tbXVuaWNhdGlvbiB0b3BpY3Mgb3IgVGhpbmcgU3BlY2lmaWNhdGlvbiBMYW5ndWFnZSAoVFNMKS1iYXNlZCBjb21tdW5pY2F0aW9uXG4gICAgICogdG9waWNzLiBTeW50YXg6ICR7ZGV2aWNlTmFtZX1cXC90b3BpY1Nob3J0TmFtZS4gWW91IGNhbiByZXBsYWNlICR7ZGV2aWNlTmFtZX0gd2l0aCB0aGUgKyB3aWxkY2FyZC4gVGhlIHdpbGRjYXJkIGluZGljYXRlcyB0aGF0IHRoZSB0b3BpYyBhcHBsaWVzIHRvIGFsbCBkZXZpY2VzIHVuZGVyIHRoZVxuICAgICAqIHByb2R1Y3QuIFZhbGlkIHZhbHVlcyBvZiB0b3BpY1Nob3J0TmFtZTpcbiAgICAgKiBcXC90aGluZ1xcL2V2ZW50XFwvcHJvcGVydHlcXC9wb3N0OiBzdWJtaXRzIHRoZSBwcm9wZXJ0eSBkYXRhIG9mIGEgZGV2aWNlLlxuICAgICAqIFxcL3RoaW5nXFwvZXZlbnRcXC8ke3RzbC5ldmVudC5pZGVudGlmaWVyfVxcL3Bvc3Q6IHN1Ym1pdHMgdGhlIGV2ZW50IGRhdGEgb2YgYSBkZXZpY2UuJHt0c2wuZXZlbnQuaWRlbnRpZmllcn0gc3BlY2lmaWVzIHRoZSBpZGVudGlmaWVyIG9mIGFuIGV2ZW50IGluIHRoZSBUU0wuXG4gICAgICogXFwvdGhpbmdcXC9saWZlY3ljbGU6IHN1Ym1pdHMgZGV2aWNlIGxpZmVjeWNsZSBjaGFuZ2VzLlxuICAgICAqIFxcL3RoaW5nXFwvZG93bmxpbmtcXC9yZXBseVxcL21lc3NhZ2U6IHNlbmRzIGEgcmVzcG9uc2UgdG8gYSByZXF1ZXN0IGZyb20gSW9UIFBsYXRmb3JtLlxuICAgICAqIFxcL3RoaW5nXFwvbGlzdFxcL2ZvdW5kOiBzdWJtaXRzIHRoZSBkYXRhIHdoZW4gYSBnYXRld2F5IGRldGVjdHMgYSBuZXcgc3ViLWRldmljZS5cbiAgICAgKiBcXC90aGluZ1xcL3RvcG9cXC9saWZlY3ljbGU6IHN1Ym1pdHMgZGV2aWNlIHRvcG9sb2d5IGNoYW5nZXMuXG4gICAgICogXFwvdGhpbmdcXC9ldmVudFxcL3Byb3BlcnR5XFwvaGlzdG9yeVxcL3Bvc3Q6IHN1Ym1pdHMgaGlzdG9yaWNhbCBwcm9wZXJ0eSBkYXRhIG9mIGEgZGV2aWNlLlxuICAgICAqIFxcL3RoaW5nXFwvZXZlbnRcXC8ke3RzbC5ldmVudC5pZGVudGlmaWVyfVxcL3Bvc3Q6IHN1Ym1pdHMgdGhlIGhpc3RvcmljYWwgZXZlbnQgZGF0YSBvZiBhIGRldmljZS4ke3RzbC5ldmVudC5pZGVudGlmaWVyfXNwZWNpZmllcyB0aGUgaWRlbnRpZmllciBvZiBhbiBldmVudCBpbiB0aGUgVFNMLlxuICAgICAqIFxcL290YVxcL3VwZ3JhZGU6IHN1Ym1pdHMgT1RBIHVwZGF0ZSBzdGF0dXMuXG4gICAgICogXFwvb3RhXFwvdmVyc2lvblxcL3Bvc3Q6IHN1Ym1pdHMgT1RBIG1vZHVsZSB2ZXJzaW9ucy5cbiAgICAgKiBcXC90aGluZ1xcL2RldmljZWluZm9cXC91cGRhdGU6IHN1Ym1pdHMgZGV2aWNlIHRhZyBjaGFuZ2VzLlxuICAgICAqIFxcL2VkZ2VcXC9kcml2ZXJcXC8ke2RyaXZlcl9pZH1cXC9wb2ludF9wb3N0OiBzdWJtaXRzIHBhc3MtdGhyb3VnaCBkYXRhIGZyb20gTGluayBJb1QgRWRnZS4ke2RyaXZlcl9pZH0gc3BlY2lmaWVzIHRoZSBJRCBvZiB0aGUgZHJpdmVyIHRoYXQgYSBkZXZpY2UgdXNlcyB0byBhY2Nlc3MgTGluayBJb1QgRWRnZS5cbiAgICAgKiAke3BhY2thZ2VJZH1cXC8ke2pvYklkfVxcL290YVxcL2pvYlxcL3N0YXR1czogc3VibWl0cyB0aGUgc3RhdHVzIG9mIE9UQSB1cGRhdGUgYmF0Y2hlcy4gVGhpcyB0b3BpYyBpcyBhIGJhc2ljIGNvbW11bmljYXRpb24gdG9waWMuXG4gICAgICogJHtwYWNrYWdlSWR9c3BlY2lmaWVzIHRoZSBJRCBvZiB0aGUgZmlybXdhcmUuICR7am9iSWR9c3BlY2lmaWVzIHRoZSBJRCBvZiB0aGUgdXBkYXRlIGJhdGNoLlxuICAgICAqIEN1c3RvbSB0b3BpY3MuIEV4YW1wbGU6JHtkZXZpY2VOYW1lfVxcL3VzZXJcXC9nZXQuXG4gICAgICogWW91IGNhbiBjYWxsIHRoZVF1ZXJ5UHJvZHVjdFRvcGljb3BlcmF0aW9uIHRvIHZpZXcgYWxsIGN1c3RvbSB0b3BpY3Mgb2YgdGhlIHByb2R1Y3QuXG4gICAgICogV2hlbiB5b3Ugc3BlY2lmeSBhIGN1c3RvbSB0b3BpYywgeW91IGNhbiB1c2UgdGhlICsgYW5kICMgd2lsZGNhcmRzLlxuICAgICAqIFlvdSBjYW4gcmVwbGFjZSAke2RldmljZU5hbWV9IHdpdGggdGhlKyB3aWxkY2FyZC4gVGhlIHdpbGRjYXJkIGluZGljYXRlcyB0aGF0IHRoZSB0b3BpYyBhcHBsaWVzIHRvIGFsbCBkZXZpY2VzIHVuZGVyIHRoZVxuICAgICAqIHByb2R1Y3QuXG4gICAgICogWW91IGNhbiByZXBsYWNlIHRoZSBmaWVsZHMgdGhhdCBmb2xsb3cgJHtkZXZpY2VOYW1lfSB3aXRoIFxcL3VzZXJcXC8jLiBUaGUgIyB3aWxkY2FyZCBpbmRpY2F0ZXMgdGhhdCB0aGUgdG9waWMgYXBwbGllcyB3aGF0ZXZlciB2YWx1ZXMgYXJlIHNwZWNpZmllZCBmb3IgdGhlIGZpZWxkcyB0aGF0XG4gICAgICogZm9sbG93XFwvdXNlci5cbiAgICAgKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBob3cgdG8gdXNlIHdpbGRjYXJkcywgc2VlIFdpbGRjYXJkcyBpbiB0b3BpY3MuXG4gICAgICogVG9waWMgdGhhdCBpcyB1c2VkIHRvIHN1Ym1pdCBkZXZpY2Ugc3RhdHVzIGNoYW5nZXM6ICR7ZGV2aWNlTmFtZX0uXG4gICAgICogWW91IGNhbiB1c2UgdGhlK3dpbGRjYXJkLiBJbiB0aGlzIGNhc2UsIHRoZSBzdGF0dXMgY2hhbmdlcyBvZiBhbGwgZGV2aWNlcyB1bmRlciB0aGUgcHJvZHVjdCBhcmUgc3VibWl0dGVkLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHNob3J0VG9waWM/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgc3RhcnRSdWxlOiBTdGFydCB0aGUgcnVsZS4gVGhlIHJ1bGUgYXQgbGVhc3QgY29udGFpbnMgb25lIHJ1bGUgYWN0aW9uIHdpdGggbm9ybWFsIGRhdGEgZm9yd2FyZC5cbiAgICAgKi9cbiAgICByZWFkb25seSBzdGFydFJ1bGU/OiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHRvcGljVHlwZTogMDogVGhlIHRvcGljIGlzIGEgYmFzaWMgY29tbXVuaWNhdGlvbiB0b3BpYyBvciBUU0wtYmFzZWQgY29tbXVuaWNhdGlvbiB0b3BpYy5cbiAgICAgKiAxOiBUaGUgdG9waWMgaXMgYSBjdXN0b20gdG9waWMuXG4gICAgICogMjogVGhlIHRvcGljIGlzIHVzZWQgdG8gc3VibWl0IGRldmljZSBzdGF0dXMgY2hhbmdlcy4gU3ludGF4OiBcXC9hc1xcL21xdHRcXC9zdGF0dXNcXC8ke3Byb2R1Y3RLZXl9XFwvJHtkZXZpY2VOYW1lfS5cbiAgICAgKi9cbiAgICByZWFkb25seSB0b3BpY1R5cGU/OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgd2hlcmU6IFRoZSBjb25kaXRpb24gdGhhdCBpcyB1c2VkIHRvIHRyaWdnZXIgdGhlIHJ1bGUuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVTUUwgZXhwcmVzc2lvbnMuXG4gICAgICogTm90ZSBTcGVjaWZ5IHRoZSBmaWVsZHMgdGhhdCBmb2xsb3cgdGhlV2hlcmVrZXl3b3JkIGZvciB0aGlzIHBhcmFtZXRlci4gRm9yIGV4YW1wbGUsIGlmIHRoZSBXaGVyZSBzdGF0ZW1lbnQgaXMgV2hlcmUgYT4xMCwgc3BlY2lmeSBhPjEwIGZvciB0aGlzIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICByZWFkb25seSB3aGVyZT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgZ2l2ZW4gcHJvcGVydGllcyBtYXRjaCB0aG9zZSBvZiBhIGBSb3NSdWxlUHJvcHNgXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc1J1bGVQcm9wc2BcbiAqXG4gKiBAcmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSB2YWxpZGF0aW9uLlxuICovXG5mdW5jdGlvbiBSb3NSdWxlUHJvcHNWYWxpZGF0b3IocHJvcGVydGllczogYW55KTogcm9zLlZhbGlkYXRpb25SZXN1bHQge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHJvcy5WQUxJREFUSU9OX1NVQ0NFU1M7IH1cbiAgICBjb25zdCBlcnJvcnMgPSBuZXcgcm9zLlZhbGlkYXRpb25SZXN1bHRzKCk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd0b3BpY1R5cGUnLCByb3MudmFsaWRhdGVOdW1iZXIpKHByb3BlcnRpZXMudG9waWNUeXBlKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdpb3RJbnN0YW5jZUlkJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmlvdEluc3RhbmNlSWQpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3Jlc291cmNlR3JvdXBJZCcsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5yZXNvdXJjZUdyb3VwSWQpKTtcbiAgICBpZihwcm9wZXJ0aWVzLnJ1bGVBY3Rpb24gJiYgKEFycmF5LmlzQXJyYXkocHJvcGVydGllcy5ydWxlQWN0aW9uKSB8fCAodHlwZW9mIHByb3BlcnRpZXMucnVsZUFjdGlvbikgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3J1bGVBY3Rpb24nLCByb3MudmFsaWRhdGVMZW5ndGgpKHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMucnVsZUFjdGlvbi5sZW5ndGgsXG4gICAgICAgICAgICBtaW46IDEsXG4gICAgICAgICAgICBtYXg6IDEwLFxuICAgICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdydWxlQWN0aW9uJywgcm9zLmxpc3RWYWxpZGF0b3IoUm9zUnVsZV9SdWxlQWN0aW9uUHJvcGVydHlWYWxpZGF0b3IpKShwcm9wZXJ0aWVzLnJ1bGVBY3Rpb24pKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3Nob3J0VG9waWMnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuc2hvcnRUb3BpYykpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignc2VsZWN0Jywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnNlbGVjdCkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignc3RhcnRSdWxlJywgcm9zLnZhbGlkYXRlQm9vbGVhbikocHJvcGVydGllcy5zdGFydFJ1bGUpKTtcbiAgICBpZihwcm9wZXJ0aWVzLmRhdGFUeXBlICYmICh0eXBlb2YgcHJvcGVydGllcy5kYXRhVHlwZSkgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZGF0YVR5cGUnLCByb3MudmFsaWRhdGVBbGxvd2VkVmFsdWVzKSh7XG4gICAgICAgICAgZGF0YTogcHJvcGVydGllcy5kYXRhVHlwZSxcbiAgICAgICAgICBhbGxvd2VkVmFsdWVzOiBbXCJCSU5BUllcIixcIkpTT05cIl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdkYXRhVHlwZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5kYXRhVHlwZSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncnVsZURlc2MnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMucnVsZURlc2MpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3doZXJlJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLndoZXJlKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdwcm9kdWN0S2V5Jywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnByb2R1Y3RLZXkpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ25hbWUnLCByb3MucmVxdWlyZWRWYWxpZGF0b3IpKHByb3BlcnRpZXMubmFtZSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignbmFtZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5uYW1lKSk7XG4gICAgcmV0dXJuIGVycm9ycy53cmFwKCdzdXBwbGllZCBwcm9wZXJ0aWVzIG5vdCBjb3JyZWN0IGZvciBcIlJvc1J1bGVQcm9wc1wiJyk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgQWxpQ2xvdWQgUk9TIFJlc291cmNlIHByb3BlcnRpZXMgb2YgYW4gYEFMSVlVTjo6SU9UOjpSdWxlYCByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NSdWxlUHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OklPVDo6UnVsZWAgcmVzb3VyY2UuXG4gKi9cbi8vIEB0cy1pZ25vcmUgVFM2MTMzXG5mdW5jdGlvbiByb3NSdWxlUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXM6IGFueSwgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pOiBhbnkge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHByb3BlcnRpZXM7IH1cbiAgICBpZihlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCkge1xuICAgICAgICBSb3NSdWxlUHJvcHNWYWxpZGF0b3IocHJvcGVydGllcykuYXNzZXJ0U3VjY2VzcygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ05hbWUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLm5hbWUpLFxuICAgICAgJ0RhdGFUeXBlJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5kYXRhVHlwZSksXG4gICAgICAnSW90SW5zdGFuY2VJZCc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuaW90SW5zdGFuY2VJZCksXG4gICAgICAnUHJvZHVjdEtleSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMucHJvZHVjdEtleSksXG4gICAgICAnUmVzb3VyY2VHcm91cElkJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5yZXNvdXJjZUdyb3VwSWQpLFxuICAgICAgJ1J1bGVBY3Rpb24nOiByb3MubGlzdE1hcHBlcihyb3NSdWxlUnVsZUFjdGlvblByb3BlcnR5VG9Sb3NUZW1wbGF0ZSkocHJvcGVydGllcy5ydWxlQWN0aW9uKSxcbiAgICAgICdSdWxlRGVzYyc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMucnVsZURlc2MpLFxuICAgICAgJ1NlbGVjdCc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuc2VsZWN0KSxcbiAgICAgICdTaG9ydFRvcGljJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5zaG9ydFRvcGljKSxcbiAgICAgICdTdGFydFJ1bGUnOiByb3MuYm9vbGVhblRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5zdGFydFJ1bGUpLFxuICAgICAgJ1RvcGljVHlwZSc6IHJvcy5udW1iZXJUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMudG9waWNUeXBlKSxcbiAgICAgICdXaGVyZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMud2hlcmUpLFxuICAgIH07XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyBhIGJhc2UgZW5jYXBzdWxhdGlvbiBhcm91bmQgdGhlIFJPUyByZXNvdXJjZSB0eXBlIGBBTElZVU46OklPVDo6UnVsZWAsIHdoaWNoIGlzIHVzZWQgdG8gY3JlYXRlIGEgcnVsZSBmb3IgYSBzcGVjaWZpYyB0b3BpYy5cbiAqIEBOb3RlIFRoaXMgY2xhc3MgZG9lcyBub3QgY29udGFpbiBhZGRpdGlvbmFsIGZ1bmN0aW9ucywgc28gaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBgUnVsZWAgY2xhc3MgaW5zdGVhZCBvZiB0aGlzIGNsYXNzIGZvciBhIG1vcmUgY29udmVuaWVudCBkZXZlbG9wbWVudCBleHBlcmllbmNlLlxuICogU2VlIGh0dHBzOi8vd3d3LmFsaWJhYmFjbG91ZC5jb20vaGVscC9yb3MvZGV2ZWxvcGVyLXJlZmVyZW5jZS9hbGl5dW4taW90LXJ1bGVcbiAqL1xuZXhwb3J0IGNsYXNzIFJvc1J1bGUgZXh0ZW5kcyByb3MuUm9zUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZXNvdXJjZSB0eXBlIG5hbWUgZm9yIHRoaXMgcmVzb3VyY2UgY2xhc3MuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1NfUkVTT1VSQ0VfVFlQRV9OQU1FID0gXCJBTElZVU46OklPVDo6UnVsZVwiO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBBY3Rpb25JZDogVGhlIElEIG9mIHRoZSBydWxlIGFjdGlvbi5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0ckFjdGlvbklkOiByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIFJ1bGVJZDogVGhlIElEIG9mIHRoZSBydWxlLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyUnVsZUlkOiByb3MuSVJlc29sdmFibGU7XG5cbiAgICBwdWJsaWMgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW47XG5cblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBuYW1lOiBUaGUgbmFtZSBvZiB0aGUgcnVsZS4gVGhlIG5hbWUgbXVzdCBiZSAxIHRvIDMwIGNoYXJhY3RlcnMgaW4gbGVuZ3RoIGFuZCBjYW4gY29udGFpblxuICAgICAqIEVuZ2xpc2ggbGV0dGVycywgZGlnaXRzLCB1bmRlcnNjb3JlcyAoXyksIGFuZCBoeXBoZW5zICgtKS4gQ2hpbmVzZSBsYW5ndWFnZSBpcyBhbHNvXG4gICAgICogc3VwcG9ydGVkLiBFYWNoIENoaW5lc2Ugc3ltYm9sIG9jY3VwaWVzIDIgY2hhcmFjdGVycy5cbiAgICAgKi9cbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGRhdGFUeXBlOiBUaGUgZm9ybWF0IG9mIHRoZSBkYXRhIHRvIGJlIHByb2Nlc3NlZCBieSB0aGUgcnVsZS4gWW91IG11c3Qgc3BlY2lmeSB0aGUgZm9ybWF0IG9mXG4gICAgICogZGV2aWNlIGRhdGEgdG8gYmUgcHJvY2Vzc2VkIGZvciB0aGlzIHBhcmFtZXRlci4gVmFsaWQgdmFsdWVzOlxuICAgICAqIEpTT046IEpTT04gZGF0YVxuICAgICAqIEJJTkFSWTogYmluYXJ5IGRhdGFcbiAgICAgKiBOb3RlIElmIHlvdSBzcGVjaWZ5QklOQVJZLCB5b3UgY2Fubm90IHNldCB0aGUgVG9waWNUeXBlIHBhcmFtZXRlciB0byAwIGFuZCBmb3J3YXJkIGRhdGEgdG8gVGFibGUgU3RvcmUsIFRpbWUgU2VyaWVzIERhdGFiYXNlIChUU0RCKSwgb3IgQXBzYXJhZERCXG4gICAgICogZm9yIFJEUy5cbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBKU09OLlxuICAgICAqL1xuICAgIHB1YmxpYyBkYXRhVHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGlvdEluc3RhbmNlSWQ6IFRoZSBJRCBvZiB0aGUgaW5zdGFuY2UuIFRoaXMgcGFyYW1ldGVyIGlzIG5vdCByZXF1aXJlZCBmb3IgcHVibGljIGluc3RhbmNlcy4gSG93ZXZlcixcbiAgICAgKiB0aGUgcGFyYW1ldGVyIGlzIHJlcXVpcmVkIGZvciB0aGUgaW5zdGFuY2VzIHRoYXQgeW91IGhhdmUgcHVyY2hhc2VkLlxuICAgICAqL1xuICAgIHB1YmxpYyBpb3RJbnN0YW5jZUlkOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcHJvZHVjdEtleTogVGhlIFByb2R1Y3RLZXkgb2YgdGhlIHByb2R1Y3QgdG8gd2hpY2ggdGhlIHJ1bGUgYXBwbGllcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcHJvZHVjdEtleTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHJlc291cmNlR3JvdXBJZDogVGhlIElEIG9mIHRoZSByZXNvdXJjZSBncm91cCB0byB3aGljaCB0aGUgcnVsZSBpcyBhc3NpZ25lZC4gWW91IGNhbiB2aWV3IHRoZSByZXNvdXJjZVxuICAgICAqIGdyb3VwIGluZm9ybWF0aW9uIGluIHRoZSBSZXNvdXJjZSBNYW5hZ2VtZW50IGNvbnNvbGUuXG4gICAgICogSWYgeW91IGRvIG5vdCBzcGVjaWZ5IHRoaXMgcGFyYW1ldGVyLCB0aGUgcnVsZSBpcyBhc3NpZ25lZCB0byB0aGUgZGVmYXVsdCByZXNvdXJjZVxuICAgICAqIGdyb3VwLlxuICAgICAqL1xuICAgIHB1YmxpYyByZXNvdXJjZUdyb3VwSWQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBydWxlQWN0aW9uOlxuICAgICAqL1xuICAgIHB1YmxpYyBydWxlQWN0aW9uOiBBcnJheTxSb3NSdWxlLlJ1bGVBY3Rpb25Qcm9wZXJ0eSB8IHJvcy5JUmVzb2x2YWJsZT4gfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcnVsZURlc2M6IFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgcnVsZS4gVGhlIGRlc2NyaXB0aW9uIGNhbiBiZSB1cCB0byAxMDAgY2hhcmFjdGVycyBpbiBsZW5ndGguXG4gICAgICogRWFjaCBDaGluZXNlIHN5bWJvbCBvY2N1cGllcyAxIGNoYXJhY3RlcnMuXG4gICAgICovXG4gICAgcHVibGljIHJ1bGVEZXNjOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgc2VsZWN0OiBUaGUgU1FMIFNFTEVDVCBzdGF0ZW1lbnQgdGhhdCB5b3Ugd2FudCB0byBleGVjdXRlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlU1FMIGV4cHJlc3Npb25zLlxuICAgICAqIE5vdGUgU3BlY2lmeSB0aGUgZmllbGRzIHRoYXQgZm9sbG93IHRoZSBTZWxlY3Qga2V5d29yZCBmb3IgdGhpcyBwYXJhbWV0ZXIuIEZvciBleGFtcGxlLCBpZiB0aGUgU2VsZWN0IHN0YXRlbWVudCBpcyBTZWxlY3QgYSxiLGMsIHNwZWNpZnkgYSxiLGMgZm9yIHRoaXMgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIHB1YmxpYyBzZWxlY3Q6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBzaG9ydFRvcGljOiBUaGUgdG9waWMgdG8gd2hpY2ggdGhpcyBydWxlIGlzIGFwcGxpZWQuIFN5bnRheDogJHtkZXZpY2VOYW1lfVxcL3RvcGljU2hvcnROYW1lLiAke2RldmljZU5hbWV9c3BlY2lmaWVzIHRoZSBuYW1lIG9mIHRoZSBkZXZpY2UsIGFuZCB0b3BpY1Nob3J0TmFtZXNwZWNpZmllcyB0aGUgY3VzdG9tIG5hbWUgb2YgdGhlIHRvcGljLlxuICAgICAqIEJhc2ljIGNvbW11bmljYXRpb24gdG9waWNzIG9yIFRoaW5nIFNwZWNpZmljYXRpb24gTGFuZ3VhZ2UgKFRTTCktYmFzZWQgY29tbXVuaWNhdGlvblxuICAgICAqIHRvcGljcy4gU3ludGF4OiAke2RldmljZU5hbWV9XFwvdG9waWNTaG9ydE5hbWUuIFlvdSBjYW4gcmVwbGFjZSAke2RldmljZU5hbWV9IHdpdGggdGhlICsgd2lsZGNhcmQuIFRoZSB3aWxkY2FyZCBpbmRpY2F0ZXMgdGhhdCB0aGUgdG9waWMgYXBwbGllcyB0byBhbGwgZGV2aWNlcyB1bmRlciB0aGVcbiAgICAgKiBwcm9kdWN0LiBWYWxpZCB2YWx1ZXMgb2YgdG9waWNTaG9ydE5hbWU6XG4gICAgICogXFwvdGhpbmdcXC9ldmVudFxcL3Byb3BlcnR5XFwvcG9zdDogc3VibWl0cyB0aGUgcHJvcGVydHkgZGF0YSBvZiBhIGRldmljZS5cbiAgICAgKiBcXC90aGluZ1xcL2V2ZW50XFwvJHt0c2wuZXZlbnQuaWRlbnRpZmllcn1cXC9wb3N0OiBzdWJtaXRzIHRoZSBldmVudCBkYXRhIG9mIGEgZGV2aWNlLiR7dHNsLmV2ZW50LmlkZW50aWZpZXJ9IHNwZWNpZmllcyB0aGUgaWRlbnRpZmllciBvZiBhbiBldmVudCBpbiB0aGUgVFNMLlxuICAgICAqIFxcL3RoaW5nXFwvbGlmZWN5Y2xlOiBzdWJtaXRzIGRldmljZSBsaWZlY3ljbGUgY2hhbmdlcy5cbiAgICAgKiBcXC90aGluZ1xcL2Rvd25saW5rXFwvcmVwbHlcXC9tZXNzYWdlOiBzZW5kcyBhIHJlc3BvbnNlIHRvIGEgcmVxdWVzdCBmcm9tIElvVCBQbGF0Zm9ybS5cbiAgICAgKiBcXC90aGluZ1xcL2xpc3RcXC9mb3VuZDogc3VibWl0cyB0aGUgZGF0YSB3aGVuIGEgZ2F0ZXdheSBkZXRlY3RzIGEgbmV3IHN1Yi1kZXZpY2UuXG4gICAgICogXFwvdGhpbmdcXC90b3BvXFwvbGlmZWN5Y2xlOiBzdWJtaXRzIGRldmljZSB0b3BvbG9neSBjaGFuZ2VzLlxuICAgICAqIFxcL3RoaW5nXFwvZXZlbnRcXC9wcm9wZXJ0eVxcL2hpc3RvcnlcXC9wb3N0OiBzdWJtaXRzIGhpc3RvcmljYWwgcHJvcGVydHkgZGF0YSBvZiBhIGRldmljZS5cbiAgICAgKiBcXC90aGluZ1xcL2V2ZW50XFwvJHt0c2wuZXZlbnQuaWRlbnRpZmllcn1cXC9wb3N0OiBzdWJtaXRzIHRoZSBoaXN0b3JpY2FsIGV2ZW50IGRhdGEgb2YgYSBkZXZpY2UuJHt0c2wuZXZlbnQuaWRlbnRpZmllcn1zcGVjaWZpZXMgdGhlIGlkZW50aWZpZXIgb2YgYW4gZXZlbnQgaW4gdGhlIFRTTC5cbiAgICAgKiBcXC9vdGFcXC91cGdyYWRlOiBzdWJtaXRzIE9UQSB1cGRhdGUgc3RhdHVzLlxuICAgICAqIFxcL290YVxcL3ZlcnNpb25cXC9wb3N0OiBzdWJtaXRzIE9UQSBtb2R1bGUgdmVyc2lvbnMuXG4gICAgICogXFwvdGhpbmdcXC9kZXZpY2VpbmZvXFwvdXBkYXRlOiBzdWJtaXRzIGRldmljZSB0YWcgY2hhbmdlcy5cbiAgICAgKiBcXC9lZGdlXFwvZHJpdmVyXFwvJHtkcml2ZXJfaWR9XFwvcG9pbnRfcG9zdDogc3VibWl0cyBwYXNzLXRocm91Z2ggZGF0YSBmcm9tIExpbmsgSW9UIEVkZ2UuJHtkcml2ZXJfaWR9IHNwZWNpZmllcyB0aGUgSUQgb2YgdGhlIGRyaXZlciB0aGF0IGEgZGV2aWNlIHVzZXMgdG8gYWNjZXNzIExpbmsgSW9UIEVkZ2UuXG4gICAgICogJHtwYWNrYWdlSWR9XFwvJHtqb2JJZH1cXC9vdGFcXC9qb2JcXC9zdGF0dXM6IHN1Ym1pdHMgdGhlIHN0YXR1cyBvZiBPVEEgdXBkYXRlIGJhdGNoZXMuIFRoaXMgdG9waWMgaXMgYSBiYXNpYyBjb21tdW5pY2F0aW9uIHRvcGljLlxuICAgICAqICR7cGFja2FnZUlkfXNwZWNpZmllcyB0aGUgSUQgb2YgdGhlIGZpcm13YXJlLiAke2pvYklkfXNwZWNpZmllcyB0aGUgSUQgb2YgdGhlIHVwZGF0ZSBiYXRjaC5cbiAgICAgKiBDdXN0b20gdG9waWNzLiBFeGFtcGxlOiR7ZGV2aWNlTmFtZX1cXC91c2VyXFwvZ2V0LlxuICAgICAqIFlvdSBjYW4gY2FsbCB0aGVRdWVyeVByb2R1Y3RUb3BpY29wZXJhdGlvbiB0byB2aWV3IGFsbCBjdXN0b20gdG9waWNzIG9mIHRoZSBwcm9kdWN0LlxuICAgICAqIFdoZW4geW91IHNwZWNpZnkgYSBjdXN0b20gdG9waWMsIHlvdSBjYW4gdXNlIHRoZSArIGFuZCAjIHdpbGRjYXJkcy5cbiAgICAgKiBZb3UgY2FuIHJlcGxhY2UgJHtkZXZpY2VOYW1lfSB3aXRoIHRoZSsgd2lsZGNhcmQuIFRoZSB3aWxkY2FyZCBpbmRpY2F0ZXMgdGhhdCB0aGUgdG9waWMgYXBwbGllcyB0byBhbGwgZGV2aWNlcyB1bmRlciB0aGVcbiAgICAgKiBwcm9kdWN0LlxuICAgICAqIFlvdSBjYW4gcmVwbGFjZSB0aGUgZmllbGRzIHRoYXQgZm9sbG93ICR7ZGV2aWNlTmFtZX0gd2l0aCBcXC91c2VyXFwvIy4gVGhlICMgd2lsZGNhcmQgaW5kaWNhdGVzIHRoYXQgdGhlIHRvcGljIGFwcGxpZXMgd2hhdGV2ZXIgdmFsdWVzIGFyZSBzcGVjaWZpZWQgZm9yIHRoZSBmaWVsZHMgdGhhdFxuICAgICAqIGZvbGxvd1xcL3VzZXIuXG4gICAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgaG93IHRvIHVzZSB3aWxkY2FyZHMsIHNlZSBXaWxkY2FyZHMgaW4gdG9waWNzLlxuICAgICAqIFRvcGljIHRoYXQgaXMgdXNlZCB0byBzdWJtaXQgZGV2aWNlIHN0YXR1cyBjaGFuZ2VzOiAke2RldmljZU5hbWV9LlxuICAgICAqIFlvdSBjYW4gdXNlIHRoZSt3aWxkY2FyZC4gSW4gdGhpcyBjYXNlLCB0aGUgc3RhdHVzIGNoYW5nZXMgb2YgYWxsIGRldmljZXMgdW5kZXIgdGhlIHByb2R1Y3QgYXJlIHN1Ym1pdHRlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgc2hvcnRUb3BpYzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHN0YXJ0UnVsZTogU3RhcnQgdGhlIHJ1bGUuIFRoZSBydWxlIGF0IGxlYXN0IGNvbnRhaW5zIG9uZSBydWxlIGFjdGlvbiB3aXRoIG5vcm1hbCBkYXRhIGZvcndhcmQuXG4gICAgICovXG4gICAgcHVibGljIHN0YXJ0UnVsZTogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSB0b3BpY1R5cGU6IDA6IFRoZSB0b3BpYyBpcyBhIGJhc2ljIGNvbW11bmljYXRpb24gdG9waWMgb3IgVFNMLWJhc2VkIGNvbW11bmljYXRpb24gdG9waWMuXG4gICAgICogMTogVGhlIHRvcGljIGlzIGEgY3VzdG9tIHRvcGljLlxuICAgICAqIDI6IFRoZSB0b3BpYyBpcyB1c2VkIHRvIHN1Ym1pdCBkZXZpY2Ugc3RhdHVzIGNoYW5nZXMuIFN5bnRheDogXFwvYXNcXC9tcXR0XFwvc3RhdHVzXFwvJHtwcm9kdWN0S2V5fVxcLyR7ZGV2aWNlTmFtZX0uXG4gICAgICovXG4gICAgcHVibGljIHRvcGljVHlwZTogbnVtYmVyIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHdoZXJlOiBUaGUgY29uZGl0aW9uIHRoYXQgaXMgdXNlZCB0byB0cmlnZ2VyIHRoZSBydWxlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlU1FMIGV4cHJlc3Npb25zLlxuICAgICAqIE5vdGUgU3BlY2lmeSB0aGUgZmllbGRzIHRoYXQgZm9sbG93IHRoZVdoZXJla2V5d29yZCBmb3IgdGhpcyBwYXJhbWV0ZXIuIEZvciBleGFtcGxlLCBpZiB0aGUgV2hlcmUgc3RhdGVtZW50IGlzIFdoZXJlIGE+MTAsIHNwZWNpZnkgYT4xMCBmb3IgdGhpcyBwYXJhbWV0ZXIuXG4gICAgICovXG4gICAgcHVibGljIHdoZXJlOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2NvcGUgLSBzY29wZSBpbiB3aGljaCB0aGlzIHJlc291cmNlIGlzIGRlZmluZWRcbiAgICAgKiBAcGFyYW0gaWQgICAgLSBzY29wZWQgaWQgb2YgdGhlIHJlc291cmNlXG4gICAgICogQHBhcmFtIHByb3BzIC0gcmVzb3VyY2UgcHJvcGVydGllc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjb3BlOiByb3MuQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogUm9zUnVsZVByb3BzLCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbikge1xuICAgICAgICBzdXBlcihzY29wZSwgaWQsIHsgdHlwZTogUm9zUnVsZS5ST1NfUkVTT1VSQ0VfVFlQRV9OQU1FLCBwcm9wZXJ0aWVzOiBwcm9wcyB9KTtcbiAgICAgICAgdGhpcy5hdHRyQWN0aW9uSWQgPSB0aGlzLmdldEF0dCgnQWN0aW9uSWQnKTtcbiAgICAgICAgdGhpcy5hdHRyUnVsZUlkID0gdGhpcy5nZXRBdHQoJ1J1bGVJZCcpO1xuXG4gICAgICAgIHRoaXMuZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQgPSBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDtcbiAgICAgICAgdGhpcy5uYW1lID0gcHJvcHMubmFtZTtcbiAgICAgICAgdGhpcy5kYXRhVHlwZSA9IHByb3BzLmRhdGFUeXBlO1xuICAgICAgICB0aGlzLmlvdEluc3RhbmNlSWQgPSBwcm9wcy5pb3RJbnN0YW5jZUlkO1xuICAgICAgICB0aGlzLnByb2R1Y3RLZXkgPSBwcm9wcy5wcm9kdWN0S2V5O1xuICAgICAgICB0aGlzLnJlc291cmNlR3JvdXBJZCA9IHByb3BzLnJlc291cmNlR3JvdXBJZDtcbiAgICAgICAgdGhpcy5ydWxlQWN0aW9uID0gcHJvcHMucnVsZUFjdGlvbjtcbiAgICAgICAgdGhpcy5ydWxlRGVzYyA9IHByb3BzLnJ1bGVEZXNjO1xuICAgICAgICB0aGlzLnNlbGVjdCA9IHByb3BzLnNlbGVjdDtcbiAgICAgICAgdGhpcy5zaG9ydFRvcGljID0gcHJvcHMuc2hvcnRUb3BpYztcbiAgICAgICAgdGhpcy5zdGFydFJ1bGUgPSBwcm9wcy5zdGFydFJ1bGU7XG4gICAgICAgIHRoaXMudG9waWNUeXBlID0gcHJvcHMudG9waWNUeXBlO1xuICAgICAgICB0aGlzLndoZXJlID0gcHJvcHMud2hlcmU7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgZGF0YVR5cGU6IHRoaXMuZGF0YVR5cGUsXG4gICAgICAgICAgICBpb3RJbnN0YW5jZUlkOiB0aGlzLmlvdEluc3RhbmNlSWQsXG4gICAgICAgICAgICBwcm9kdWN0S2V5OiB0aGlzLnByb2R1Y3RLZXksXG4gICAgICAgICAgICByZXNvdXJjZUdyb3VwSWQ6IHRoaXMucmVzb3VyY2VHcm91cElkLFxuICAgICAgICAgICAgcnVsZUFjdGlvbjogdGhpcy5ydWxlQWN0aW9uLFxuICAgICAgICAgICAgcnVsZURlc2M6IHRoaXMucnVsZURlc2MsXG4gICAgICAgICAgICBzZWxlY3Q6IHRoaXMuc2VsZWN0LFxuICAgICAgICAgICAgc2hvcnRUb3BpYzogdGhpcy5zaG9ydFRvcGljLFxuICAgICAgICAgICAgc3RhcnRSdWxlOiB0aGlzLnN0YXJ0UnVsZSxcbiAgICAgICAgICAgIHRvcGljVHlwZTogdGhpcy50b3BpY1R5cGUsXG4gICAgICAgICAgICB3aGVyZTogdGhpcy53aGVyZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIHJlbmRlclByb3BlcnRpZXMocHJvcHM6IHtba2V5OiBzdHJpbmddOiBhbnl9KTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4gcm9zUnVsZVByb3BzVG9Sb3NUZW1wbGF0ZShwcm9wcywgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCk7XG4gICAgfVxufVxuXG5leHBvcnQgbmFtZXNwYWNlIFJvc1J1bGUge1xuICAgIC8qKlxuICAgICAqIEBzdGFiaWxpdHkgZXh0ZXJuYWxcbiAgICAgKi9cbiAgICBleHBvcnQgaW50ZXJmYWNlIFJ1bGVBY3Rpb25Qcm9wZXJ0eSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAUHJvcGVydHkgZXJyb3JBY3Rpb25GbGFnOiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcnVsZSBhY3Rpb24gZm9yd2FyZGVkIGVycm9yIG9wZXJhdGlvbiBkYXRhLiBFcnJvciBvcGVyYXRpb25cbiAgICAgKiBkYXRhIGluZGljYXRlcyB0aGF0IHRoZSBydWxlIGVuZ2luZSBmYWlsZWQgdG8gZm9yd2FyZCBkYXRhIGZyb20gdGhlIElvVCBQbGF0Zm9ybSB0b3BpY1xuICAgICAqIHRvIHRoZSBkZXN0aW5hdGlvbiBjbG91ZCBzZXJ2aWNlLiBBIGRhdGEgZm9yd2FyZGluZyBmYWlsdXJlIGluZGljYXRlcyB0aGF0IGZvcndhcmRpbmdcbiAgICAgKiByZXRyaWVzIGFsc28gZmFpbGVkLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogdHJ1ZTogZm9yd2FyZHMgZXJyb3Igb3BlcmF0aW9uIGRhdGEuXG4gICAgICogZmFsc2U6IGZvcndhcmRzIG5vcm1hbCBkYXRhIGluc3RlYWQgb2YgZXJyb3Igb3BlcmF0aW9uIGRhdGEuXG4gICAgICogRGVmYXVsdCB2YWx1ZTogZmFsc2UuXG4gICAgICAgICAqL1xuICAgICAgICByZWFkb25seSBlcnJvckFjdGlvbkZsYWc/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAUHJvcGVydHkgdHlwZTogVGhlIHR5cGUgb2YgdGhlIHJ1bGUgYWN0aW9uLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogTU5TOiBmb3J3YXJkcyBkYXRhIGluIHRoZSB0b3BpY3MgdGhhdCBoYXZlIGJlZW4gcHJvY2Vzc2VkIGJ5IHRoZSBydWxlIGVuZ2luZSB0byBNZXNzYWdlXG4gICAgICogU2VydmljZSAoTU5TKSBmb3IgbWVzc2FnZSB0cmFuc21pc3Npb24uXG4gICAgICogRkM6IGZvcndhcmRzIGRhdGEgaW4gdGhlIHRvcGljcyB0aGF0IGhhdmUgYmVlbiBwcm9jZXNzZWQgYnkgdGhlIHJ1bGUgZW5naW5lIHRvIEZ1bmN0aW9uXG4gICAgICogQ29tcHV0ZSBmb3IgZXZlbnQgY29tcHV0aW5nLlxuICAgICAqIFJFUFVCTElTSDogZm9yd2FyZHMgZGF0YSBpbiB0aGUgdG9waWNzIHRoYXQgaGF2ZSBiZWVuIHByb2Nlc3NlZCBieSB0aGUgcnVsZSBlbmdpbmUgdG8gYW5vdGhlclxuICAgICAqIElvVCBQbGF0Zm9ybSB0b3BpYy5cbiAgICAgKiBBTVFQOiBmb3J3YXJkcyBkYXRhIHRvIEFNUVAgY29uc3VtZXIgZ3JvdXBzLlxuICAgICAqIE9UUzogZm9yd2FyZHMgZGF0YSBpbiB0aGUgdG9waWNzIHRoYXQgaGF2ZSBiZWVuIHByb2Nlc3NlZCBieSB0aGUgcnVsZSBlbmdpbmUgdG8gVGFibGVcbiAgICAgKiBTdG9yZSBmb3IgTm9TUUwgZGF0YSBzdG9yYWdlLlxuICAgICAqIE5vdGVcbiAgICAgKiBSdWxlcyBvZiB0aGUgYmluYXJ5IGRhdGEgZm9ybWF0ICh0aGUgRGF0YVR5cGUgcGFyYW1ldGVyIGlzIHNldCB0b0JJTkFSWSkgZG8gbm90IHN1cHBvcnQgZm9yd2FyZGluZyBkYXRhIHRvIFRhYmxlIFN0b3JlLlxuICAgICAqIERlc3RpbmF0aW9uIEFsaWJhYmEgQ2xvdWQgc2VydmljZXMgdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHRoZSBydWxlIGVuZ2luZSB2YXJ5IGJhc2VkXG4gICAgICogb24gcmVnaW9ucy4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlZ2lvbnMgYW5kIGRlc3RpbmF0aW9uIGNsb3VkIHNlcnZpY2VzXG4gICAgICogdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHRoZSBydWxlIGVuZ2luZSwgc2VlIFJlZ2lvbnMgYW5kIHpvbmVzLlxuICAgICAgICAgKi9cbiAgICAgICAgcmVhZG9ubHkgdHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQFByb3BlcnR5IGNvbmZpZ3VyYXRpb246IFRoZSBjb25maWd1cmF0aW9ucyBvZiB0aGUgcnVsZSBhY3Rpb24uIFlvdSBtdXN0IHNwZWNpZnkgYSBKU09OIHN0cmluZy4gVGhlIGNvbmZpZ3VyYXRpb25zXG4gICAgICogZm9yIGRpZmZlcmVudCB0eXBlcyBvZiBydWxlIGFjdGlvbnMgYXJlIGRpZmZlcmVudC4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgcmVxdWlyZWRcbiAgICAgKiBzeW50YXggYW5kIGV4YW1wbGVzLCBzZWUgdGhlIGZvbGxvd2luZyB0YWJsZXMuXG4gICAgICAgICAqL1xuICAgICAgICByZWFkb25seSBjb25maWd1cmF0aW9uOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgZ2l2ZW4gcHJvcGVydGllcyBtYXRjaCB0aG9zZSBvZiBhIGBSdWxlQWN0aW9uUHJvcGVydHlgXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJ1bGVBY3Rpb25Qcm9wZXJ0eWBcbiAqXG4gKiBAcmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSB2YWxpZGF0aW9uLlxuICovXG5mdW5jdGlvbiBSb3NSdWxlX1J1bGVBY3Rpb25Qcm9wZXJ0eVZhbGlkYXRvcihwcm9wZXJ0aWVzOiBhbnkpOiByb3MuVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcm9zLlZBTElEQVRJT05fU1VDQ0VTUzsgfVxuICAgIGNvbnN0IGVycm9ycyA9IG5ldyByb3MuVmFsaWRhdGlvblJlc3VsdHMoKTtcbiAgICBpZihwcm9wZXJ0aWVzLmVycm9yQWN0aW9uRmxhZyAmJiAodHlwZW9mIHByb3BlcnRpZXMuZXJyb3JBY3Rpb25GbGFnKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdlcnJvckFjdGlvbkZsYWcnLCByb3MudmFsaWRhdGVBbGxvd2VkVmFsdWVzKSh7XG4gICAgICAgICAgZGF0YTogcHJvcGVydGllcy5lcnJvckFjdGlvbkZsYWcsXG4gICAgICAgICAgYWxsb3dlZFZhbHVlczogW1widHJ1ZVwiLFwiZmFsc2VcIl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdlcnJvckFjdGlvbkZsYWcnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuZXJyb3JBY3Rpb25GbGFnKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd0eXBlJywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLnR5cGUpKTtcbiAgICBpZihwcm9wZXJ0aWVzLnR5cGUgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLnR5cGUpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3R5cGUnLCByb3MudmFsaWRhdGVBbGxvd2VkVmFsdWVzKSh7XG4gICAgICAgICAgZGF0YTogcHJvcGVydGllcy50eXBlLFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFtcIkFNUVBcIixcIkRBVEFIVUJcIixcIkZDXCIsXCJNTlNcIixcIk9OU1wiLFwiT1RTXCIsXCJSRVBVQkxJU0hcIl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd0eXBlJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnR5cGUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NvbmZpZ3VyYXRpb24nLCByb3MucmVxdWlyZWRWYWxpZGF0b3IpKHByb3BlcnRpZXMuY29uZmlndXJhdGlvbikpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignY29uZmlndXJhdGlvbicsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5jb25maWd1cmF0aW9uKSk7XG4gICAgcmV0dXJuIGVycm9ycy53cmFwKCdzdXBwbGllZCBwcm9wZXJ0aWVzIG5vdCBjb3JyZWN0IGZvciBcIlJ1bGVBY3Rpb25Qcm9wZXJ0eVwiJyk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgQWxpQ2xvdWQgUk9TIFJlc291cmNlIHByb3BlcnRpZXMgb2YgYW4gYEFMSVlVTjo6SU9UOjpSdWxlLlJ1bGVBY3Rpb25gIHJlc291cmNlXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJ1bGVBY3Rpb25Qcm9wZXJ0eWBcbiAqXG4gKiBAcmV0dXJucyB0aGUgQWxpQ2xvdWQgUk9TIFJlc291cmNlIHByb3BlcnRpZXMgb2YgYW4gYEFMSVlVTjo6SU9UOjpSdWxlLlJ1bGVBY3Rpb25gIHJlc291cmNlLlxuICovXG4vLyBAdHMtaWdub3JlIFRTNjEzM1xuZnVuY3Rpb24gcm9zUnVsZVJ1bGVBY3Rpb25Qcm9wZXJ0eVRvUm9zVGVtcGxhdGUocHJvcGVydGllczogYW55KTogYW55IHtcbiAgICBpZiAoIXJvcy5jYW5JbnNwZWN0KHByb3BlcnRpZXMpKSB7IHJldHVybiBwcm9wZXJ0aWVzOyB9XG4gICAgUm9zUnVsZV9SdWxlQWN0aW9uUHJvcGVydHlWYWxpZGF0b3IocHJvcGVydGllcykuYXNzZXJ0U3VjY2VzcygpO1xuICAgIHJldHVybiB7XG4gICAgICAnRXJyb3JBY3Rpb25GbGFnJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5lcnJvckFjdGlvbkZsYWcpLFxuICAgICAgJ1R5cGUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnR5cGUpLFxuICAgICAgJ0NvbmZpZ3VyYXRpb24nOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmNvbmZpZ3VyYXRpb24pLFxuICAgIH07XG59XG5cbi8qKlxuICogUHJvcGVydGllcyBmb3IgZGVmaW5pbmcgYSBgUm9zUnVsZUFjdGlvbmAuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1pb3QtcnVsZWFjdGlvblxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJvc1J1bGVBY3Rpb25Qcm9wcyB7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgY29uZmlndXJhdGlvbjogVGhlIGNvbmZpZ3VyYXRpb25zIG9mIHRoZSBydWxlIGFjdGlvbi4gWW91IG11c3Qgc3BlY2lmeSBhIEpTT04gc3RyaW5nLiBUaGUgY29uZmlndXJhdGlvbnNcbiAgICAgKiBmb3IgZGlmZmVyZW50IHR5cGVzIG9mIHJ1bGUgYWN0aW9ucyBhcmUgZGlmZmVyZW50LiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCByZXF1aXJlZFxuICAgICAqIHN5bnRheCBhbmQgZXhhbXBsZXMsIHNlZSB0aGUgZm9sbG93aW5nIHRhYmxlcy5cbiAgICAgKi9cbiAgICByZWFkb25seSBjb25maWd1cmF0aW9uOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcnVsZUlkOiBUaGUgSUQgb2YgdGhlIHJ1bGUgZm9yIHdoaWNoIHlvdSB3YW50IHRvIGNyZWF0ZSBhbiBhY3Rpb24uIFlvdSBjYW4gdXNlIGVpdGhlciBvZiB0aGVcbiAgICAgKiBmb2xsb3dpbmcgbWV0aG9kcyB0byB2aWV3IHRoZSBydWxlIElEOiAxLiBMb2cgb24gdG8gdGhlIElvVCBQbGF0Zm9ybSBjb25zb2xlIGFuZCBjaG9vc2UgUnVsZXM+RGF0YSBGb3J3YXJkaW5nLiAyLiBDYWxsIHRoZSBMaXN0UnVsZSBvcGVyYXRpb24uXG4gICAgICovXG4gICAgcmVhZG9ubHkgcnVsZUlkOiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgdHlwZTogVGhlIHR5cGUgb2YgdGhlIHJ1bGUgYWN0aW9uLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogTU5TOiBmb3J3YXJkcyBkYXRhIGluIHRoZSB0b3BpY3MgdGhhdCBoYXZlIGJlZW4gcHJvY2Vzc2VkIGJ5IHRoZSBydWxlIGVuZ2luZSB0byBNZXNzYWdlXG4gICAgICogU2VydmljZSAoTU5TKSBmb3IgbWVzc2FnZSB0cmFuc21pc3Npb24uXG4gICAgICogRkM6IGZvcndhcmRzIGRhdGEgaW4gdGhlIHRvcGljcyB0aGF0IGhhdmUgYmVlbiBwcm9jZXNzZWQgYnkgdGhlIHJ1bGUgZW5naW5lIHRvIEZ1bmN0aW9uXG4gICAgICogQ29tcHV0ZSBmb3IgZXZlbnQgY29tcHV0aW5nLlxuICAgICAqIFJFUFVCTElTSDogZm9yd2FyZHMgZGF0YSBpbiB0aGUgdG9waWNzIHRoYXQgaGF2ZSBiZWVuIHByb2Nlc3NlZCBieSB0aGUgcnVsZSBlbmdpbmUgdG8gYW5vdGhlclxuICAgICAqIElvVCBQbGF0Zm9ybSB0b3BpYy5cbiAgICAgKiBBTVFQOiBmb3J3YXJkcyBkYXRhIHRvIEFNUVAgY29uc3VtZXIgZ3JvdXBzLlxuICAgICAqIE9UUzogZm9yd2FyZHMgZGF0YSBpbiB0aGUgdG9waWNzIHRoYXQgaGF2ZSBiZWVuIHByb2Nlc3NlZCBieSB0aGUgcnVsZSBlbmdpbmUgdG8gVGFibGVcbiAgICAgKiBTdG9yZSBmb3IgTm9TUUwgZGF0YSBzdG9yYWdlLlxuICAgICAqIE5vdGVcbiAgICAgKiBSdWxlcyBvZiB0aGUgYmluYXJ5IGRhdGEgZm9ybWF0ICh0aGUgRGF0YVR5cGUgcGFyYW1ldGVyIGlzIHNldCB0b0JJTkFSWSkgZG8gbm90IHN1cHBvcnQgZm9yd2FyZGluZyBkYXRhIHRvIFRhYmxlIFN0b3JlLlxuICAgICAqIERlc3RpbmF0aW9uIEFsaWJhYmEgQ2xvdWQgc2VydmljZXMgdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHRoZSBydWxlIGVuZ2luZSB2YXJ5IGJhc2VkXG4gICAgICogb24gcmVnaW9ucy4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlZ2lvbnMgYW5kIGRlc3RpbmF0aW9uIGNsb3VkIHNlcnZpY2VzXG4gICAgICogdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHRoZSBydWxlIGVuZ2luZSwgc2VlIFJlZ2lvbnMgYW5kIHpvbmVzLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHR5cGU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBlcnJvckFjdGlvbkZsYWc6IEluZGljYXRlcyB3aGV0aGVyIHRoZSBydWxlIGFjdGlvbiBmb3J3YXJkZWQgZXJyb3Igb3BlcmF0aW9uIGRhdGEuIEVycm9yIG9wZXJhdGlvblxuICAgICAqIGRhdGEgaW5kaWNhdGVzIHRoYXQgdGhlIHJ1bGUgZW5naW5lIGZhaWxlZCB0byBmb3J3YXJkIGRhdGEgZnJvbSB0aGUgSW9UIFBsYXRmb3JtIHRvcGljXG4gICAgICogdG8gdGhlIGRlc3RpbmF0aW9uIGNsb3VkIHNlcnZpY2UuIEEgZGF0YSBmb3J3YXJkaW5nIGZhaWx1cmUgaW5kaWNhdGVzIHRoYXQgZm9yd2FyZGluZ1xuICAgICAqIHJldHJpZXMgYWxzbyBmYWlsZWQuIFZhbGlkIHZhbHVlczpcbiAgICAgKiB0cnVlOiBmb3J3YXJkcyBlcnJvciBvcGVyYXRpb24gZGF0YS5cbiAgICAgKiBmYWxzZTogZm9yd2FyZHMgbm9ybWFsIGRhdGEgaW5zdGVhZCBvZiBlcnJvciBvcGVyYXRpb24gZGF0YS5cbiAgICAgKiBEZWZhdWx0IHZhbHVlOiBmYWxzZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBlcnJvckFjdGlvbkZsYWc/OiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGlvdEluc3RhbmNlSWQ6IFRoZSBJRCBvZiB0aGUgaW5zdGFuY2UuIFRoaXMgcGFyYW1ldGVyIGlzIG5vdCByZXF1aXJlZCBmb3IgcHVibGljIGluc3RhbmNlcy4gSG93ZXZlcixcbiAgICAgKiB0aGUgcGFyYW1ldGVyIGlzIHJlcXVpcmVkIGZvciB0aGUgaW5zdGFuY2VzIHRoYXQgeW91IGhhdmUgcHVyY2hhc2VkLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGlvdEluc3RhbmNlSWQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGdpdmVuIHByb3BlcnRpZXMgbWF0Y2ggdGhvc2Ugb2YgYSBgUm9zUnVsZUFjdGlvblByb3BzYFxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NSdWxlQWN0aW9uUHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgdmFsaWRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gUm9zUnVsZUFjdGlvblByb3BzVmFsaWRhdG9yKHByb3BlcnRpZXM6IGFueSk6IHJvcy5WYWxpZGF0aW9uUmVzdWx0IHtcbiAgICBpZiAoIXJvcy5jYW5JbnNwZWN0KHByb3BlcnRpZXMpKSB7IHJldHVybiByb3MuVkFMSURBVElPTl9TVUNDRVNTOyB9XG4gICAgY29uc3QgZXJyb3JzID0gbmV3IHJvcy5WYWxpZGF0aW9uUmVzdWx0cygpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZXJyb3JBY3Rpb25GbGFnJywgcm9zLnZhbGlkYXRlQm9vbGVhbikocHJvcGVydGllcy5lcnJvckFjdGlvbkZsYWcpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3R5cGUnLCByb3MucmVxdWlyZWRWYWxpZGF0b3IpKHByb3BlcnRpZXMudHlwZSkpO1xuICAgIGlmKHByb3BlcnRpZXMudHlwZSAmJiAodHlwZW9mIHByb3BlcnRpZXMudHlwZSkgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigndHlwZScsIHJvcy52YWxpZGF0ZUFsbG93ZWRWYWx1ZXMpKHtcbiAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLnR5cGUsXG4gICAgICAgICAgYWxsb3dlZFZhbHVlczogW1wiQU1RUFwiLFwiREFUQUhVQlwiLFwiRkNcIixcIk1OU1wiLFwiT05TXCIsXCJPVFNcIixcIlJFUFVCTElTSFwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3R5cGUnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMudHlwZSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignaW90SW5zdGFuY2VJZCcsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5pb3RJbnN0YW5jZUlkKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdjb25maWd1cmF0aW9uJywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLmNvbmZpZ3VyYXRpb24pKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NvbmZpZ3VyYXRpb24nLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuY29uZmlndXJhdGlvbikpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncnVsZUlkJywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLnJ1bGVJZCkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncnVsZUlkJywgcm9zLnZhbGlkYXRlTnVtYmVyKShwcm9wZXJ0aWVzLnJ1bGVJZCkpO1xuICAgIHJldHVybiBlcnJvcnMud3JhcCgnc3VwcGxpZWQgcHJvcGVydGllcyBub3QgY29ycmVjdCBmb3IgXCJSb3NSdWxlQWN0aW9uUHJvcHNcIicpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OklPVDo6UnVsZUFjdGlvbmAgcmVzb3VyY2VcbiAqXG4gKiBAcGFyYW0gcHJvcGVydGllcyAtIHRoZSBUeXBlU2NyaXB0IHByb3BlcnRpZXMgb2YgYSBgUm9zUnVsZUFjdGlvblByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpJT1Q6OlJ1bGVBY3Rpb25gIHJlc291cmNlLlxuICovXG4vLyBAdHMtaWdub3JlIFRTNjEzM1xuZnVuY3Rpb24gcm9zUnVsZUFjdGlvblByb3BzVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzOiBhbnksIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuKTogYW55IHtcbiAgICBpZiAoIXJvcy5jYW5JbnNwZWN0KHByb3BlcnRpZXMpKSB7IHJldHVybiBwcm9wZXJ0aWVzOyB9XG4gICAgaWYoZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQpIHtcbiAgICAgICAgUm9zUnVsZUFjdGlvblByb3BzVmFsaWRhdG9yKHByb3BlcnRpZXMpLmFzc2VydFN1Y2Nlc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICdDb25maWd1cmF0aW9uJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5jb25maWd1cmF0aW9uKSxcbiAgICAgICdSdWxlSWQnOiByb3MubnVtYmVyVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnJ1bGVJZCksXG4gICAgICAnVHlwZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMudHlwZSksXG4gICAgICAnRXJyb3JBY3Rpb25GbGFnJzogcm9zLmJvb2xlYW5Ub1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuZXJyb3JBY3Rpb25GbGFnKSxcbiAgICAgICdJb3RJbnN0YW5jZUlkJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5pb3RJbnN0YW5jZUlkKSxcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYSBiYXNlIGVuY2Fwc3VsYXRpb24gYXJvdW5kIHRoZSBST1MgcmVzb3VyY2UgdHlwZSBgQUxJWVVOOjpJT1Q6OlJ1bGVBY3Rpb25gLCB3aGljaCBpcyB1c2VkIHRvIGNyZWF0ZSBhIHJ1bGUgYWN0aW9uIGZvciBhIHNwZWNpZmllZCBydWxlLlxuICogQE5vdGUgVGhpcyBjbGFzcyBkb2VzIG5vdCBjb250YWluIGFkZGl0aW9uYWwgZnVuY3Rpb25zLCBzbyBpdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgdGhlIGBSdWxlQWN0aW9uYCBjbGFzcyBpbnN0ZWFkIG9mIHRoaXMgY2xhc3MgZm9yIGEgbW9yZSBjb252ZW5pZW50IGRldmVsb3BtZW50IGV4cGVyaWVuY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1pb3QtcnVsZWFjdGlvblxuICovXG5leHBvcnQgY2xhc3MgUm9zUnVsZUFjdGlvbiBleHRlbmRzIHJvcy5Sb3NSZXNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogVGhlIHJlc291cmNlIHR5cGUgbmFtZSBmb3IgdGhpcyByZXNvdXJjZSBjbGFzcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFJPU19SRVNPVVJDRV9UWVBFX05BTUUgPSBcIkFMSVlVTjo6SU9UOjpSdWxlQWN0aW9uXCI7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIEFjdGlvbklkOiBUaGUgSUQgb2YgdGhlIHJ1bGUgYWN0aW9uLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyQWN0aW9uSWQ6IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIHB1YmxpYyBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbjtcblxuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGNvbmZpZ3VyYXRpb246IFRoZSBjb25maWd1cmF0aW9ucyBvZiB0aGUgcnVsZSBhY3Rpb24uIFlvdSBtdXN0IHNwZWNpZnkgYSBKU09OIHN0cmluZy4gVGhlIGNvbmZpZ3VyYXRpb25zXG4gICAgICogZm9yIGRpZmZlcmVudCB0eXBlcyBvZiBydWxlIGFjdGlvbnMgYXJlIGRpZmZlcmVudC4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgcmVxdWlyZWRcbiAgICAgKiBzeW50YXggYW5kIGV4YW1wbGVzLCBzZWUgdGhlIGZvbGxvd2luZyB0YWJsZXMuXG4gICAgICovXG4gICAgcHVibGljIGNvbmZpZ3VyYXRpb246IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBydWxlSWQ6IFRoZSBJRCBvZiB0aGUgcnVsZSBmb3Igd2hpY2ggeW91IHdhbnQgdG8gY3JlYXRlIGFuIGFjdGlvbi4gWW91IGNhbiB1c2UgZWl0aGVyIG9mIHRoZVxuICAgICAqIGZvbGxvd2luZyBtZXRob2RzIHRvIHZpZXcgdGhlIHJ1bGUgSUQ6IDEuIExvZyBvbiB0byB0aGUgSW9UIFBsYXRmb3JtIGNvbnNvbGUgYW5kIGNob29zZSBSdWxlcz5EYXRhIEZvcndhcmRpbmcuIDIuIENhbGwgdGhlIExpc3RSdWxlIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBwdWJsaWMgcnVsZUlkOiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgdHlwZTogVGhlIHR5cGUgb2YgdGhlIHJ1bGUgYWN0aW9uLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogTU5TOiBmb3J3YXJkcyBkYXRhIGluIHRoZSB0b3BpY3MgdGhhdCBoYXZlIGJlZW4gcHJvY2Vzc2VkIGJ5IHRoZSBydWxlIGVuZ2luZSB0byBNZXNzYWdlXG4gICAgICogU2VydmljZSAoTU5TKSBmb3IgbWVzc2FnZSB0cmFuc21pc3Npb24uXG4gICAgICogRkM6IGZvcndhcmRzIGRhdGEgaW4gdGhlIHRvcGljcyB0aGF0IGhhdmUgYmVlbiBwcm9jZXNzZWQgYnkgdGhlIHJ1bGUgZW5naW5lIHRvIEZ1bmN0aW9uXG4gICAgICogQ29tcHV0ZSBmb3IgZXZlbnQgY29tcHV0aW5nLlxuICAgICAqIFJFUFVCTElTSDogZm9yd2FyZHMgZGF0YSBpbiB0aGUgdG9waWNzIHRoYXQgaGF2ZSBiZWVuIHByb2Nlc3NlZCBieSB0aGUgcnVsZSBlbmdpbmUgdG8gYW5vdGhlclxuICAgICAqIElvVCBQbGF0Zm9ybSB0b3BpYy5cbiAgICAgKiBBTVFQOiBmb3J3YXJkcyBkYXRhIHRvIEFNUVAgY29uc3VtZXIgZ3JvdXBzLlxuICAgICAqIE9UUzogZm9yd2FyZHMgZGF0YSBpbiB0aGUgdG9waWNzIHRoYXQgaGF2ZSBiZWVuIHByb2Nlc3NlZCBieSB0aGUgcnVsZSBlbmdpbmUgdG8gVGFibGVcbiAgICAgKiBTdG9yZSBmb3IgTm9TUUwgZGF0YSBzdG9yYWdlLlxuICAgICAqIE5vdGVcbiAgICAgKiBSdWxlcyBvZiB0aGUgYmluYXJ5IGRhdGEgZm9ybWF0ICh0aGUgRGF0YVR5cGUgcGFyYW1ldGVyIGlzIHNldCB0b0JJTkFSWSkgZG8gbm90IHN1cHBvcnQgZm9yd2FyZGluZyBkYXRhIHRvIFRhYmxlIFN0b3JlLlxuICAgICAqIERlc3RpbmF0aW9uIEFsaWJhYmEgQ2xvdWQgc2VydmljZXMgdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHRoZSBydWxlIGVuZ2luZSB2YXJ5IGJhc2VkXG4gICAgICogb24gcmVnaW9ucy4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlZ2lvbnMgYW5kIGRlc3RpbmF0aW9uIGNsb3VkIHNlcnZpY2VzXG4gICAgICogdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHRoZSBydWxlIGVuZ2luZSwgc2VlIFJlZ2lvbnMgYW5kIHpvbmVzLlxuICAgICAqL1xuICAgIHB1YmxpYyB0eXBlOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZXJyb3JBY3Rpb25GbGFnOiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcnVsZSBhY3Rpb24gZm9yd2FyZGVkIGVycm9yIG9wZXJhdGlvbiBkYXRhLiBFcnJvciBvcGVyYXRpb25cbiAgICAgKiBkYXRhIGluZGljYXRlcyB0aGF0IHRoZSBydWxlIGVuZ2luZSBmYWlsZWQgdG8gZm9yd2FyZCBkYXRhIGZyb20gdGhlIElvVCBQbGF0Zm9ybSB0b3BpY1xuICAgICAqIHRvIHRoZSBkZXN0aW5hdGlvbiBjbG91ZCBzZXJ2aWNlLiBBIGRhdGEgZm9yd2FyZGluZyBmYWlsdXJlIGluZGljYXRlcyB0aGF0IGZvcndhcmRpbmdcbiAgICAgKiByZXRyaWVzIGFsc28gZmFpbGVkLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogdHJ1ZTogZm9yd2FyZHMgZXJyb3Igb3BlcmF0aW9uIGRhdGEuXG4gICAgICogZmFsc2U6IGZvcndhcmRzIG5vcm1hbCBkYXRhIGluc3RlYWQgb2YgZXJyb3Igb3BlcmF0aW9uIGRhdGEuXG4gICAgICogRGVmYXVsdCB2YWx1ZTogZmFsc2UuXG4gICAgICovXG4gICAgcHVibGljIGVycm9yQWN0aW9uRmxhZzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBpb3RJbnN0YW5jZUlkOiBUaGUgSUQgb2YgdGhlIGluc3RhbmNlLiBUaGlzIHBhcmFtZXRlciBpcyBub3QgcmVxdWlyZWQgZm9yIHB1YmxpYyBpbnN0YW5jZXMuIEhvd2V2ZXIsXG4gICAgICogdGhlIHBhcmFtZXRlciBpcyByZXF1aXJlZCBmb3IgdGhlIGluc3RhbmNlcyB0aGF0IHlvdSBoYXZlIHB1cmNoYXNlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgaW90SW5zdGFuY2VJZDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNjb3BlIC0gc2NvcGUgaW4gd2hpY2ggdGhpcyByZXNvdXJjZSBpcyBkZWZpbmVkXG4gICAgICogQHBhcmFtIGlkICAgIC0gc2NvcGVkIGlkIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBwcm9wcyAtIHJlc291cmNlIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY29wZTogcm9zLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFJvc1J1bGVBY3Rpb25Qcm9wcywgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pIHtcbiAgICAgICAgc3VwZXIoc2NvcGUsIGlkLCB7IHR5cGU6IFJvc1J1bGVBY3Rpb24uUk9TX1JFU09VUkNFX1RZUEVfTkFNRSwgcHJvcGVydGllczogcHJvcHMgfSk7XG4gICAgICAgIHRoaXMuYXR0ckFjdGlvbklkID0gdGhpcy5nZXRBdHQoJ0FjdGlvbklkJyk7XG5cbiAgICAgICAgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCA9IGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50O1xuICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb24gPSBwcm9wcy5jb25maWd1cmF0aW9uO1xuICAgICAgICB0aGlzLnJ1bGVJZCA9IHByb3BzLnJ1bGVJZDtcbiAgICAgICAgdGhpcy50eXBlID0gcHJvcHMudHlwZTtcbiAgICAgICAgdGhpcy5lcnJvckFjdGlvbkZsYWcgPSBwcm9wcy5lcnJvckFjdGlvbkZsYWc7XG4gICAgICAgIHRoaXMuaW90SW5zdGFuY2VJZCA9IHByb3BzLmlvdEluc3RhbmNlSWQ7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29uZmlndXJhdGlvbjogdGhpcy5jb25maWd1cmF0aW9uLFxuICAgICAgICAgICAgcnVsZUlkOiB0aGlzLnJ1bGVJZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGVycm9yQWN0aW9uRmxhZzogdGhpcy5lcnJvckFjdGlvbkZsYWcsXG4gICAgICAgICAgICBpb3RJbnN0YW5jZUlkOiB0aGlzLmlvdEluc3RhbmNlSWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHByb3RlY3RlZCByZW5kZXJQcm9wZXJ0aWVzKHByb3BzOiB7W2tleTogc3RyaW5nXTogYW55fSk6IHsgW2tleTogc3RyaW5nXTogYW55IH0gIHtcbiAgICAgICAgcmV0dXJuIHJvc1J1bGVBY3Rpb25Qcm9wc1RvUm9zVGVtcGxhdGUocHJvcHMsIHRoaXMuZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQpO1xuICAgIH1cbn1cbiJdfQ==