"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Instance = exports.InstanceProperty = void 0;
const ros = require("@alicloud/ros-cdk-core");
const ecs_generated_1 = require("./ecs.generated");
Object.defineProperty(exports, "InstanceProperty", { enumerable: true, get: function () { return ecs_generated_1.RosInstance; } });
const vpc_1 = require("./vpc");
const vswitch_1 = require("./vswitch");
const securitygroup_1 = require("./securitygroup");
/**
 * This class encapsulates and extends the ROS resource type `ALIYUN::ECS::Instance`.
 * @Note This class may have some new functions to facilitate development, so it is recommended to use this class instead of `RosInstance`for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-ecs-instance
 */
class Instance extends ros.Resource {
    /**
     * Create prerequisite resource(s) required to an ECS instance: VPC, VSwitch, and(or) security group.
     * @param zoneId Required when creating a VSwitch.
     * @param vpcCidrBlock Optional when creating a VPC. Default value is 192.168.0.0/16.
     * @param vSwitchCidrBlock Optional when creating a VSwitch. Default value is 192.168.0.0/24.
     * @param whetherCreateSecurityGroup Whether to create a security group. Default value is true.
     */
    autoCreateDependencies(zoneId = undefined, vpcCidrBlock = undefined, vSwitchCidrBlock = undefined, whetherCreateSecurityGroup = true) {
        let vpc = undefined;
        let vSwitch = undefined;
        let securityGroup = undefined;
        let vpcId = undefined;
        let vSwitchId = undefined;
        let securityGroupId = undefined;
        let instance = this.resource;
        if (instance.vSwitchId === undefined) {
            zoneId = zoneId || instance.zoneId;
            if (zoneId === undefined) {
                throw new Error('zoneId is required when creating a VSwitch.');
            }
            if (instance.vpcId === undefined) {
                if ((vpcCidrBlock === undefined) !== (vSwitchCidrBlock === undefined)) {
                    throw new Error('Both vpcCidrBlock and vSwitchCidrBlock must be specified or neither.');
                }
                vpcCidrBlock = vpcCidrBlock || '192.168.0.0/16';
                vpc = new vpc_1.Vpc(this.scope, `AutoCreatedVpcFor${this.id}`, {
                    cidrBlock: vpcCidrBlock,
                    description: 'This is auto created by ROS-CDK.',
                });
                vpcId = vpc.attrVpcId;
            }
            else {
                vpcId = instance.vpcId;
                if (vSwitchCidrBlock === undefined) {
                    throw new Error('vSwitchCidrBlock is mandatory when giving a Vpc and creating a VSwitch.');
                }
            }
            vSwitchCidrBlock = vSwitchCidrBlock || '192.168.0.0/24';
            vSwitch = new vswitch_1.VSwitch(this.scope, `AutoCreatedVSwitchFor${this.id}`, {
                vpcId: vpcId,
                cidrBlock: vSwitchCidrBlock,
                description: 'This is auto created by ROS-CDK.',
                zoneId: zoneId,
            });
            vSwitchId = vSwitch.attrVSwitchId;
        }
        else {
            vSwitchId = instance.vSwitchId;
        }
        if (whetherCreateSecurityGroup && instance.securityGroupId === undefined && instance.securityGroupIds === undefined) {
            securityGroup = new securitygroup_1.SecurityGroup(this.scope, `AutoCreatedSecurityGroupFor${this.id}`, {
                vpcId: vpcId,
                description: 'This is auto created by ROS-CDK.',
            });
            securityGroupId = securityGroup.attrSecurityGroupId;
        }
        else {
            securityGroupId = instance.securityGroupId;
        }
        instance.vpcId = vpcId;
        instance.vSwitchId = vSwitchId;
        instance.securityGroupId = securityGroupId;
        return [vpc, vSwitch, securityGroup];
    }
    /**
     * Add one or more security groups to an ECS instance.
     * @param securityGroups Security groups or security group IDs.
     */
    addSecurityGroups(...securityGroups) {
        let instance = this.resource;
        let originalSecurityGroupIds = instance.securityGroupIds;
        let newSecurityGroupIds = [];
        if (instance.securityGroupId !== undefined) {
            newSecurityGroupIds.push(instance.securityGroupId);
        }
        for (let securityGroup of securityGroups) {
            if (typeof securityGroup === 'string') {
                newSecurityGroupIds.push(securityGroup);
            }
            else {
                newSecurityGroupIds.push(securityGroup.attrSecurityGroupId);
            }
        }
        if (ros.isResolvableObject(originalSecurityGroupIds)) {
            newSecurityGroupIds = ros.Fn.listMerge([originalSecurityGroupIds, newSecurityGroupIds]);
        }
        else if (originalSecurityGroupIds !== undefined) {
            newSecurityGroupIds = originalSecurityGroupIds.concat(newSecurityGroupIds);
        }
        instance.securityGroupId = undefined;
        instance.securityGroupIds = newSecurityGroupIds;
    }
    /**
     * Add one or more commands to the userdata of an ECS instance.
     * @param commands Commands to be added.
     */
    addUserDataCommands(...commands) {
        let instance = this.resource;
        let commandsAsString = [];
        if (instance.userData !== undefined) {
            commandsAsString.push(instance.userData);
        }
        for (let command of commands) {
            if (ros.isResolvableObject(command)) {
                command = command.toString();
            }
            commandsAsString.push(command);
        }
        instance.userData = ros.Fn.join('\n', commandsAsString);
    }
    /**
     * Param scope - scope in which this resource is defined
     * Param id    - scoped id of the resource
     * Param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint = true) {
        super(scope, id);
        this.scope = scope;
        this.id = id;
        this.props = props;
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        const rosInstance = new ecs_generated_1.RosInstance(this, id, {
            dedicatedHostId: props.dedicatedHostId,
            resourceGroupId: props.resourceGroupId,
            systemDiskDescription: props.systemDiskDescription,
            instanceChargeType: props.instanceChargeType === undefined || props.instanceChargeType === null ? 'PostPaid' : props.instanceChargeType,
            ramRoleName: props.ramRoleName,
            privatePoolOptions: props.privatePoolOptions,
            systemDiskPerformanceLevel: props.systemDiskPerformanceLevel,
            imageId: props.imageId,
            systemDiskDiskName: props.systemDiskDiskName,
            storageSetId: props.storageSetId,
            useAdditionalService: props.useAdditionalService,
            hostName: props.hostName,
            tags: props.tags,
            vSwitchId: props.vSwitchId,
            period: props.period === undefined || props.period === null ? 1 : props.period,
            imageFamily: props.imageFamily,
            deletionProtection: props.deletionProtection,
            httpEndpoint: props.httpEndpoint,
            securityGroupIds: props.securityGroupIds,
            internetChargeType: props.internetChargeType === undefined || props.internetChargeType === null ? 'PayByTraffic' : props.internetChargeType,
            spotInterruptionBehavior: props.spotInterruptionBehavior === undefined || props.spotInterruptionBehavior === null ? 'Terminate' : props.spotInterruptionBehavior,
            instanceName: props.instanceName,
            deploymentSetId: props.deploymentSetId,
            internetMaxBandwidthOut: props.internetMaxBandwidthOut === undefined || props.internetMaxBandwidthOut === null ? 1 : props.internetMaxBandwidthOut,
            vpcId: props.vpcId,
            affinity: props.affinity,
            securityEnhancementStrategy: props.securityEnhancementStrategy,
            periodUnit: props.periodUnit === undefined || props.periodUnit === null ? 'Month' : props.periodUnit,
            tenancy: props.tenancy,
            privateIpAddress: props.privateIpAddress,
            description: props.description,
            diskMappings: props.diskMappings,
            systemDiskSize: props.systemDiskSize,
            userData: props.userData,
            autoRenew: props.autoRenew === undefined || props.autoRenew === null ? 'False' : props.autoRenew,
            spotDuration: props.spotDuration,
            storageSetPartitionNumber: props.storageSetPartitionNumber,
            spotPriceLimit: props.spotPriceLimit,
            zoneIds: props.zoneIds,
            instanceType: props.instanceType,
            allocatePublicIp: props.allocatePublicIp === undefined || props.allocatePublicIp === null ? true : props.allocatePublicIp,
            spotStrategy: props.spotStrategy,
            passwordInherit: props.passwordInherit,
            password: props.password,
            autoRenewPeriod: props.autoRenewPeriod === undefined || props.autoRenewPeriod === null ? 1 : props.autoRenewPeriod,
            keyPairName: props.keyPairName,
            ioOptimized: props.ioOptimized === undefined || props.ioOptimized === null ? 'optimized' : props.ioOptimized,
            zoneId: props.zoneId,
            subscriptionDeletionForce: props.subscriptionDeletionForce === undefined || props.subscriptionDeletionForce === null ? false : props.subscriptionDeletionForce,
            hpcClusterId: props.hpcClusterId,
            securityGroupId: props.securityGroupId,
            deploymentSetGroupNo: props.deploymentSetGroupNo,
            systemDiskCategory: props.systemDiskCategory === undefined || props.systemDiskCategory === null ? 'cloud_efficiency' : props.systemDiskCategory,
            httpTokens: props.httpTokens,
            creditSpecification: props.creditSpecification,
        }, enableResourcePropertyConstraint && this.stack.enableResourcePropertyConstraint);
        this.resource = rosInstance;
        this.attrHostName = rosInstance.attrHostName;
        this.attrInnerIp = rosInstance.attrInnerIp;
        this.attrInstanceId = rosInstance.attrInstanceId;
        this.attrPrimaryNetworkInterfaceId = rosInstance.attrPrimaryNetworkInterfaceId;
        this.attrPrivateIp = rosInstance.attrPrivateIp;
        this.attrPublicIp = rosInstance.attrPublicIp;
        this.attrSecurityGroupIds = rosInstance.attrSecurityGroupIds;
        this.attrZoneId = rosInstance.attrZoneId;
    }
}
exports.Instance = Instance;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5zdGFuY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbnN0YW5jZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSw4Q0FBOEM7QUFDOUMsbURBQThDO0FBRXRCLGlHQUZmLDJCQUFXLE9BRW9CO0FBQ3hDLCtCQUE0QjtBQUM1Qix1Q0FBb0M7QUFDcEMsbURBQWdEO0FBaVdoRDs7OztHQUlHO0FBQ0gsTUFBYSxRQUFTLFNBQVEsR0FBRyxDQUFDLFFBQVE7SUE4Q3RDOzs7Ozs7T0FNRztJQUNJLHNCQUFzQixDQUFDLFNBQStDLFNBQVMsRUFDeEQsZUFBbUMsU0FBUyxFQUM1QyxtQkFBdUMsU0FBUyxFQUNoRCw2QkFBc0MsSUFBSTtRQUNwRSxJQUFJLEdBQUcsR0FBRyxTQUFTLENBQUM7UUFDcEIsSUFBSSxPQUFPLEdBQUcsU0FBUyxDQUFDO1FBQ3hCLElBQUksYUFBYSxHQUFHLFNBQVMsQ0FBQztRQUM5QixJQUFJLEtBQUssR0FBeUMsU0FBUyxDQUFDO1FBQzVELElBQUksU0FBUyxHQUF5QyxTQUFTLENBQUM7UUFDaEUsSUFBSSxlQUFlLEdBQXlDLFNBQVMsQ0FBQztRQUN0RSxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBdUIsQ0FBQztRQUU1QyxJQUFJLFFBQVEsQ0FBQyxTQUFTLEtBQUssU0FBUyxFQUFFO1lBQ2xDLE1BQU0sR0FBRyxNQUFNLElBQUksUUFBUSxDQUFDLE1BQU0sQ0FBQztZQUNuQyxJQUFJLE1BQU0sS0FBSyxTQUFTLEVBQUU7Z0JBQ3RCLE1BQU0sSUFBSSxLQUFLLENBQUMsNkNBQTZDLENBQUMsQ0FBQzthQUNsRTtZQUNELElBQUksUUFBUSxDQUFDLEtBQUssS0FBSyxTQUFTLEVBQUU7Z0JBQzlCLElBQUksQ0FBQyxZQUFZLEtBQUssU0FBUyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsS0FBSyxTQUFTLENBQUMsRUFBRTtvQkFDbkUsTUFBTSxJQUFJLEtBQUssQ0FBQyxzRUFBc0UsQ0FBQyxDQUFDO2lCQUMzRjtnQkFDRCxZQUFZLEdBQUcsWUFBWSxJQUFJLGdCQUFnQixDQUFDO2dCQUNoRCxHQUFHLEdBQUcsSUFBSSxTQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxvQkFBb0IsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFO29CQUNyRCxTQUFTLEVBQUUsWUFBWTtvQkFDdkIsV0FBVyxFQUFFLGtDQUFrQztpQkFDbEQsQ0FBQyxDQUFDO2dCQUNILEtBQUssR0FBRyxHQUFHLENBQUMsU0FBUyxDQUFDO2FBQ3pCO2lCQUFNO2dCQUNILEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFBO2dCQUN0QixJQUFJLGdCQUFnQixLQUFLLFNBQVMsRUFBRTtvQkFDaEMsTUFBTSxJQUFJLEtBQUssQ0FBQyx5RUFBeUUsQ0FBQyxDQUFDO2lCQUM5RjthQUNKO1lBQ0QsZ0JBQWdCLEdBQUcsZ0JBQWdCLElBQUksZ0JBQWdCLENBQUM7WUFDeEQsT0FBTyxHQUFHLElBQUksaUJBQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLHdCQUF3QixJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUU7Z0JBQ2pFLEtBQUssRUFBRSxLQUFLO2dCQUNaLFNBQVMsRUFBRSxnQkFBZ0I7Z0JBQzNCLFdBQVcsRUFBRSxrQ0FBa0M7Z0JBQy9DLE1BQU0sRUFBRSxNQUFNO2FBQ2pCLENBQUMsQ0FBQztZQUNILFNBQVMsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDO1NBQ3JDO2FBQU07WUFDSCxTQUFTLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQztTQUNsQztRQUVELElBQUksMEJBQTBCLElBQUksUUFBUSxDQUFDLGVBQWUsS0FBSyxTQUFTLElBQUksUUFBUSxDQUFDLGdCQUFnQixLQUFLLFNBQVMsRUFBRTtZQUNqSCxhQUFhLEdBQUcsSUFBSSw2QkFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsOEJBQThCLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRTtnQkFDbkYsS0FBSyxFQUFFLEtBQUs7Z0JBQ1osV0FBVyxFQUFFLGtDQUFrQzthQUNsRCxDQUFDLENBQUM7WUFDSCxlQUFlLEdBQUcsYUFBYSxDQUFDLG1CQUFtQixDQUFDO1NBQ3ZEO2FBQU07WUFDSCxlQUFlLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQztTQUM5QztRQUVELFFBQVEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO1FBQ3RCLFFBQVEsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFBO1FBQzlCLFFBQVEsQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO1FBRTNDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRDs7O09BR0c7SUFDSSxpQkFBaUIsQ0FBQyxHQUFHLGNBQTBDO1FBQ2xFLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxRQUF1QixDQUFDO1FBQzVDLElBQUksd0JBQXdCLEdBQUcsUUFBUSxDQUFDLGdCQUFnQixDQUFDO1FBQ3pELElBQUksbUJBQW1CLEdBQXNELEVBQUUsQ0FBQztRQUNoRixJQUFJLFFBQVEsQ0FBQyxlQUFlLEtBQUssU0FBUyxFQUFFO1lBQ3hDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUM7U0FDdEQ7UUFDRCxLQUFLLElBQUksYUFBYSxJQUFJLGNBQWMsRUFBRTtZQUN0QyxJQUFJLE9BQU8sYUFBYSxLQUFLLFFBQVEsRUFBRTtnQkFDbkMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2FBQzNDO2lCQUFNO2dCQUNILG1CQUFtQixDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsbUJBQW1CLENBQUMsQ0FBQzthQUMvRDtTQUNKO1FBQ0QsSUFBSSxHQUFHLENBQUMsa0JBQWtCLENBQUMsd0JBQXdCLENBQUMsRUFBRTtZQUNsRCxtQkFBbUIsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLHdCQUF3QixFQUFFLG1CQUFtQixDQUFDLENBQUMsQ0FBQztTQUMzRjthQUFNLElBQUksd0JBQXdCLEtBQUssU0FBUyxFQUFFO1lBQy9DLG1CQUFtQixHQUFHLHdCQUF3QixDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1NBQzlFO1FBRUQsUUFBUSxDQUFDLGVBQWUsR0FBRyxTQUFTLENBQUM7UUFDckMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLG1CQUFtQixDQUFDO0lBQ3BELENBQUM7SUFFRDs7O09BR0c7SUFDSSxtQkFBbUIsQ0FBQyxHQUFHLFFBQXNDO1FBQ2hFLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxRQUF1QixDQUFDO1FBQzVDLElBQUksZ0JBQWdCLEdBQWlDLEVBQUUsQ0FBQztRQUN4RCxJQUFJLFFBQVEsQ0FBQyxRQUFRLEtBQUssU0FBUyxFQUFFO1lBQ2pDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDNUM7UUFDRCxLQUFLLElBQUksT0FBTyxJQUFJLFFBQVEsRUFBRTtZQUMxQixJQUFJLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsRUFBRTtnQkFDakMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQzthQUNoQztZQUNELGdCQUFnQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNsQztRQUNELFFBQVEsQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLGdCQUFnQixDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVEOzs7O09BSUc7SUFDSCxZQUFZLEtBQW9CLEVBQUUsRUFBVSxFQUFFLEtBQW9CLEVBQUUsbUNBQTJDLElBQUk7UUFDL0csS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxnQ0FBZ0MsR0FBRyxnQ0FBZ0MsQ0FBQztRQUV6RSxNQUFNLFdBQVcsR0FBRyxJQUFJLDJCQUFXLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRztZQUMzQyxlQUFlLEVBQUUsS0FBSyxDQUFDLGVBQWU7WUFDdEMsZUFBZSxFQUFFLEtBQUssQ0FBQyxlQUFlO1lBQ3RDLHFCQUFxQixFQUFFLEtBQUssQ0FBQyxxQkFBcUI7WUFDbEQsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLGtCQUFrQixLQUFLLFNBQVMsSUFBSSxLQUFLLENBQUMsa0JBQWtCLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxrQkFBa0I7WUFDdkksV0FBVyxFQUFFLEtBQUssQ0FBQyxXQUFXO1lBQzlCLGtCQUFrQixFQUFFLEtBQUssQ0FBQyxrQkFBa0I7WUFDNUMsMEJBQTBCLEVBQUUsS0FBSyxDQUFDLDBCQUEwQjtZQUM1RCxPQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU87WUFDdEIsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLGtCQUFrQjtZQUM1QyxZQUFZLEVBQUUsS0FBSyxDQUFDLFlBQVk7WUFDaEMsb0JBQW9CLEVBQUUsS0FBSyxDQUFDLG9CQUFvQjtZQUNoRCxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7WUFDeEIsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJO1lBQ2hCLFNBQVMsRUFBRSxLQUFLLENBQUMsU0FBUztZQUMxQixNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU0sS0FBSyxTQUFTLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU07WUFDOUUsV0FBVyxFQUFFLEtBQUssQ0FBQyxXQUFXO1lBQzlCLGtCQUFrQixFQUFFLEtBQUssQ0FBQyxrQkFBa0I7WUFDNUMsWUFBWSxFQUFFLEtBQUssQ0FBQyxZQUFZO1lBQ2hDLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxnQkFBZ0I7WUFDeEMsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLGtCQUFrQixLQUFLLFNBQVMsSUFBSSxLQUFLLENBQUMsa0JBQWtCLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxrQkFBa0I7WUFDM0ksd0JBQXdCLEVBQUUsS0FBSyxDQUFDLHdCQUF3QixLQUFLLFNBQVMsSUFBSSxLQUFLLENBQUMsd0JBQXdCLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyx3QkFBd0I7WUFDaEssWUFBWSxFQUFFLEtBQUssQ0FBQyxZQUFZO1lBQ2hDLGVBQWUsRUFBRSxLQUFLLENBQUMsZUFBZTtZQUN0Qyx1QkFBdUIsRUFBRSxLQUFLLENBQUMsdUJBQXVCLEtBQUssU0FBUyxJQUFJLEtBQUssQ0FBQyx1QkFBdUIsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLHVCQUF1QjtZQUNsSixLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUs7WUFDbEIsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO1lBQ3hCLDJCQUEyQixFQUFFLEtBQUssQ0FBQywyQkFBMkI7WUFDOUQsVUFBVSxFQUFFLEtBQUssQ0FBQyxVQUFVLEtBQUssU0FBUyxJQUFJLEtBQUssQ0FBQyxVQUFVLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxVQUFVO1lBQ3BHLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTztZQUN0QixnQkFBZ0IsRUFBRSxLQUFLLENBQUMsZ0JBQWdCO1lBQ3hDLFdBQVcsRUFBRSxLQUFLLENBQUMsV0FBVztZQUM5QixZQUFZLEVBQUUsS0FBSyxDQUFDLFlBQVk7WUFDaEMsY0FBYyxFQUFFLEtBQUssQ0FBQyxjQUFjO1lBQ3BDLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUTtZQUN4QixTQUFTLEVBQUUsS0FBSyxDQUFDLFNBQVMsS0FBSyxTQUFTLElBQUksS0FBSyxDQUFDLFNBQVMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVM7WUFDaEcsWUFBWSxFQUFFLEtBQUssQ0FBQyxZQUFZO1lBQ2hDLHlCQUF5QixFQUFFLEtBQUssQ0FBQyx5QkFBeUI7WUFDMUQsY0FBYyxFQUFFLEtBQUssQ0FBQyxjQUFjO1lBQ3BDLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTztZQUN0QixZQUFZLEVBQUUsS0FBSyxDQUFDLFlBQVk7WUFDaEMsZ0JBQWdCLEVBQUUsS0FBSyxDQUFDLGdCQUFnQixLQUFLLFNBQVMsSUFBSSxLQUFLLENBQUMsZ0JBQWdCLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0I7WUFDekgsWUFBWSxFQUFFLEtBQUssQ0FBQyxZQUFZO1lBQ2hDLGVBQWUsRUFBRSxLQUFLLENBQUMsZUFBZTtZQUN0QyxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVE7WUFDeEIsZUFBZSxFQUFFLEtBQUssQ0FBQyxlQUFlLEtBQUssU0FBUyxJQUFJLEtBQUssQ0FBQyxlQUFlLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxlQUFlO1lBQ2xILFdBQVcsRUFBRSxLQUFLLENBQUMsV0FBVztZQUM5QixXQUFXLEVBQUUsS0FBSyxDQUFDLFdBQVcsS0FBSyxTQUFTLElBQUksS0FBSyxDQUFDLFdBQVcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFdBQVc7WUFDNUcsTUFBTSxFQUFFLEtBQUssQ0FBQyxNQUFNO1lBQ3BCLHlCQUF5QixFQUFFLEtBQUssQ0FBQyx5QkFBeUIsS0FBSyxTQUFTLElBQUksS0FBSyxDQUFDLHlCQUF5QixLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMseUJBQXlCO1lBQzlKLFlBQVksRUFBRSxLQUFLLENBQUMsWUFBWTtZQUNoQyxlQUFlLEVBQUUsS0FBSyxDQUFDLGVBQWU7WUFDdEMsb0JBQW9CLEVBQUUsS0FBSyxDQUFDLG9CQUFvQjtZQUNoRCxrQkFBa0IsRUFBRSxLQUFLLENBQUMsa0JBQWtCLEtBQUssU0FBUyxJQUFJLEtBQUssQ0FBQyxrQkFBa0IsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsa0JBQWtCO1lBQy9JLFVBQVUsRUFBRSxLQUFLLENBQUMsVUFBVTtZQUM1QixtQkFBbUIsRUFBRSxLQUFLLENBQUMsbUJBQW1CO1NBQ2pELEVBQUUsZ0NBQWdDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO1FBQ3BGLElBQUksQ0FBQyxRQUFRLEdBQUcsV0FBVyxDQUFDO1FBQzVCLElBQUksQ0FBQyxZQUFZLEdBQUcsV0FBVyxDQUFDLFlBQVksQ0FBQztRQUM3QyxJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQyxXQUFXLENBQUM7UUFDM0MsSUFBSSxDQUFDLGNBQWMsR0FBRyxXQUFXLENBQUMsY0FBYyxDQUFDO1FBQ2pELElBQUksQ0FBQyw2QkFBNkIsR0FBRyxXQUFXLENBQUMsNkJBQTZCLENBQUM7UUFDL0UsSUFBSSxDQUFDLGFBQWEsR0FBRyxXQUFXLENBQUMsYUFBYSxDQUFDO1FBQy9DLElBQUksQ0FBQyxZQUFZLEdBQUcsV0FBVyxDQUFDLFlBQVksQ0FBQztRQUM3QyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsV0FBVyxDQUFDLG9CQUFvQixDQUFDO1FBQzdELElBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDLFVBQVUsQ0FBQztJQUM3QyxDQUFDO0NBQ0o7QUFqUEQsNEJBaVBDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgcm9zIGZyb20gJ0BhbGljbG91ZC9yb3MtY2RrLWNvcmUnO1xuaW1wb3J0IHsgUm9zSW5zdGFuY2UgfSBmcm9tICcuL2Vjcy5nZW5lcmF0ZWQnO1xuLy8gR2VuZXJhdGVkIGZyb20gdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBTcGVjaWZpY2F0aW9uXG5leHBvcnQgeyBSb3NJbnN0YW5jZSBhcyBJbnN0YW5jZVByb3BlcnR5IH07XG5pbXBvcnQgeyBWcGMgfSBmcm9tICcuL3ZwYyc7XG5pbXBvcnQgeyBWU3dpdGNoIH0gZnJvbSAnLi92c3dpdGNoJztcbmltcG9ydCB7IFNlY3VyaXR5R3JvdXAgfSBmcm9tICcuL3NlY3VyaXR5Z3JvdXAnO1xuXG5cbi8qKlxuICogUHJvcGVydGllcyBmb3IgZGVmaW5pbmcgYSBgSW5zdGFuY2VgLlxuICogU2VlIGh0dHBzOi8vd3d3LmFsaWJhYmFjbG91ZC5jb20vaGVscC9yb3MvZGV2ZWxvcGVyLXJlZmVyZW5jZS9hbGl5dW4tZWNzLWluc3RhbmNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdGFuY2VQcm9wcyB7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBpbnN0YW5jZVR5cGU6IEVjcyBpbnN0YW5jZSBzdXBwb3J0ZWQgaW5zdGFuY2UgdHlwZSwgbWFrZSBzdXJlIGl0IHNob3VsZCBiZSBjb3JyZWN0LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGluc3RhbmNlVHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgYWZmaW5pdHk6IFNwZWNpZmllcyB3aGV0aGVyIHRvIGFzc29jaWF0ZSB0aGUgaW5zdGFuY2Ugb24gYSBkZWRpY2F0ZWQgaG9zdCB3aXRoIHRoZSBkZWRpY2F0ZWQgaG9zdC4gVmFsaWQgdmFsdWVzOlxuICAgICAqIC0gKipkZWZhdWx0Kio6IGRvZXMgbm90IGFzc29jaWF0ZSB0aGUgRUNTIGluc3RhbmNlIHdpdGggdGhlIGRlZGljYXRlZCBob3N0LiBXaGVuIHlvdSBzdGFydCBhbiBpbnN0YW5jZSB0aGF0IHdhcyBzdG9wcGVkIGluIGVjb25vbWljYWwgbW9kZSwgdGhlIGluc3RhbmNlIGlzIGF1dG9tYXRpY2FsbHkgZGVwbG95ZWQgdG8gYW5vdGhlciBkZWRpY2F0ZWQgaG9zdCBpbiB0aGUgYXV0b21hdGljIGRlcGxveW1lbnQgcmVzb3VyY2UgcG9vbCBpZiB0aGUgYXZhaWxhYmxlIHJlc291cmNlcyBvZiB0aGUgb3JpZ2luYWwgZGVkaWNhdGVkIGhvc3QgYXJlIGluc3VmZmljaWVudC5cbiAgICAgKiAtICoqaG9zdCoqOiBhc3NvY2lhdGVzIHRoZSBFQ1MgaW5zdGFuY2Ugd2l0aCB0aGUgZGVkaWNhdGVkIGhvc3QuIFdoZW4geW91IHN0YXJ0IGFuIGluc3RhbmNlIHRoYXQgd2FzIHN0b3BwZWQgaW4gZWNvbm9taWNhbCBtb2RlLCB0aGUgaW5zdGFuY2UgcmVtYWlucyBvbiB0aGUgb3JpZ2luYWwgZGVkaWNhdGVkIGhvc3QuIElmIHRoZSBhdmFpbGFibGUgcmVzb3VyY2VzIG9mIHRoZSBvcmlnaW5hbCBkZWRpY2F0ZWQgaG9zdCBhcmUgaW5zdWZmaWNpZW50LCB0aGUgaW5zdGFuY2UgY2Fubm90IHN0YXJ0LlxuICAgICAqIERlZmF1bHQgdmFsdWU6ICoqZGVmYXVsdCoqLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGFmZmluaXR5Pzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgYWxsb2NhdGVQdWJsaWNJcDogVGhlIHB1YmxpYyBpcCBmb3IgZWNzIGluc3RhbmNlLCBpZiBwcm9wZXJ0aWVzIGlzIHRydWUsIHdpbGwgYWxsb2NhdGUgcHVibGljIGlwLiBJZiBwcm9wZXJ0eSBJbnRlcm5ldE1heEJhbmR3aWR0aE91dCBzZXQgdG8gMCwgaXQgd2lsbCBub3QgYXNzaWduIHB1YmxpYyBpcC5cbiAgICAgKi9cbiAgICByZWFkb25seSBhbGxvY2F0ZVB1YmxpY0lwPzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IGF1dG9SZW5ldzogV2hldGhlciByZW5ldyB0aGUgZmVlIGF1dG9tYXRpY2FsbHk/IFdoZW4gdGhlIHBhcmFtZXRlciBJbnN0YW5jZUNoYXJnZVR5cGUgaXMgUHJlUGFpZCwgaXQgd2lsbCB0YWtlIGVmZmVjdC4gUmFuZ2Ugb2YgdmFsdWU6VHJ1ZTogYXV0b21hdGljIHJlbmV3YWwuRmFsc2U6IG5vIGF1dG9tYXRpYyByZW5ld2FsLiBEZWZhdWx0IHZhbHVlIGlzIEZhbHNlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGF1dG9SZW5ldz86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IGF1dG9SZW5ld1BlcmlvZDogVGhlIHRpbWUgcGVyaW9kIG9mIGF1dG8gcmVuZXcuIFdoZW4gdGhlIHBhcmFtZXRlciBJbnN0YW5jZUNoYXJnZVR5cGUgaXMgUHJlUGFpZCwgaXQgd2lsbCB0YWtlIGVmZmVjdC5JdCBjb3VsZCBiZSAxLCAyLCAzLCA2LCAxMiwgMjQsIDM2LCA0OCwgNjAuIERlZmF1bHQgdmFsdWUgaXMgMS5cbiAgICAgKi9cbiAgICByZWFkb25seSBhdXRvUmVuZXdQZXJpb2Q/OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBjcmVkaXRTcGVjaWZpY2F0aW9uOiBUaGUgcGVyZm9ybWFuY2UgbW9kZSBvZiB0aGUgYnVyc3RhYmxlIGluc3RhbmNlLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogLSAqKlN0YW5kYXJkKio6IHRoZSBzdGFuZGFyZCBtb2RlLlxuICAgICAqIC0gKipVbmxpbWl0ZWQqKjogdGhlIHVubGltaXRlZCBtb2RlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGNyZWRpdFNwZWNpZmljYXRpb24/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBkZWRpY2F0ZWRIb3N0SWQ6IHdoaWNoIGRlZGljYXRlZCBob3N0IHdpbGwgYmUgZGVwbG95ZWRcbiAgICAgKi9cbiAgICByZWFkb25seSBkZWRpY2F0ZWRIb3N0SWQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBkZWxldGlvblByb3RlY3Rpb246IFdoZXRoZXIgYW4gaW5zdGFuY2UgY2FuIGJlIHJlbGVhc2VkIG1hbnVhbGx5IHRocm91Z2ggdGhlIGNvbnNvbGUgb3IgQVBJLCBkZWxldGlvbiBwcm90ZWN0aW9uIG9ubHkgc3VwcG9ydCBwb3N0UGFpZCBpbnN0YW5jZVxuICAgICAqL1xuICAgIHJlYWRvbmx5IGRlbGV0aW9uUHJvdGVjdGlvbj86IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBkZXBsb3ltZW50U2V0R3JvdXBObzogVGhlIG51bWJlciBvZiB0aGUgZGVwbG95bWVudCBzZXQgZ3JvdXAgdG8gd2hpY2ggdG8gZGVwbG95IHRoZSBpbnN0YW5jZS4gSWYgdGhlIGRlcGxveW1lbnQgc2V0IHNwZWNpZmllZCBieSAqKkRlcGxveW1lbnRTZXRJZCoqIHVzZXMgdGhlIGhpZ2ggYXZhaWxhYmlsaXR5IGdyb3VwIHN0cmF0ZWd5IChBdmFpbGFiaWxpdHlHcm91cCksIHlvdSBjYW4gdXNlICoqRGVwbG95bWVudFNldEdyb3VwTm8qKiB0byBzcGVjaWZ5IGEgZGVwbG95bWVudCBzZXQgZ3JvdXAgaW4gdGhlIGRlcGxveW1lbnQgc2V0LiBWYWxpZCB2YWx1ZXM6IDEgdG8gNy5cbiAgICAgKi9cbiAgICByZWFkb25seSBkZXBsb3ltZW50U2V0R3JvdXBObz86IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IGRlcGxveW1lbnRTZXRJZDogRGVwbG95bWVudCBzZXQgSUQuXG4gICAgICovXG4gICAgcmVhZG9ubHkgZGVwbG95bWVudFNldElkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgZGVzY3JpcHRpb246IERlc2NyaXB0aW9uIG9mIHRoZSBpbnN0YW5jZSwgWzIsIDI1Nl0gY2hhcmFjdGVycy4gRG8gbm90IGZpbGwgb3IgZW1wdHksIHRoZSBkZWZhdWx0IGlzIGVtcHR5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGRlc2NyaXB0aW9uPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgZGlza01hcHBpbmdzOiBEaXNrIG1hcHBpbmdzIHRvIGF0dGFjaCB0byBpbnN0YW5jZS4gTWF4IHN1cHBvcnQgMTYgZGlza3MuXG4gICAgICogSWYgdGhlIGltYWdlIGNvbnRhaW5zIGEgZGF0YSBkaXNrLCB5b3UgY2FuIHNwZWNpZnkgb3RoZXIgcGFyYW1ldGVycyBvZiB0aGUgZGF0YSBkaXNrIHZpYSB0aGUgc2FtZSB2YWx1ZSBvZiBwYXJhbWV0ZXIgXCJEZXZpY2VcIi4gSWYgcGFyYW1ldGVyIFwiQ2F0ZWdvcnlcIiBpcyBub3Qgc3BlY2lmaWVkLCBpdCB3aWxsIGJlIGNsb3VkX2VmZmljaWVuY3kgaW5zdGVhZCBvZiBcIkNhdGVnb3J5XCIgb2YgZGF0YSBkaXNrIGluIHRoZSBpbWFnZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBkaXNrTWFwcGluZ3M/OiBBcnJheTxSb3NJbnN0YW5jZS5EaXNrTWFwcGluZ3NQcm9wZXJ0eSB8IHJvcy5JUmVzb2x2YWJsZT4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBob3N0TmFtZTogSG9zdCBuYW1lIG9mIGNyZWF0ZWQgZWNzIGluc3RhbmNlLiBhdCBsZWFzdCAyIGNoYXJhY3RlcnMsIGFuZCAnLicgJy0nIElzIG5vdCB0aGUgZmlyc3QgYW5kIGxhc3QgY2hhcmFjdGVycyBhcyBob3N0bmFtZSwgbm90IGNvbnRpbnVvdXMgdXNlLiBXaW5kb3dzIHBsYXRmb3JtIGNhbiBiZSB1cCB0byAxNSBjaGFyYWN0ZXJzLCBhbGxvd2luZyBsZXR0ZXJzICh3aXRob3V0IGxpbWl0aW5nIGNhc2UpLCBudW1iZXJzIGFuZCAnLScsIGFuZCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBudW1iZXIgb2YgcG9pbnRzLCBub3QgYWxsIGlzIGRpZ2l0YWwgKCcuJykuT3RoZXIgKExpbnV4LCBldGMuKSBwbGF0Zm9ybSB1cCB0byA2NCBjaGFyYWN0ZXJzLCBhbGxvd2luZyBzdXBwb3J0IG51bWJlciBtdWx0aXBsZSBwb2ludHMgZm9yIHRoZSBwZXJpb2QgYmV0d2VlbiB0aGUgcG9pbnRzLCBlYWNoIHBlcm1pdCBsZXR0ZXJzICh3aXRob3V0IGxpbWl0aW5nIGNhc2UpLCBudW1iZXJzIGFuZCAnLScgY29tcG9uZW50cy5cbiAgICAgKi9cbiAgICByZWFkb25seSBob3N0TmFtZT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IGhwY0NsdXN0ZXJJZDogVGhlIEhQQyBjbHVzdGVyIElEIHRvIHdoaWNoIHRoZSBpbnN0YW5jZSBiZWxvbmdzLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGhwY0NsdXN0ZXJJZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IGh0dHBFbmRwb2ludDogU3BlY2lmaWVzIHdoZXRoZXIgdGhlIGFjY2VzcyBjaGFubmVsIGlzIGVuYWJsZWQgZm9yIGluc3RhbmNlIG1ldGFkYXRhLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogLSAqKmVuYWJsZWQqKlxuICAgICAqIC0gKipkaXNhYmxlZCoqXG4gICAgICogRGVmYXVsdCB2YWx1ZTogKiplbmFibGVkKiouXG4gICAgICovXG4gICAgcmVhZG9ubHkgaHR0cEVuZHBvaW50Pzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgaHR0cFRva2VuczogU3BlY2lmaWVzIHdoZXRoZXIgdGhlIHNlY3VyaXR5IGhhcmRlbmluZyBtb2RlIChJTURTdjIpIGlzIGZvcmNlZnVsbHkgdXNlZCB0byBhY2Nlc3MgaW5zdGFuY2UgbWV0YWRhdGEuIFZhbGlkIHZhbHVlczpcbiAgICAgKiAtICoqb3B0aW9uYWwqKjogZG9lcyBub3QgZm9yY2VmdWxseSB1c2UgdGhlIHNlY3VyaXR5LWVuaGFuY2VkIG1vZGUgKElNRFN2MikuXG4gICAgICogLSAqKnJlcXVpcmVkKio6IGZvcmNlZnVsbHkgdXNlcyB0aGUgc2VjdXJpdHktZW5oYW5jZWQgbW9kZSAoSU1EU3YyKS4gQWZ0ZXIgeW91IHNldCB0aGlzIHBhcmFtZXRlciB0byByZXF1aXJlZCwgeW91IGNhbm5vdCBhY2Nlc3MgaW5zdGFuY2UgbWV0YWRhdGEgaW4gbm9ybWFsIG1vZGUuXG4gICAgICogRGVmYXVsdCB2YWx1ZTogKipvcHRpb25hbCoqLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGh0dHBUb2tlbnM/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBpbWFnZUZhbWlseTogVGhlIG5hbWUgb2YgdGhlIGltYWdlIGZhbWlseS4gWW91IGNhbiBzZXQgdGhpcyBwYXJhbWV0ZXIgdG8gb2J0YWluIHRoZSBsYXRlc3QgYXZhaWxhYmxlIGN1c3RvbSBpbWFnZSBmcm9tIHRoZSBzcGVjaWZpZWQgaW1hZ2UgZmFtaWx5IHRvIGNyZWF0ZSB0aGUgaW5zdGFuY2UuXG4gICAgICogLSAqKkltYWdlRmFtaWx5KiogbXVzdCBiZSBlbXB0eSBpZiAqKkltYWdlSWQqKiBpcyBzcGVjaWZpZWQuXG4gICAgICogLSAqKkltYWdlRmFtaWx5KiogY2FuIGJlIHNwZWNpZmllZCBpZiAqKkltYWdlSWQqKiBpcyBub3Qgc3BlY2lmaWVkLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGltYWdlRmFtaWx5Pzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgaW1hZ2VJZDogSW1hZ2UgSUQgdG8gY3JlYXRlIGVjcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBpbWFnZUlkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgaW5zdGFuY2VDaGFyZ2VUeXBlOiBJbnN0YW5jZSBDaGFyZ2UgdHlwZSwgYWxsb3dlZCB2YWx1ZTogUHJlcGFpZCBhbmQgUG9zdHBhaWQuIElmIHNwZWNpZmllZCBQcmVwYWlkLCBwbGVhc2UgZW5zdXJlIHlvdSBoYXZlIHN1ZmZpY2llbnQgYmFsYW5jZSBpbiB5b3VyIGFjY291bnQuIE9yIGluc3RhbmNlIGNyZWF0aW9uIHdpbGwgYmUgZmFpbHVyZS4gRGVmYXVsdCB2YWx1ZSBpcyBQb3N0cGFpZC5cbiAgICAgKi9cbiAgICByZWFkb25seSBpbnN0YW5jZUNoYXJnZVR5cGU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBpbnN0YW5jZU5hbWU6IERpc3BsYXkgbmFtZSBvZiB0aGUgaW5zdGFuY2UsIFsyLCAxMjhdIEVuZ2xpc2ggb3IgQ2hpbmVzZSBjaGFyYWN0ZXJzLCBtdXN0IHN0YXJ0IHdpdGggYSBsZXR0ZXIgb3IgQ2hpbmVzZSBpbiBzaXplLCBjYW4gY29udGFpbiBudW1iZXJzLCAnXycgb3IgJy4nLCAnLSdcbiAgICAgKi9cbiAgICByZWFkb25seSBpbnN0YW5jZU5hbWU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBpbnRlcm5ldENoYXJnZVR5cGU6IEluc3RhbmNlIGludGVybmV0IGFjY2VzcyBjaGFyZ2UgdHlwZS5TdXBwb3J0ICdQYXlCeUJhbmR3aWR0aCcgYW5kICdQYXlCeVRyYWZmaWMnIG9ubHkuIERlZmF1bHQgaXMgUGF5QnlUcmFmZmljXG4gICAgICovXG4gICAgcmVhZG9ubHkgaW50ZXJuZXRDaGFyZ2VUeXBlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgaW50ZXJuZXRNYXhCYW5kd2lkdGhPdXQ6IFNldCBpbnRlcm5ldCBvdXRwdXQgYmFuZHdpZHRoIG9mIGluc3RhbmNlLiBVbml0IGlzIE1icHMoTWVnYSBiaXQgcGVyIHNlY29uZCkuIFJhbmdlIGlzIFswLDIwMF0uIERlZmF1bHQgaXMgMS5XaGlsZSB0aGUgcHJvcGVydHkgaXMgbm90IDAsIHB1YmxpYyBpcCB3aWxsIGJlIGFzc2lnbmVkIGZvciBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBpbnRlcm5ldE1heEJhbmR3aWR0aE91dD86IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IGlvT3B0aW1pemVkOiBUaGUgJ29wdGltaXplZCcgaW5zdGFuY2UgY2FuIHByb3ZpZGUgYmV0dGVyIElPIHBlcmZvcm1hbmNlLiBTdXBwb3J0ICdub25lJyBhbmQgJ29wdGltaXplZCcgb25seSwgZGVmYXVsdCBpcyAnb3B0aW1pemVkJy5cbiAgICAgKi9cbiAgICByZWFkb25seSBpb09wdGltaXplZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IGtleVBhaXJOYW1lOiBTU0gga2V5IHBhaXIgbmFtZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBrZXlQYWlyTmFtZT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IHBhc3N3b3JkOiBQYXNzd29yZCBvZiBjcmVhdGVkIGVjcyBpbnN0YW5jZS4gTXVzdCBjb250YWluIGF0IGxlYXN0IDMgdHlwZXMgb2Ygc3BlY2lhbCBjaGFyYWN0ZXIsIGxvd2VyIGNoYXJhY3RlciwgdXBwZXIgY2hhcmFjdGVyLCBudW1iZXIuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcGFzc3dvcmQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBwYXNzd29yZEluaGVyaXQ6IFNwZWNpZmllcyB3aGV0aGVyIHRvIHVzZSB0aGUgcGFzc3dvcmQgcHJlc2V0IGluIHRoZSBpbWFnZS4gVG8gdXNlIHRoZSBQYXNzd29yZEluaGVyaXQgcGFyYW1ldGVyLCB0aGUgUGFzc3dvcmQgcGFyYW1ldGVyIG11c3QgYmUgZW1wdHkgYW5kIHlvdSBtdXN0IG1ha2Ugc3VyZSB0aGF0IHRoZSBzZWxlY3RlZCBpbWFnZSBoYXMgYSBwYXNzd29yZCBjb25maWd1cmVkLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHBhc3N3b3JkSW5oZXJpdD86IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBwZXJpb2Q6IFByZXBhaWQgdGltZSBwZXJpb2QuIFVuaXQgaXMgbW9udGgsIGl0IGNvdWxkIGJlIGZyb20gMSB0byA5IG9yIDEyLCAyNCwgMzYsIDQ4LCA2MC4gRGVmYXVsdCB2YWx1ZSBpcyAxLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHBlcmlvZD86IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IHBlcmlvZFVuaXQ6IFVuaXQgb2YgcHJlcGFpZCB0aW1lIHBlcmlvZCwgaXQgY291bGQgYmUgV2Vla1xcL01vbnRoXFwvWWVhci4gRGVmYXVsdCB2YWx1ZSBpcyBNb250aC5cbiAgICAgKi9cbiAgICByZWFkb25seSBwZXJpb2RVbml0Pzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgcHJpdmF0ZUlwQWRkcmVzczogUHJpdmF0ZSBJUCBmb3IgdGhlIGluc3RhbmNlIGNyZWF0ZWQuIE9ubHkgd29ya3MgZm9yIFZQQyBpbnN0YW5jZSBhbmQgY2Fubm90IGR1cGxpY2F0ZWQgd2l0aCBleGlzdGluZyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBwcml2YXRlSXBBZGRyZXNzPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgcHJpdmF0ZVBvb2xPcHRpb25zOiBUaGUgb3B0aW9ucyBvZiB0aGUgcHJpdmF0ZSBwb29sLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHByaXZhdGVQb29sT3B0aW9ucz86IFJvc0luc3RhbmNlLlByaXZhdGVQb29sT3B0aW9uc1Byb3BlcnR5IHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgcmFtUm9sZU5hbWU6IEluc3RhbmNlIFJBTSByb2xlIG5hbWUuIFRoZSBuYW1lIGlzIHByb3ZpZGVkIGFuZCBtYWludGFpbmVkIGJ5IFJlc291cmNlIEFjY2VzcyBNYW5hZ2VtZW50IChSQU0pIGFuZCBjYW4gYmUgcXVlcmllZCB1c2luZyBMaXN0Um9sZXMuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgUkFNIEFQSSBDcmVhdGVSb2xlIGFuZCBMaXN0Um9sZXMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcmFtUm9sZU5hbWU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSByZXNvdXJjZUdyb3VwSWQ6IFJlc291cmNlIGdyb3VwIGlkLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHJlc291cmNlR3JvdXBJZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IHNlY3VyaXR5RW5oYW5jZW1lbnRTdHJhdGVneTpcbiAgICAgKi9cbiAgICByZWFkb25seSBzZWN1cml0eUVuaGFuY2VtZW50U3RyYXRlZ3k/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBzZWN1cml0eUdyb3VwSWQ6IFNlY3VyaXR5IGdyb3VwIHRvIGNyZWF0ZSBlY3MgaW5zdGFuY2UuIEZvciBjbGFzc2ljIGluc3RhbmNlIG5lZWQgdGhlIHNlY3VyaXR5IGdyb3VwIG5vdCBiZWxvbmcgdG8gVlBDLCBmb3IgVlBDIGluc3RhbmNlLCBwbGVhc2UgbWFrZSBzdXJlIHRoZSBzZWN1cml0eSBncm91cCBiZWxvbmcgdG8gc3BlY2lmaWVkIFZQQy5cbiAgICAgKi9cbiAgICByZWFkb25seSBzZWN1cml0eUdyb3VwSWQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBzZWN1cml0eUdyb3VwSWRzOiBUaGUgSUQgbGlzdCBvZiBzZWN1cml0eSBncm91cCB0byB3aGljaCB0byBhc3NpZ24gdGhlIGluc3RhbmNlLiBUaGUgbWF4IGxlbmd0aCBpcyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2Ygc2VjdXJpdHkgZ3JvdXBzIHRvIHdoaWNoIGFuIGluc3RhbmNlIGNhbiBiZWxvbmcuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIFwiU2VjdXJpdHkgZ3JvdXAgbGltaXRzXCIgc2VjdGlvbiBpbiBMaW1pdHMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgc2VjdXJpdHlHcm91cElkcz86IEFycmF5PHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZT4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBzcG90RHVyYXRpb246IFRoZSBwcm90ZWN0aW9uIHBlcmlvZCBvZiB0aGUgcHJlZW1wdGlibGUgaW5zdGFuY2UuIFVuaXQ6IGhvdXJzLiBWYWxpZCB2YWx1ZXM6IDAsIDEsIDIsIDMsIDQsIDUsIGFuZCA2LlxuICAgICAqIFByb3RlY3Rpb24gcGVyaW9kcyBvZiAyLCAzLCA0LCA1LCBhbmQgNiBob3VycyBhcmUgaW4gaW52aXRhdGlvbmFsIHByZXZpZXcuIElmIHlvdSB3YW50IHRvIHNldCB0aGlzIHBhcmFtZXRlciB0byBvbmUgb2YgdGhlc2UgdmFsdWVzLCBzdWJtaXQgYSB0aWNrZXQuXG4gICAgICogSWYgdGhpcyBwYXJhbWV0ZXIgaXMgc2V0IHRvIDAsIG5vIHByb3RlY3Rpb24gcGVyaW9kIGlzIGNvbmZpZ3VyZWQgZm9yIHRoZSBwcmVlbXB0aWJsZSBpbnN0YW5jZS5cbiAgICAgKiBEZWZhdWx0IHZhbHVlOiAxLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHNwb3REdXJhdGlvbj86IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IHNwb3RJbnRlcnJ1cHRpb25CZWhhdmlvcjogVGhlIGludGVycnVwdGlvbiBtb2RlIG9mIHRoZSBwcmVlbXB0aWJsZSBpbnN0YW5jZS4gRGVmYXVsdCB2YWx1ZTogVGVybWluYXRlLiBTZXQgdGhlIHZhbHVlIHRvIFRlcm1pbmF0ZSwgd2hpY2ggc3BlY2lmaWVzIHRvIHJlbGVhc2UgdGhlIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHNwb3RJbnRlcnJ1cHRpb25CZWhhdmlvcj86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IHNwb3RQcmljZUxpbWl0OiBUaGUgaG91cmx5IHByaWNlIHRocmVzaG9sZCBvZiBhIGluc3RhbmNlLCBhbmQgaXQgdGFrZXMgZWZmZWN0IG9ubHkgd2hlbiBwYXJhbWV0ZXIgSW5zdGFuY2VDaGFyZ2VUeXBlIGlzIFBvc3RQYWlkLiBUaHJlZSBkZWNpbWFscyBpcyBhbGxvd2VkIGF0IG1vc3QuXG4gICAgICovXG4gICAgcmVhZG9ubHkgc3BvdFByaWNlTGltaXQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBzcG90U3RyYXRlZ3k6IFRoZSBzcG90IHN0cmF0ZWd5IG9mIGEgUGF5LUFzLVlvdS1HbyBpbnN0YW5jZSwgYW5kIGl0IHRha2VzIGVmZmVjdCBvbmx5IHdoZW4gcGFyYW1ldGVyIEluc3RhbmNlQ2hhcmdlVHlwZSBpcyBQb3N0UGFpZC4gVmFsdWUgcmFuZ2U6IFwiTm9TcG90OiBBIHJlZ3VsYXIgUGF5LUFzLVlvdS1HbyBpbnN0YW5jZVwiLCBcIlNwb3RXaXRoUHJpY2VMaW1pdDogQSBwcmljZSB0aHJlc2hvbGQgZm9yIGEgc3BvdCBpbnN0YW5jZSwgXCJcIlNwb3RBc1ByaWNlR286IEEgcHJpY2UgdGhhdCBpcyBiYXNlZCBvbiB0aGUgaGlnaGVzdCBQYXktQXMtWW91LUdvIGluc3RhbmNlLiBcIkRlZmF1bHQgdmFsdWU6IE5vU3BvdC5cbiAgICAgKi9cbiAgICByZWFkb25seSBzcG90U3RyYXRlZ3k/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBzdG9yYWdlU2V0SWQ6IFRoZSBzdG9yYWdlIHNldCBJRC5cbiAgICAgKi9cbiAgICByZWFkb25seSBzdG9yYWdlU2V0SWQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBzdG9yYWdlU2V0UGFydGl0aW9uTnVtYmVyOiBUaGUgbWF4aW11bSBudW1iZXIgb2YgcGFydGl0aW9ucyBpbiB0aGUgc3RvcmFnZSBzZXQuIFRoZSB2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAyLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHN0b3JhZ2VTZXRQYXJ0aXRpb25OdW1iZXI/OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBzdWJzY3JpcHRpb25EZWxldGlvbkZvcmNlOiBUaGlzIG9wdGlvbiBpcyBvbmx5IGFwcGxpY2FibGUgdG8gc3Vic2NyaXB0aW9uIGluc3RhbmNlcy4gRm9yIHN1YnNjcmlwdGlvbiBpbnN0YW5jZXMsIGlmIHRoaXMgb3B0aW9uIGlzIHRydWUsIHRoZSBpbnN0YW5jZSB3aWxsIGJlIGNvbnZlcnRlZCB0byBhIHBvc3RwYWlkIGluc3RhbmNlIGJlZm9yZSBiZWluZyBkZWxldGVkLiBJZiBmYWxzZSwgdGhlIGZvcmNlZCBkZWxldGlvbiB3aWxsIG5vdCBiZSBwZXJmb3JtZWQuIFRoaXMgb3BlcmF0aW9uIHdpbGwgaW5jdXIgYWRkaXRpb25hbCBmZWVzLCBzbyBjaG9vc2UgY2FyZWZ1bGx5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHN1YnNjcmlwdGlvbkRlbGV0aW9uRm9yY2U/OiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgc3lzdGVtRGlza0NhdGVnb3J5OiBDYXRlZ29yeSBvZiBzeXN0ZW0gZGlzay4gRGVmYXVsdCBpcyBjbG91ZF9lZmZpY2llbmN5LiBzdXBwb3J0IGNsb3VkfGNsb3VkX2VmZmljaWVuY3l8Y2xvdWRfc3NkfGNsb3VkX2Vzc2R8ZXBoZW1lcmFsX3NzZHxjbG91ZF9hdXRvfGNsb3VkX2Vzc2RfZW50cnlcbiAgICAgKi9cbiAgICByZWFkb25seSBzeXN0ZW1EaXNrQ2F0ZWdvcnk/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSBzeXN0ZW1EaXNrRGVzY3JpcHRpb246IERlc2NyaXB0aW9uIG9mIGNyZWF0ZWQgc3lzdGVtIGRpc2suXG4gICAgICovXG4gICAgcmVhZG9ubHkgc3lzdGVtRGlza0Rlc2NyaXB0aW9uPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgc3lzdGVtRGlza0Rpc2tOYW1lOiBOYW1lIG9mIGNyZWF0ZWQgc3lzdGVtIGRpc2suXG4gICAgICovXG4gICAgcmVhZG9ubHkgc3lzdGVtRGlza0Rpc2tOYW1lPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgc3lzdGVtRGlza1BlcmZvcm1hbmNlTGV2ZWw6IFRoZSBwZXJmb3JtYW5jZSBsZXZlbCBvZiB0aGUgZW5oYW5jZWQgU1NEIHVzZWQgYXMgdGhlIHN5c3RlbSBkaXNrLkRlZmF1bHQgdmFsdWU6IFBMMS4gVmFsaWQgdmFsdWVzOlBMMDogQSBzaW5nbGUgZW5oYW5jZWQgU1NEIGRlbGl2ZXJzIHVwIHRvIDEwLDAwMCByYW5kb20gcmVhZFxcL3dyaXRlIElPUFMuUEwxOiBBIHNpbmdsZSBlbmhhbmNlZCBTU0QgZGVsaXZlcnMgdXAgdG8gNTAsMDAwIHJhbmRvbSByZWFkXFwvd3JpdGUgSU9QUy5QTDI6IEEgc2luZ2xlIGVuaGFuY2VkIFNTRCBkZWxpdmVycyB1cCB0byAxMDAsMDAwIHJhbmRvbSByZWFkXFwvd3JpdGUgSU9QUy5QTDM6IEEgc2luZ2xlIGVuaGFuY2VkIFNTRCBkZWxpdmVycyB1cCB0byAxLDAwMCwwMDAgcmFuZG9tIHJlYWRcXC93cml0ZSBJT1BTLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHN5c3RlbURpc2tQZXJmb3JtYW5jZUxldmVsPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgc3lzdGVtRGlza1NpemU6IERpc2sgc2l6ZSBvZiB0aGUgc3lzdGVtIGRpc2ssIHJhbmdlIGZyb20gMjAgdG8gNTAwIEdCLiBJZiB5b3Ugc3BlY2lmeSB3aXRoIHlvdXIgb3duIGltYWdlLCBtYWtlIHN1cmUgdGhlIHN5c3RlbSBkaXNrIHNpemUgYmlnZ2VyIHRoYW4gaW1hZ2Ugc2l6ZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBzeXN0ZW1EaXNrU2l6ZT86IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IHRhZ3M6IFRhZ3MgdG8gYXR0YWNoIHRvIGluc3RhbmNlLiBNYXggc3VwcG9ydCAyMCB0YWdzIHRvIGFkZCBkdXJpbmcgY3JlYXRlIGluc3RhbmNlLiBFYWNoIHRhZyB3aXRoIHR3byBwcm9wZXJ0aWVzIEtleSBhbmQgVmFsdWUsIGFuZCBLZXkgaXMgcmVxdWlyZWQuXG4gICAgICovXG4gICAgcmVhZG9ubHkgdGFncz86IFJvc0luc3RhbmNlLlRhZ3NQcm9wZXJ0eVtdO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgdGVuYW5jeTogU3BlY2lmaWVzIHdoZXRoZXIgdG8gY3JlYXRlIHRoZSBpbnN0YW5jZSBvbiBhIGRlZGljYXRlZCBob3N0LiBWYWxpZCB2YWx1ZXM6XG4gICAgICogLSAqKmRlZmF1bHQqKjogY3JlYXRlcyB0aGUgaW5zdGFuY2Ugb24gYSBub24tZGVkaWNhdGVkIGhvc3QuXG4gICAgICogLSAqKmhvc3QqKjogY3JlYXRlcyB0aGUgaW5zdGFuY2Ugb24gYSBkZWRpY2F0ZWQgaG9zdC4gSWYgeW91IGRvIG5vdCBzcGVjaWZ5ICoqRGVkaWNhdGVkSG9zdElkKiosIEFsaWJhYmEgQ2xvdWQgc2VsZWN0cyBhIGRlZGljYXRlZCBob3N0IGZvciB0aGUgaW5zdGFuY2UuXG4gICAgICogRGVmYXVsdCB2YWx1ZTogKipkZWZhdWx0KiouXG4gICAgICovXG4gICAgcmVhZG9ubHkgdGVuYW5jeT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IHVzZUFkZGl0aW9uYWxTZXJ2aWNlOiBTcGVjaWZpZXMgd2hldGhlciB0byB1c2UgdGhlIHN5c3RlbSBjb25maWd1cmF0aW9ucyBmb3IgdmlydHVhbCBtYWNoaW5lcyBwcm92aWRlZCBieSBBbGliYWJhIENsb3VkLiBTeXN0ZW0gY29uZmlndXJhdGlvbnMgZm9yIFdpbmRvd3M6IE5UUCBhbmQgS01TLiBTeXN0ZW0gY29uZmlndXJhdGlvbnMgZm9yIExpbnV4OiBOVFAgYW5kIFlVTS5cbiAgICAgKi9cbiAgICByZWFkb25seSB1c2VBZGRpdGlvbmFsU2VydmljZT86IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSB1c2VyRGF0YTogVXNlciBkYXRhIHRvIHBhc3MgdG8gaW5zdGFuY2UuIFsxLCAxNktCXSBjaGFyYWN0ZXJzLlVzZXIgZGF0YSBzaG91bGQgbm90IGJlIGJhc2U2NCBlbmNvZGVkLiBJZiB5b3Ugd2FudCB0byBwYXNzIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB0byB0aGUgcHJvcGVydHksIHVzZSBmdW5jdGlvbiBGbjo6QmFzZTY0RGVjb2RlIHRvIGRlY29kZSB0aGUgYmFzZTY0IHN0cmluZyBmaXJzdC5cbiAgICAgKi9cbiAgICByZWFkb25seSB1c2VyRGF0YT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IHZwY0lkOiBUaGUgVlBDIGlkIHRvIGNyZWF0ZSBlY3MgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcmVhZG9ubHkgdnBjSWQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBQcm9wZXJ0eSB2U3dpdGNoSWQ6IFRoZSB2U3dpdGNoIElkIHRvIGNyZWF0ZSBlY3MgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcmVhZG9ubHkgdlN3aXRjaElkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgem9uZUlkOiBUaGUgSUQgb2YgdGhlIHpvbmUgdG8gd2hpY2ggdGhlIGluc3RhbmNlIGJlbG9uZ3MuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBcbiAgICAgKiBjYWxsIHRoZSBEZXNjcmliZVpvbmVzIG9wZXJhdGlvbiB0byBxdWVyeSB0aGUgbW9zdCByZWNlbnQgem9uZSBsaXN0LiBcbiAgICAgKiBEZWZhdWx0IHZhbHVlIGlzIGVtcHR5LCB3aGljaCBtZWFucyByYW5kb20gc2VsZWN0aW9uLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHpvbmVJZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IHpvbmVJZHM6IFpvbmUgaWRzIGZvciBxdWVyeSBwYXJhbWV0ZXJzXG4gICAgICovXG4gICAgcmVhZG9ubHkgem9uZUlkcz86IEFycmF5PHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZT4gfCByb3MuSVJlc29sdmFibGU7XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGBJbnN0YW5jZWAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUluc3RhbmNlIGV4dGVuZHMgcm9zLklSZXNvdXJjZSB7XG4gICAgcmVhZG9ubHkgcHJvcHM6IEluc3RhbmNlUHJvcHM7XG5cbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGUgSG9zdE5hbWU6IEhvc3QgbmFtZSBvZiBjcmVhdGVkIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGF0dHJIb3N0TmFtZTogcm9zLklSZXNvbHZhYmxlIHwgc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQXR0cmlidXRlIElubmVySXA6IElubmVyIElQIGFkZHJlc3Mgb2YgdGhlIHNwZWNpZmllZCBpbnN0YW5jZS4gT25seSBmb3IgY2xhc3NpY2FsIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGF0dHJJbm5lcklwOiByb3MuSVJlc29sdmFibGUgfCBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGUgSW5zdGFuY2VJZDogVGhlIGluc3RhbmNlIElEIG9mIGNyZWF0ZWQgZWNzIGluc3RhbmNlXG4gICAgICovXG4gICAgcmVhZG9ubHkgYXR0ckluc3RhbmNlSWQ6IHJvcy5JUmVzb2x2YWJsZSB8IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEF0dHJpYnV0ZSBQcmltYXJ5TmV0d29ya0ludGVyZmFjZUlkOiBQcmltYXJ5IG5ldHdvcmsgaW50ZXJmYWNlIElEIG9mIGNyZWF0ZWQgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcmVhZG9ubHkgYXR0clByaW1hcnlOZXR3b3JrSW50ZXJmYWNlSWQ6IHJvcy5JUmVzb2x2YWJsZSB8IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEF0dHJpYnV0ZSBQcml2YXRlSXA6IFByaXZhdGUgSVAgYWRkcmVzcyBvZiBjcmVhdGVkIGVjcyBpbnN0YW5jZS4gT25seSBmb3IgVlBDIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGF0dHJQcml2YXRlSXA6IHJvcy5JUmVzb2x2YWJsZSB8IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEF0dHJpYnV0ZSBQdWJsaWNJcDogUHVibGljIElQIGFkZHJlc3Mgb2YgY3JlYXRlZCBlY3MgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcmVhZG9ubHkgYXR0clB1YmxpY0lwOiByb3MuSVJlc29sdmFibGUgfCBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGUgU2VjdXJpdHlHcm91cElkczogU2VjdXJpdHkgZ3JvdXAgSUQgbGlzdCBvZiBjcmVhdGVkIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGF0dHJTZWN1cml0eUdyb3VwSWRzOiByb3MuSVJlc29sdmFibGUgfCBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGUgWm9uZUlkOiBab25lIElEIG9mIGNyZWF0ZWQgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcmVhZG9ubHkgYXR0clpvbmVJZDogcm9zLklSZXNvbHZhYmxlIHwgc3RyaW5nO1xufVxuLyoqXG4gKiBUaGlzIGNsYXNzIGVuY2Fwc3VsYXRlcyBhbmQgZXh0ZW5kcyB0aGUgUk9TIHJlc291cmNlIHR5cGUgYEFMSVlVTjo6RUNTOjpJbnN0YW5jZWAuXG4gKiBATm90ZSBUaGlzIGNsYXNzIG1heSBoYXZlIHNvbWUgbmV3IGZ1bmN0aW9ucyB0byBmYWNpbGl0YXRlIGRldmVsb3BtZW50LCBzbyBpdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgdGhpcyBjbGFzcyBpbnN0ZWFkIG9mIGBSb3NJbnN0YW5jZWBmb3IgYSBtb3JlIGNvbnZlbmllbnQgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZS5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWVjcy1pbnN0YW5jZVxuICovXG5leHBvcnQgY2xhc3MgSW5zdGFuY2UgZXh0ZW5kcyByb3MuUmVzb3VyY2UgaW1wbGVtZW50cyBJSW5zdGFuY2Uge1xuICAgIHByb3RlY3RlZCBzY29wZTogcm9zLkNvbnN0cnVjdDtcbiAgICBwcm90ZWN0ZWQgaWQ6IHN0cmluZztcbiAgICBwdWJsaWMgcmVhZG9ubHkgcHJvcHM6IEluc3RhbmNlUHJvcHM7XG4gICAgcHJvdGVjdGVkIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQXR0cmlidXRlIEhvc3ROYW1lOiBIb3N0IG5hbWUgb2YgY3JlYXRlZCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0ckhvc3ROYW1lOiByb3MuSVJlc29sdmFibGUgfCBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGUgSW5uZXJJcDogSW5uZXIgSVAgYWRkcmVzcyBvZiB0aGUgc3BlY2lmaWVkIGluc3RhbmNlLiBPbmx5IGZvciBjbGFzc2ljYWwgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGF0dHJJbm5lcklwOiByb3MuSVJlc29sdmFibGUgfCBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGUgSW5zdGFuY2VJZDogVGhlIGluc3RhbmNlIElEIG9mIGNyZWF0ZWQgZWNzIGluc3RhbmNlXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGF0dHJJbnN0YW5jZUlkOiByb3MuSVJlc29sdmFibGUgfCBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBdHRyaWJ1dGUgUHJpbWFyeU5ldHdvcmtJbnRlcmZhY2VJZDogUHJpbWFyeSBuZXR3b3JrIGludGVyZmFjZSBJRCBvZiBjcmVhdGVkIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyUHJpbWFyeU5ldHdvcmtJbnRlcmZhY2VJZDogcm9zLklSZXNvbHZhYmxlIHwgc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQXR0cmlidXRlIFByaXZhdGVJcDogUHJpdmF0ZSBJUCBhZGRyZXNzIG9mIGNyZWF0ZWQgZWNzIGluc3RhbmNlLiBPbmx5IGZvciBWUEMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGF0dHJQcml2YXRlSXA6IHJvcy5JUmVzb2x2YWJsZSB8IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEF0dHJpYnV0ZSBQdWJsaWNJcDogUHVibGljIElQIGFkZHJlc3Mgb2YgY3JlYXRlZCBlY3MgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGF0dHJQdWJsaWNJcDogcm9zLklSZXNvbHZhYmxlIHwgc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQXR0cmlidXRlIFNlY3VyaXR5R3JvdXBJZHM6IFNlY3VyaXR5IGdyb3VwIElEIGxpc3Qgb2YgY3JlYXRlZCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0clNlY3VyaXR5R3JvdXBJZHM6IHJvcy5JUmVzb2x2YWJsZSB8IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEF0dHJpYnV0ZSBab25lSWQ6IFpvbmUgSUQgb2YgY3JlYXRlZCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0clpvbmVJZDogcm9zLklSZXNvbHZhYmxlIHwgc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIHByZXJlcXVpc2l0ZSByZXNvdXJjZShzKSByZXF1aXJlZCB0byBhbiBFQ1MgaW5zdGFuY2U6IFZQQywgVlN3aXRjaCwgYW5kKG9yKSBzZWN1cml0eSBncm91cC5cbiAgICAgKiBAcGFyYW0gem9uZUlkIFJlcXVpcmVkIHdoZW4gY3JlYXRpbmcgYSBWU3dpdGNoLlxuICAgICAqIEBwYXJhbSB2cGNDaWRyQmxvY2sgT3B0aW9uYWwgd2hlbiBjcmVhdGluZyBhIFZQQy4gRGVmYXVsdCB2YWx1ZSBpcyAxOTIuMTY4LjAuMC8xNi5cbiAgICAgKiBAcGFyYW0gdlN3aXRjaENpZHJCbG9jayBPcHRpb25hbCB3aGVuIGNyZWF0aW5nIGEgVlN3aXRjaC4gRGVmYXVsdCB2YWx1ZSBpcyAxOTIuMTY4LjAuMC8yNC5cbiAgICAgKiBAcGFyYW0gd2hldGhlckNyZWF0ZVNlY3VyaXR5R3JvdXAgV2hldGhlciB0byBjcmVhdGUgYSBzZWN1cml0eSBncm91cC4gRGVmYXVsdCB2YWx1ZSBpcyB0cnVlLlxuICAgICAqL1xuICAgIHB1YmxpYyBhdXRvQ3JlYXRlRGVwZW5kZW5jaWVzKHpvbmVJZDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZwY0NpZHJCbG9jazogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZTd2l0Y2hDaWRyQmxvY2s6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGV0aGVyQ3JlYXRlU2VjdXJpdHlHcm91cDogQm9vbGVhbiA9IHRydWUpOiBhbnlbXSB7XG4gICAgICAgIGxldCB2cGMgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCB2U3dpdGNoID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgc2VjdXJpdHlHcm91cCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHZwY0lkOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCB2U3dpdGNoSWQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHNlY3VyaXR5R3JvdXBJZDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLnJlc291cmNlIGFzIFJvc0luc3RhbmNlO1xuXG4gICAgICAgIGlmIChpbnN0YW5jZS52U3dpdGNoSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgem9uZUlkID0gem9uZUlkIHx8IGluc3RhbmNlLnpvbmVJZDtcbiAgICAgICAgICAgIGlmICh6b25lSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignem9uZUlkIGlzIHJlcXVpcmVkIHdoZW4gY3JlYXRpbmcgYSBWU3dpdGNoLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluc3RhbmNlLnZwY0lkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoKHZwY0NpZHJCbG9jayA9PT0gdW5kZWZpbmVkKSAhPT0gKHZTd2l0Y2hDaWRyQmxvY2sgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb3RoIHZwY0NpZHJCbG9jayBhbmQgdlN3aXRjaENpZHJCbG9jayBtdXN0IGJlIHNwZWNpZmllZCBvciBuZWl0aGVyLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2cGNDaWRyQmxvY2sgPSB2cGNDaWRyQmxvY2sgfHwgJzE5Mi4xNjguMC4wLzE2JztcbiAgICAgICAgICAgICAgICB2cGMgPSBuZXcgVnBjKHRoaXMuc2NvcGUsIGBBdXRvQ3JlYXRlZFZwY0ZvciR7dGhpcy5pZH1gLCB7XG4gICAgICAgICAgICAgICAgICAgIGNpZHJCbG9jazogdnBjQ2lkckJsb2NrLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoaXMgaXMgYXV0byBjcmVhdGVkIGJ5IFJPUy1DREsuJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2cGNJZCA9IHZwYy5hdHRyVnBjSWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZwY0lkID0gaW5zdGFuY2UudnBjSWRcbiAgICAgICAgICAgICAgICBpZiAodlN3aXRjaENpZHJCbG9jayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndlN3aXRjaENpZHJCbG9jayBpcyBtYW5kYXRvcnkgd2hlbiBnaXZpbmcgYSBWcGMgYW5kIGNyZWF0aW5nIGEgVlN3aXRjaC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2U3dpdGNoQ2lkckJsb2NrID0gdlN3aXRjaENpZHJCbG9jayB8fCAnMTkyLjE2OC4wLjAvMjQnO1xuICAgICAgICAgICAgdlN3aXRjaCA9IG5ldyBWU3dpdGNoKHRoaXMuc2NvcGUsIGBBdXRvQ3JlYXRlZFZTd2l0Y2hGb3Ike3RoaXMuaWR9YCwge1xuICAgICAgICAgICAgICAgIHZwY0lkOiB2cGNJZCxcbiAgICAgICAgICAgICAgICBjaWRyQmxvY2s6IHZTd2l0Y2hDaWRyQmxvY2ssXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGlzIGlzIGF1dG8gY3JlYXRlZCBieSBST1MtQ0RLLicsXG4gICAgICAgICAgICAgICAgem9uZUlkOiB6b25lSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZTd2l0Y2hJZCA9IHZTd2l0Y2guYXR0clZTd2l0Y2hJZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZTd2l0Y2hJZCA9IGluc3RhbmNlLnZTd2l0Y2hJZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aGV0aGVyQ3JlYXRlU2VjdXJpdHlHcm91cCAmJiBpbnN0YW5jZS5zZWN1cml0eUdyb3VwSWQgPT09IHVuZGVmaW5lZCAmJiBpbnN0YW5jZS5zZWN1cml0eUdyb3VwSWRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlY3VyaXR5R3JvdXAgPSBuZXcgU2VjdXJpdHlHcm91cCh0aGlzLnNjb3BlLCBgQXV0b0NyZWF0ZWRTZWN1cml0eUdyb3VwRm9yJHt0aGlzLmlkfWAsIHtcbiAgICAgICAgICAgICAgICB2cGNJZDogdnBjSWQsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGlzIGlzIGF1dG8gY3JlYXRlZCBieSBST1MtQ0RLLicsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlY3VyaXR5R3JvdXBJZCA9IHNlY3VyaXR5R3JvdXAuYXR0clNlY3VyaXR5R3JvdXBJZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlY3VyaXR5R3JvdXBJZCA9IGluc3RhbmNlLnNlY3VyaXR5R3JvdXBJZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGluc3RhbmNlLnZwY0lkID0gdnBjSWRcbiAgICAgICAgaW5zdGFuY2UudlN3aXRjaElkID0gdlN3aXRjaElkXG4gICAgICAgIGluc3RhbmNlLnNlY3VyaXR5R3JvdXBJZCA9IHNlY3VyaXR5R3JvdXBJZDtcblxuICAgICAgICByZXR1cm4gW3ZwYywgdlN3aXRjaCwgc2VjdXJpdHlHcm91cF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIG9uZSBvciBtb3JlIHNlY3VyaXR5IGdyb3VwcyB0byBhbiBFQ1MgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlY3VyaXR5R3JvdXBzIFNlY3VyaXR5IGdyb3VwcyBvciBzZWN1cml0eSBncm91cCBJRHMuXG4gICAgICovXG4gICAgcHVibGljIGFkZFNlY3VyaXR5R3JvdXBzKC4uLnNlY3VyaXR5R3JvdXBzOiAoU2VjdXJpdHlHcm91cCB8IHN0cmluZylbXSkge1xuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLnJlc291cmNlIGFzIFJvc0luc3RhbmNlO1xuICAgICAgICBsZXQgb3JpZ2luYWxTZWN1cml0eUdyb3VwSWRzID0gaW5zdGFuY2Uuc2VjdXJpdHlHcm91cElkcztcbiAgICAgICAgbGV0IG5ld1NlY3VyaXR5R3JvdXBJZHM6IEFycmF5PHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZT4gfCByb3MuSVJlc29sdmFibGUgPSBbXTtcbiAgICAgICAgaWYgKGluc3RhbmNlLnNlY3VyaXR5R3JvdXBJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBuZXdTZWN1cml0eUdyb3VwSWRzLnB1c2goaW5zdGFuY2Uuc2VjdXJpdHlHcm91cElkKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBzZWN1cml0eUdyb3VwIG9mIHNlY3VyaXR5R3JvdXBzKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHNlY3VyaXR5R3JvdXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgbmV3U2VjdXJpdHlHcm91cElkcy5wdXNoKHNlY3VyaXR5R3JvdXApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdTZWN1cml0eUdyb3VwSWRzLnB1c2goc2VjdXJpdHlHcm91cC5hdHRyU2VjdXJpdHlHcm91cElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocm9zLmlzUmVzb2x2YWJsZU9iamVjdChvcmlnaW5hbFNlY3VyaXR5R3JvdXBJZHMpKSB7XG4gICAgICAgICAgICBuZXdTZWN1cml0eUdyb3VwSWRzID0gcm9zLkZuLmxpc3RNZXJnZShbb3JpZ2luYWxTZWN1cml0eUdyb3VwSWRzLCBuZXdTZWN1cml0eUdyb3VwSWRzXSk7XG4gICAgICAgIH0gZWxzZSBpZiAob3JpZ2luYWxTZWN1cml0eUdyb3VwSWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5ld1NlY3VyaXR5R3JvdXBJZHMgPSBvcmlnaW5hbFNlY3VyaXR5R3JvdXBJZHMuY29uY2F0KG5ld1NlY3VyaXR5R3JvdXBJZHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5zdGFuY2Uuc2VjdXJpdHlHcm91cElkID0gdW5kZWZpbmVkO1xuICAgICAgICBpbnN0YW5jZS5zZWN1cml0eUdyb3VwSWRzID0gbmV3U2VjdXJpdHlHcm91cElkcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgb25lIG9yIG1vcmUgY29tbWFuZHMgdG8gdGhlIHVzZXJkYXRhIG9mIGFuIEVDUyBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gY29tbWFuZHMgQ29tbWFuZHMgdG8gYmUgYWRkZWQuXG4gICAgICovXG4gICAgcHVibGljIGFkZFVzZXJEYXRhQ29tbWFuZHMoLi4uY29tbWFuZHM6IChzdHJpbmcgfCByb3MuSVJlc29sdmFibGUpW10pOiB2b2lkIHtcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5yZXNvdXJjZSBhcyBSb3NJbnN0YW5jZTtcbiAgICAgICAgbGV0IGNvbW1hbmRzQXNTdHJpbmc6IChzdHJpbmcgfCByb3MuSVJlc29sdmFibGUpW10gPSBbXTtcbiAgICAgICAgaWYgKGluc3RhbmNlLnVzZXJEYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbW1hbmRzQXNTdHJpbmcucHVzaChpbnN0YW5jZS51c2VyRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgY29tbWFuZCBvZiBjb21tYW5kcykge1xuICAgICAgICAgICAgaWYgKHJvcy5pc1Jlc29sdmFibGVPYmplY3QoY29tbWFuZCkpIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kID0gY29tbWFuZC50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tbWFuZHNBc1N0cmluZy5wdXNoKGNvbW1hbmQpO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlLnVzZXJEYXRhID0gcm9zLkZuLmpvaW4oJ1xcbicsIGNvbW1hbmRzQXNTdHJpbmcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcmFtIHNjb3BlIC0gc2NvcGUgaW4gd2hpY2ggdGhpcyByZXNvdXJjZSBpcyBkZWZpbmVkXG4gICAgICogUGFyYW0gaWQgICAgLSBzY29wZWQgaWQgb2YgdGhlIHJlc291cmNlXG4gICAgICogUGFyYW0gcHJvcHMgLSByZXNvdXJjZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2NvcGU6IHJvcy5Db25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBJbnN0YW5jZVByb3BzLCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDpib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICBzdXBlcihzY29wZSwgaWQpO1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgICB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50ID0gZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ7XG5cbiAgICAgICAgY29uc3Qgcm9zSW5zdGFuY2UgPSBuZXcgUm9zSW5zdGFuY2UodGhpcywgaWQsICB7XG4gICAgICAgICAgICBkZWRpY2F0ZWRIb3N0SWQ6IHByb3BzLmRlZGljYXRlZEhvc3RJZCxcbiAgICAgICAgICAgIHJlc291cmNlR3JvdXBJZDogcHJvcHMucmVzb3VyY2VHcm91cElkLFxuICAgICAgICAgICAgc3lzdGVtRGlza0Rlc2NyaXB0aW9uOiBwcm9wcy5zeXN0ZW1EaXNrRGVzY3JpcHRpb24sXG4gICAgICAgICAgICBpbnN0YW5jZUNoYXJnZVR5cGU6IHByb3BzLmluc3RhbmNlQ2hhcmdlVHlwZSA9PT0gdW5kZWZpbmVkIHx8IHByb3BzLmluc3RhbmNlQ2hhcmdlVHlwZSA9PT0gbnVsbCA/ICdQb3N0UGFpZCcgOiBwcm9wcy5pbnN0YW5jZUNoYXJnZVR5cGUsXG4gICAgICAgICAgICByYW1Sb2xlTmFtZTogcHJvcHMucmFtUm9sZU5hbWUsXG4gICAgICAgICAgICBwcml2YXRlUG9vbE9wdGlvbnM6IHByb3BzLnByaXZhdGVQb29sT3B0aW9ucyxcbiAgICAgICAgICAgIHN5c3RlbURpc2tQZXJmb3JtYW5jZUxldmVsOiBwcm9wcy5zeXN0ZW1EaXNrUGVyZm9ybWFuY2VMZXZlbCxcbiAgICAgICAgICAgIGltYWdlSWQ6IHByb3BzLmltYWdlSWQsXG4gICAgICAgICAgICBzeXN0ZW1EaXNrRGlza05hbWU6IHByb3BzLnN5c3RlbURpc2tEaXNrTmFtZSxcbiAgICAgICAgICAgIHN0b3JhZ2VTZXRJZDogcHJvcHMuc3RvcmFnZVNldElkLFxuICAgICAgICAgICAgdXNlQWRkaXRpb25hbFNlcnZpY2U6IHByb3BzLnVzZUFkZGl0aW9uYWxTZXJ2aWNlLFxuICAgICAgICAgICAgaG9zdE5hbWU6IHByb3BzLmhvc3ROYW1lLFxuICAgICAgICAgICAgdGFnczogcHJvcHMudGFncyxcbiAgICAgICAgICAgIHZTd2l0Y2hJZDogcHJvcHMudlN3aXRjaElkLFxuICAgICAgICAgICAgcGVyaW9kOiBwcm9wcy5wZXJpb2QgPT09IHVuZGVmaW5lZCB8fCBwcm9wcy5wZXJpb2QgPT09IG51bGwgPyAxIDogcHJvcHMucGVyaW9kLFxuICAgICAgICAgICAgaW1hZ2VGYW1pbHk6IHByb3BzLmltYWdlRmFtaWx5LFxuICAgICAgICAgICAgZGVsZXRpb25Qcm90ZWN0aW9uOiBwcm9wcy5kZWxldGlvblByb3RlY3Rpb24sXG4gICAgICAgICAgICBodHRwRW5kcG9pbnQ6IHByb3BzLmh0dHBFbmRwb2ludCxcbiAgICAgICAgICAgIHNlY3VyaXR5R3JvdXBJZHM6IHByb3BzLnNlY3VyaXR5R3JvdXBJZHMsXG4gICAgICAgICAgICBpbnRlcm5ldENoYXJnZVR5cGU6IHByb3BzLmludGVybmV0Q2hhcmdlVHlwZSA9PT0gdW5kZWZpbmVkIHx8IHByb3BzLmludGVybmV0Q2hhcmdlVHlwZSA9PT0gbnVsbCA/ICdQYXlCeVRyYWZmaWMnIDogcHJvcHMuaW50ZXJuZXRDaGFyZ2VUeXBlLFxuICAgICAgICAgICAgc3BvdEludGVycnVwdGlvbkJlaGF2aW9yOiBwcm9wcy5zcG90SW50ZXJydXB0aW9uQmVoYXZpb3IgPT09IHVuZGVmaW5lZCB8fCBwcm9wcy5zcG90SW50ZXJydXB0aW9uQmVoYXZpb3IgPT09IG51bGwgPyAnVGVybWluYXRlJyA6IHByb3BzLnNwb3RJbnRlcnJ1cHRpb25CZWhhdmlvcixcbiAgICAgICAgICAgIGluc3RhbmNlTmFtZTogcHJvcHMuaW5zdGFuY2VOYW1lLFxuICAgICAgICAgICAgZGVwbG95bWVudFNldElkOiBwcm9wcy5kZXBsb3ltZW50U2V0SWQsXG4gICAgICAgICAgICBpbnRlcm5ldE1heEJhbmR3aWR0aE91dDogcHJvcHMuaW50ZXJuZXRNYXhCYW5kd2lkdGhPdXQgPT09IHVuZGVmaW5lZCB8fCBwcm9wcy5pbnRlcm5ldE1heEJhbmR3aWR0aE91dCA9PT0gbnVsbCA/IDEgOiBwcm9wcy5pbnRlcm5ldE1heEJhbmR3aWR0aE91dCxcbiAgICAgICAgICAgIHZwY0lkOiBwcm9wcy52cGNJZCxcbiAgICAgICAgICAgIGFmZmluaXR5OiBwcm9wcy5hZmZpbml0eSxcbiAgICAgICAgICAgIHNlY3VyaXR5RW5oYW5jZW1lbnRTdHJhdGVneTogcHJvcHMuc2VjdXJpdHlFbmhhbmNlbWVudFN0cmF0ZWd5LFxuICAgICAgICAgICAgcGVyaW9kVW5pdDogcHJvcHMucGVyaW9kVW5pdCA9PT0gdW5kZWZpbmVkIHx8IHByb3BzLnBlcmlvZFVuaXQgPT09IG51bGwgPyAnTW9udGgnIDogcHJvcHMucGVyaW9kVW5pdCxcbiAgICAgICAgICAgIHRlbmFuY3k6IHByb3BzLnRlbmFuY3ksXG4gICAgICAgICAgICBwcml2YXRlSXBBZGRyZXNzOiBwcm9wcy5wcml2YXRlSXBBZGRyZXNzLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHByb3BzLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgZGlza01hcHBpbmdzOiBwcm9wcy5kaXNrTWFwcGluZ3MsXG4gICAgICAgICAgICBzeXN0ZW1EaXNrU2l6ZTogcHJvcHMuc3lzdGVtRGlza1NpemUsXG4gICAgICAgICAgICB1c2VyRGF0YTogcHJvcHMudXNlckRhdGEsXG4gICAgICAgICAgICBhdXRvUmVuZXc6IHByb3BzLmF1dG9SZW5ldyA9PT0gdW5kZWZpbmVkIHx8IHByb3BzLmF1dG9SZW5ldyA9PT0gbnVsbCA/ICdGYWxzZScgOiBwcm9wcy5hdXRvUmVuZXcsXG4gICAgICAgICAgICBzcG90RHVyYXRpb246IHByb3BzLnNwb3REdXJhdGlvbixcbiAgICAgICAgICAgIHN0b3JhZ2VTZXRQYXJ0aXRpb25OdW1iZXI6IHByb3BzLnN0b3JhZ2VTZXRQYXJ0aXRpb25OdW1iZXIsXG4gICAgICAgICAgICBzcG90UHJpY2VMaW1pdDogcHJvcHMuc3BvdFByaWNlTGltaXQsXG4gICAgICAgICAgICB6b25lSWRzOiBwcm9wcy56b25lSWRzLFxuICAgICAgICAgICAgaW5zdGFuY2VUeXBlOiBwcm9wcy5pbnN0YW5jZVR5cGUsXG4gICAgICAgICAgICBhbGxvY2F0ZVB1YmxpY0lwOiBwcm9wcy5hbGxvY2F0ZVB1YmxpY0lwID09PSB1bmRlZmluZWQgfHwgcHJvcHMuYWxsb2NhdGVQdWJsaWNJcCA9PT0gbnVsbCA/IHRydWUgOiBwcm9wcy5hbGxvY2F0ZVB1YmxpY0lwLFxuICAgICAgICAgICAgc3BvdFN0cmF0ZWd5OiBwcm9wcy5zcG90U3RyYXRlZ3ksXG4gICAgICAgICAgICBwYXNzd29yZEluaGVyaXQ6IHByb3BzLnBhc3N3b3JkSW5oZXJpdCxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBwcm9wcy5wYXNzd29yZCxcbiAgICAgICAgICAgIGF1dG9SZW5ld1BlcmlvZDogcHJvcHMuYXV0b1JlbmV3UGVyaW9kID09PSB1bmRlZmluZWQgfHwgcHJvcHMuYXV0b1JlbmV3UGVyaW9kID09PSBudWxsID8gMSA6IHByb3BzLmF1dG9SZW5ld1BlcmlvZCxcbiAgICAgICAgICAgIGtleVBhaXJOYW1lOiBwcm9wcy5rZXlQYWlyTmFtZSxcbiAgICAgICAgICAgIGlvT3B0aW1pemVkOiBwcm9wcy5pb09wdGltaXplZCA9PT0gdW5kZWZpbmVkIHx8IHByb3BzLmlvT3B0aW1pemVkID09PSBudWxsID8gJ29wdGltaXplZCcgOiBwcm9wcy5pb09wdGltaXplZCxcbiAgICAgICAgICAgIHpvbmVJZDogcHJvcHMuem9uZUlkLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uRGVsZXRpb25Gb3JjZTogcHJvcHMuc3Vic2NyaXB0aW9uRGVsZXRpb25Gb3JjZSA9PT0gdW5kZWZpbmVkIHx8IHByb3BzLnN1YnNjcmlwdGlvbkRlbGV0aW9uRm9yY2UgPT09IG51bGwgPyBmYWxzZSA6IHByb3BzLnN1YnNjcmlwdGlvbkRlbGV0aW9uRm9yY2UsXG4gICAgICAgICAgICBocGNDbHVzdGVySWQ6IHByb3BzLmhwY0NsdXN0ZXJJZCxcbiAgICAgICAgICAgIHNlY3VyaXR5R3JvdXBJZDogcHJvcHMuc2VjdXJpdHlHcm91cElkLFxuICAgICAgICAgICAgZGVwbG95bWVudFNldEdyb3VwTm86IHByb3BzLmRlcGxveW1lbnRTZXRHcm91cE5vLFxuICAgICAgICAgICAgc3lzdGVtRGlza0NhdGVnb3J5OiBwcm9wcy5zeXN0ZW1EaXNrQ2F0ZWdvcnkgPT09IHVuZGVmaW5lZCB8fCBwcm9wcy5zeXN0ZW1EaXNrQ2F0ZWdvcnkgPT09IG51bGwgPyAnY2xvdWRfZWZmaWNpZW5jeScgOiBwcm9wcy5zeXN0ZW1EaXNrQ2F0ZWdvcnksXG4gICAgICAgICAgICBodHRwVG9rZW5zOiBwcm9wcy5odHRwVG9rZW5zLFxuICAgICAgICAgICAgY3JlZGl0U3BlY2lmaWNhdGlvbjogcHJvcHMuY3JlZGl0U3BlY2lmaWNhdGlvbixcbiAgICAgICAgfSwgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQgJiYgdGhpcy5zdGFjay5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCk7XG4gICAgICAgIHRoaXMucmVzb3VyY2UgPSByb3NJbnN0YW5jZTtcbiAgICAgICAgdGhpcy5hdHRySG9zdE5hbWUgPSByb3NJbnN0YW5jZS5hdHRySG9zdE5hbWU7XG4gICAgICAgIHRoaXMuYXR0cklubmVySXAgPSByb3NJbnN0YW5jZS5hdHRySW5uZXJJcDtcbiAgICAgICAgdGhpcy5hdHRySW5zdGFuY2VJZCA9IHJvc0luc3RhbmNlLmF0dHJJbnN0YW5jZUlkO1xuICAgICAgICB0aGlzLmF0dHJQcmltYXJ5TmV0d29ya0ludGVyZmFjZUlkID0gcm9zSW5zdGFuY2UuYXR0clByaW1hcnlOZXR3b3JrSW50ZXJmYWNlSWQ7XG4gICAgICAgIHRoaXMuYXR0clByaXZhdGVJcCA9IHJvc0luc3RhbmNlLmF0dHJQcml2YXRlSXA7XG4gICAgICAgIHRoaXMuYXR0clB1YmxpY0lwID0gcm9zSW5zdGFuY2UuYXR0clB1YmxpY0lwO1xuICAgICAgICB0aGlzLmF0dHJTZWN1cml0eUdyb3VwSWRzID0gcm9zSW5zdGFuY2UuYXR0clNlY3VyaXR5R3JvdXBJZHM7XG4gICAgICAgIHRoaXMuYXR0clpvbmVJZCA9IHJvc0luc3RhbmNlLmF0dHJab25lSWQ7XG4gICAgfVxufVxuIl19