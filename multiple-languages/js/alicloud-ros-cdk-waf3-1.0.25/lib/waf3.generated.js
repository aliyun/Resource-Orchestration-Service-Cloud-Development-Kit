"use strict";
// Generated from the AliCloud ROS Resource Specification
Object.defineProperty(exports, "__esModule", { value: true });
exports.RosInstance = void 0;
const ros = require("@alicloud/ros-cdk-core");
/**
 * Determine whether the given properties match those of a `RosInstanceProps`
 *
 * @param properties - the TypeScript properties of a `RosInstanceProps`
 *
 * @returns the result of the validation.
 */
function RosInstancePropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('ignoreExisting', ros.validateBoolean)(properties.ignoreExisting));
    errors.collect(ros.propertyValidator('intelligentLoadBalancing', ros.validateBoolean)(properties.intelligentLoadBalancing));
    errors.collect(ros.propertyValidator('autoRenew', ros.validateBoolean)(properties.autoRenew));
    if (properties.period && (typeof properties.period) !== 'object') {
        errors.collect(ros.propertyValidator('period', ros.validateAllowedValues)({
            data: properties.period,
            allowedValues: [1, 2, 3, 6],
        }));
    }
    errors.collect(ros.propertyValidator('period', ros.validateNumber)(properties.period));
    errors.collect(ros.propertyValidator('botWebProtection', ros.validateBoolean)(properties.botWebProtection));
    errors.collect(ros.propertyValidator('apiSecurity', ros.validateBoolean)(properties.apiSecurity));
    errors.collect(ros.propertyValidator('autoPay', ros.validateBoolean)(properties.autoPay));
    if (properties.trafficBillingProtectionThreshold && (typeof properties.trafficBillingProtectionThreshold) !== 'object') {
        errors.collect(ros.propertyValidator('trafficBillingProtectionThreshold', ros.validateRange)({
            data: properties.trafficBillingProtectionThreshold,
            min: 1000,
            max: 100000,
        }));
    }
    errors.collect(ros.propertyValidator('trafficBillingProtectionThreshold', ros.validateNumber)(properties.trafficBillingProtectionThreshold));
    errors.collect(ros.propertyValidator('payType', ros.requiredValidator)(properties.payType));
    if (properties.payType && (typeof properties.payType) !== 'object') {
        errors.collect(ros.propertyValidator('payType', ros.validateAllowedValues)({
            data: properties.payType,
            allowedValues: ["PayAsYouGo", "PostPaid", "PayOnDemand", "Postpaid", "PostPay", "Postpay", "POSTPAY", "POST", "Subscription", "PrePaid", "Prepaid", "PrePay", "Prepay", "PREPAY", "PRE"],
        }));
    }
    errors.collect(ros.propertyValidator('payType', ros.validateString)(properties.payType));
    if (properties.logStorage && (typeof properties.logStorage) !== 'object') {
        errors.collect(ros.propertyValidator('logStorage', ros.validateRange)({
            data: properties.logStorage,
            min: 3,
            max: 150,
        }));
    }
    errors.collect(ros.propertyValidator('logStorage', ros.validateNumber)(properties.logStorage));
    if (properties.elasticQps && (typeof properties.elasticQps) !== 'object') {
        errors.collect(ros.propertyValidator('elasticQps', ros.validateRange)({
            data: properties.elasticQps,
            min: 0,
            max: 60000,
        }));
    }
    errors.collect(ros.propertyValidator('elasticQps', ros.validateNumber)(properties.elasticQps));
    if (properties.domainsExtension && (typeof properties.domainsExtension) !== 'object') {
        errors.collect(ros.propertyValidator('domainsExtension', ros.validateRange)({
            data: properties.domainsExtension,
            min: 0,
            max: 5000,
        }));
    }
    errors.collect(ros.propertyValidator('domainsExtension', ros.validateNumber)(properties.domainsExtension));
    if (properties.wafVersion && (typeof properties.wafVersion) !== 'object') {
        errors.collect(ros.propertyValidator('wafVersion', ros.validateAllowedValues)({
            data: properties.wafVersion,
            allowedValues: ["Basic", "Pro", "Enterprise", "Ultimate"],
        }));
    }
    errors.collect(ros.propertyValidator('wafVersion', ros.validateString)(properties.wafVersion));
    if (properties.exclusiveIpAddress && (typeof properties.exclusiveIpAddress) !== 'object') {
        errors.collect(ros.propertyValidator('exclusiveIpAddress', ros.validateRange)({
            data: properties.exclusiveIpAddress,
            min: 0,
            max: 100,
        }));
    }
    errors.collect(ros.propertyValidator('exclusiveIpAddress', ros.validateNumber)(properties.exclusiveIpAddress));
    if (properties.additionalProtectionNodes && (typeof properties.additionalProtectionNodes) !== 'object') {
        errors.collect(ros.propertyValidator('additionalProtectionNodes', ros.validateRange)({
            data: properties.additionalProtectionNodes,
            min: 0,
            max: 500,
        }));
    }
    errors.collect(ros.propertyValidator('additionalProtectionNodes', ros.validateNumber)(properties.additionalProtectionNodes));
    errors.collect(ros.propertyValidator('region', ros.requiredValidator)(properties.region));
    if (properties.region && (typeof properties.region) !== 'object') {
        errors.collect(ros.propertyValidator('region', ros.validateAllowedValues)({
            data: properties.region,
            allowedValues: ["OutsideChineseMainland", "ChineseMainland"],
        }));
    }
    errors.collect(ros.propertyValidator('region', ros.validateString)(properties.region));
    if (properties.qpsExtension && (typeof properties.qpsExtension) !== 'object') {
        errors.collect(ros.propertyValidator('qpsExtension', ros.validateRange)({
            data: properties.qpsExtension,
            min: 0,
            max: 30000,
        }));
    }
    errors.collect(ros.propertyValidator('qpsExtension', ros.validateNumber)(properties.qpsExtension));
    errors.collect(ros.propertyValidator('fraudDetection', ros.validateBoolean)(properties.fraudDetection));
    errors.collect(ros.propertyValidator('botAppProtection', ros.validateBoolean)(properties.botAppProtection));
    errors.collect(ros.propertyValidator('logService', ros.validateBoolean)(properties.logService));
    if (properties.periodUnit && (typeof properties.periodUnit) !== 'object') {
        errors.collect(ros.propertyValidator('periodUnit', ros.validateAllowedValues)({
            data: properties.periodUnit,
            allowedValues: ["Month", "Year"],
        }));
    }
    errors.collect(ros.propertyValidator('periodUnit', ros.validateString)(properties.periodUnit));
    return errors.wrap('supplied properties not correct for "RosInstanceProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::WAF3::Instance` resource
 *
 * @param properties - the TypeScript properties of a `RosInstanceProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::WAF3::Instance` resource.
 */
// @ts-ignore TS6133
function rosInstancePropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosInstancePropsValidator(properties).assertSuccess();
    }
    return {
        PayType: ros.stringToRosTemplate(properties.payType),
        Region: ros.stringToRosTemplate(properties.region),
        AdditionalProtectionNodes: ros.numberToRosTemplate(properties.additionalProtectionNodes),
        ApiSecurity: ros.booleanToRosTemplate(properties.apiSecurity),
        AutoPay: ros.booleanToRosTemplate(properties.autoPay),
        AutoRenew: ros.booleanToRosTemplate(properties.autoRenew),
        BotAppProtection: ros.booleanToRosTemplate(properties.botAppProtection),
        BotWebProtection: ros.booleanToRosTemplate(properties.botWebProtection),
        DomainsExtension: ros.numberToRosTemplate(properties.domainsExtension),
        ElasticQps: ros.numberToRosTemplate(properties.elasticQps),
        ExclusiveIPAddress: ros.numberToRosTemplate(properties.exclusiveIpAddress),
        FraudDetection: ros.booleanToRosTemplate(properties.fraudDetection),
        IgnoreExisting: ros.booleanToRosTemplate(properties.ignoreExisting),
        IntelligentLoadBalancing: ros.booleanToRosTemplate(properties.intelligentLoadBalancing),
        LogService: ros.booleanToRosTemplate(properties.logService),
        LogStorage: ros.numberToRosTemplate(properties.logStorage),
        Period: ros.numberToRosTemplate(properties.period),
        PeriodUnit: ros.stringToRosTemplate(properties.periodUnit),
        QpsExtension: ros.numberToRosTemplate(properties.qpsExtension),
        TrafficBillingProtectionThreshold: ros.numberToRosTemplate(properties.trafficBillingProtectionThreshold),
        WafVersion: ros.stringToRosTemplate(properties.wafVersion),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::WAF3::Instance`, which is used to create a Web Application Firewall (WAF) 3.0 instance.
 * @Note This class does not contain additional functions, so it is recommended to use the `Instance` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-waf3-instance
 */
class RosInstance extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosInstance.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrInstanceId = this.getAtt('InstanceId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.payType = props.payType;
        this.region = props.region;
        this.additionalProtectionNodes = props.additionalProtectionNodes;
        this.apiSecurity = props.apiSecurity;
        this.autoPay = props.autoPay;
        this.autoRenew = props.autoRenew;
        this.botAppProtection = props.botAppProtection;
        this.botWebProtection = props.botWebProtection;
        this.domainsExtension = props.domainsExtension;
        this.elasticQps = props.elasticQps;
        this.exclusiveIpAddress = props.exclusiveIpAddress;
        this.fraudDetection = props.fraudDetection;
        this.ignoreExisting = props.ignoreExisting;
        this.intelligentLoadBalancing = props.intelligentLoadBalancing;
        this.logService = props.logService;
        this.logStorage = props.logStorage;
        this.period = props.period;
        this.periodUnit = props.periodUnit;
        this.qpsExtension = props.qpsExtension;
        this.trafficBillingProtectionThreshold = props.trafficBillingProtectionThreshold;
        this.wafVersion = props.wafVersion;
    }
    get rosProperties() {
        return {
            payType: this.payType,
            region: this.region,
            additionalProtectionNodes: this.additionalProtectionNodes,
            apiSecurity: this.apiSecurity,
            autoPay: this.autoPay,
            autoRenew: this.autoRenew,
            botAppProtection: this.botAppProtection,
            botWebProtection: this.botWebProtection,
            domainsExtension: this.domainsExtension,
            elasticQps: this.elasticQps,
            exclusiveIpAddress: this.exclusiveIpAddress,
            fraudDetection: this.fraudDetection,
            ignoreExisting: this.ignoreExisting,
            intelligentLoadBalancing: this.intelligentLoadBalancing,
            logService: this.logService,
            logStorage: this.logStorage,
            period: this.period,
            periodUnit: this.periodUnit,
            qpsExtension: this.qpsExtension,
            trafficBillingProtectionThreshold: this.trafficBillingProtectionThreshold,
            wafVersion: this.wafVersion,
        };
    }
    renderProperties(props) {
        return rosInstancePropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosInstance = RosInstance;
/**
 * The resource type name for this resource class.
 */
RosInstance.ROS_RESOURCE_TYPE_NAME = "ALIYUN::WAF3::Instance";
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FmMy5nZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ3YWYzLmdlbmVyYXRlZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEseURBQXlEOzs7QUFFekQsOENBQThDO0FBNkg5Qzs7Ozs7O0dBTUc7QUFDSCxTQUFTLHlCQUF5QixDQUFDLFVBQWU7SUFDOUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLEVBQUU7UUFBRSxPQUFPLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQztLQUFFO0lBQ25FLE1BQU0sTUFBTSxHQUFHLElBQUksR0FBRyxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDM0MsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO0lBQ3hHLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLDBCQUEwQixFQUFFLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQyxVQUFVLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDO0lBQzVILE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDOUYsSUFBRyxVQUFVLENBQUMsTUFBTSxJQUFJLENBQUMsT0FBTyxVQUFVLENBQUMsTUFBTSxDQUFDLEtBQUssUUFBUSxFQUFFO1FBQzdELE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUN4RSxJQUFJLEVBQUUsVUFBVSxDQUFDLE1BQU07WUFDdkIsYUFBYSxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFB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SSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7SUFDdkYsQ0FBQzs7QUEvTEwsa0NBZ01DO0FBL0xHOztHQUVHO0FBQ29CLGtDQUFzQixHQUFHLHdCQUF3QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGZyb20gdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBTcGVjaWZpY2F0aW9uXG5cbmltcG9ydCAqIGFzIHJvcyBmcm9tICdAYWxpY2xvdWQvcm9zLWNkay1jb3JlJztcblxuLyoqXG4gKiBQcm9wZXJ0aWVzIGZvciBkZWZpbmluZyBhIGBSb3NJbnN0YW5jZWAuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi13YWYzLWluc3RhbmNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUm9zSW5zdGFuY2VQcm9wcyB7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcGF5VHlwZTogVGhlIGJpbGxpbmcgbWV0aG9kIG9mIHRoZSBmaXJld2FsbCBpbnN0YW5jZS4gVmFsaWQgdmFsdWVzOlxuICAgICAqIFBheUFzWW91R286IHBheS1hcy15b3UtZ29cbiAgICAgKiBTdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvblxuICAgICAqL1xuICAgIHJlYWRvbmx5IHBheVR5cGU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSByZWdpb246IFdlYiBBcHBsaWNhdGlvbiBGaXJld2FsbCBpcyBhdmFpbGFibGUgaW4gdGhlIGZvbGxvd2luZyByZWdpb25zOiByZWdpb25zIGluIHRoZSBDaGluZXNlIG1haW5sYW5kLCBDaGluYSAoSG9uZyBLb25nKSwgU2luZ2Fwb3JlIChTaW5nYXBvcmUpLCBNYWxheXNpYSAoS3VhbGEgTHVtcHVyKSwgVVMgKFNpbGljb24gVmFsbGV5KSwgQXVzdHJhbGlhIChTeWRuZXkpLCBHZXJtYW55IChGcmFua2Z1cnQpLCBJbmRpYSAoTXVtYmFpKSwgSW5kb25lc2lhIChKYWthcnRhKSwgVUFFIChEdWJhaSksIGFuZCBKYXBhbiAoVG9reW8pLlxuICAgICAqICBJZiB5b3VyIG9yaWdpbiBzZXJ2ZXIgaXMgZGVwbG95ZWQgd2l0aGluIHRoZSBDaGluZXNlIG1haW5sYW5kLCBzZWxlY3QgQ2hpbmVzZSBNYWlubGFuZC4gSWYgeW91ciBvcmlnaW4gc2VydmVyIGlzIGRlcGxveWVkIG91dHNpZGUgdGhlIENoaW5lc2UgbWFpbmxhbmQsIHNlbGVjdCBPdXRzaWRlIENoaW5lc2UgbWFpbmxhbmQuIEludGVsbGlnZW50IHJlZ2lvbiBzZWxlY3Rpb24gaXMgc3VwcG9ydGVkLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHJlZ2lvbjogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGFkZGl0aW9uYWxQcm90ZWN0aW9uTm9kZXM6IEVhY2ggcHJvdGVjdGlvbiBjbHVzdGVyIGhhcyBhdCBsZWFzdCB0d28gcHJvdGVjdGlvbiBub2RlcywgYW5kIGVhY2ggbm9kZSBwcm92aWRlcyB0aGUgcHJvdGVjdGlvbiBjYXBhYmlsaXRpZXMgb2YgdXAgdG8gNSwwMDAgUVBTIGZvciBIVFRQIHJlcXVlc3RzIG9yIHVwIHRvIDMsMDAwIFFQUyBmb3IgSFRUUFMgcmVxdWVzdHMuIFlvdSBjYW4gYWRkIHByb3RlY3Rpb24gbm9kZXMgdG8gaW5jcmVhc2UgcHJvdGVjdGlvbiBjYXBhYmlsaXRpZXMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgYWRkaXRpb25hbFByb3RlY3Rpb25Ob2Rlcz86IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBhcGlTZWN1cml0eTogVGhlIEFQSSBzZWN1cml0eSBmZWF0dXJlIGRldGVjdHMgcmVzcG9uc2VzIHdpdGggc3BlY2lmaWVkIGNoYXJhY3RlcmlzdGljcyB0byBjaGVjayB3aGV0aGVyIGRhdGEgbGVha3Mgb2NjdXIuIEFmdGVyIHlvdSBlbmFibGUgdGhlIGZlYXR1cmUsIFdBRiBpcyBhdXRob3JpemVkIHRvIHBlcmZvcm0gcmVsYXRlZCBhbmFseXNpcyBvbiB5b3VyIGRhdGEuIElmIHlvdSBzZWxlY3QgQ2hpbmVzZSBNYWlubGFuZCwgc2VydmljZSBkZXBsb3ltZW50IGFuZCBkYXRhIHByb2Nlc3NpbmcgYXJlIHBlcmZvcm1lZCBpbiB0aGUgQ2hpbmVzZSBtYWlubGFuZC5cbiAgICAgKi9cbiAgICByZWFkb25seSBhcGlTZWN1cml0eT86IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgYXV0b1BheTogV2hldGhlciB0byBhdXRvIHBheSB0aGUgYmlsbC5cbiAgICAgKi9cbiAgICByZWFkb25seSBhdXRvUGF5PzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBhdXRvUmVuZXc6IFdoZXRoZXIgdG8gYXV0byByZW5ldyB0aGUgcHJlcGF5IGluc3RhbmNlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGF1dG9SZW5ldz86IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgYm90QXBwUHJvdGVjdGlvbjogQm90IG1hbmFnZW1lbnQgbW9kdWxlIGZvciBBcHAgcHJvdGVjdGlvbi5cbiAgICAgKi9cbiAgICByZWFkb25seSBib3RBcHBQcm90ZWN0aW9uPzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBib3RXZWJQcm90ZWN0aW9uOiBCb3QgbWFuYWdlbWVudCBtb2R1bGUgZm9yIFdlYiBhcHBsaWNhdGlvbiBwcm90ZWN0aW9uLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGJvdFdlYlByb3RlY3Rpb24/OiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGRvbWFpbnNFeHRlbnNpb246IElmIHRoZSBhY3R1YWwgbnVtYmVyIG9mIHJlcXVpcmVkIGFjY2VzcyBkb21haW4gbmFtZXMgZXhjZWVkcyB0aGUgbnVtYmVyIG9mIGZyZWUgZG9tYWluIG5hbWVzIGluIHRoZSB2ZXJzaW9uLCB0aGUgbnVtYmVyIG9mIGRvbWFpbiBuYW1lcyBjYW4gYmUgZXhwYW5kZWQgYWNjb3JkaW5nIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5Eb21haW4gbmFtZSBjb3VudGluZyBkb2VzIG5vdCBkaWZmZXJlbnRpYXRlIGJldHdlZW4gZG9tYWluIG5hbWUgdHlwZXMuIFRoZSBtYWluIGRvbWFpbiBuYW1lLCBzdWItZG9tYWluIG5hbWUsIGFuZCBwYW4tZG9tYWluIG5hbWUgYXJlIGVhY2ggY291bnRlZCBhcyBvbmUgZG9tYWluIG5hbWUuXG4gICAgICovXG4gICAgcmVhZG9ubHkgZG9tYWluc0V4dGVuc2lvbj86IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBlbGFzdGljUXBzOiBUaGUgYnVyc3RhYmxlIFFQUyAocGF5LWFzLXlvdS1nbykgZmVhdHVyZSBpcyBzdWl0YWJsZSBmb3Igc2NlbmFyaW9zIHRoYXQgaW52b2x2ZSBzaG9ydC10ZXJtIG9yIHN1ZGRlbiB0cmFmZmljIHN1cmdlcywgZm9yIGV4YW1wbGUsIGR1cmluZyBwcm9tb3Rpb25zLiBJbiB0aGVzZSBzY2VuYXJpb3MsIHRoZSB0cmFmZmljIHBlYWsgbWF5IGV4Y2VlZCB0aGUgc3VtIG9mIHRoZSBtYXhpbXVtIFFQUyB0aGF0IGlzIHN1cHBvcnRlZCBieSB5b3VyIFdBRiBlZGl0aW9uIGFuZCB0aGUgZXh0ZW5kZWQgUVBTLiBJZiB5b3UgZW5hYmxlIHRoZSBmZWF0dXJlLCB5b3UgYXJlIGNoYXJnZWQgYmFzZWQgb24gdGhlIGFtb3VudCBvZiBleGNlc3MgUVBTIHJlc291cmNlcyB0aGF0IHlvdSB1c2UuIFRoaXMgaGVscHMgcHJldmVudCB5b3VyIGRvbWFpbiBuYW1lcyBmcm9tIGJlaW5nIGFkZGVkIHRvIGEgc2FuZGJveCB3aGVuIFFQUyByZXNvdXJjZXMgYXJlIGV4Y2Vzc2l2ZWx5IHVzZWQgYW5kIGhlbHBzIGVuc3VyZSBzZXJ2aWNlIGNvbnRpbnVpdHkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgZWxhc3RpY1Fwcz86IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBleGNsdXNpdmVJcEFkZHJlc3M6IEV4Y2x1ZXNpdmUgSVAgYWRkcmVzcyBudW1iZXIuXG4gICAgICovXG4gICAgcmVhZG9ubHkgZXhjbHVzaXZlSXBBZGRyZXNzPzogbnVtYmVyIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGZyYXVkRGV0ZWN0aW9uOiBZb3UgY2FuIGVuYWJsZSB0aGlzIGZlYXR1cmUgb25seSBhZnRlciB5b3UgZW5hYmxlIHRoZSBib3QgbWFuYWdlbWVudCBtb2R1bGUuIElmIGFibm9ybWFsIHBob25lIG51bWJlcnMgYXJlIHVzZWQgaW4gbG9nb24gb3IgcmVnaXN0cmF0aW9uIHNjZW5hcmlvcywgYW5vbWFseSB0YWdzIGFyZSBtYXRjaGVkLiBSZXF1ZXN0cyBmcm9tIHRoZSBhYm5vcm1hbCBwaG9uZSBudW1iZXJzIGFyZSBibG9ja2VkIG9yIENBUFRDSEEgdmVyaWZpY2F0aW9uIGlzIHJlcXVpcmVkLiBZb3UgYXJlIGNoYXJnZWQgYmFzZWQgb24gdGhlIG51bWJlciBvZiB0aW1lcyB0aGF0IGFub21hbHkgdGFncyBhcmUgbWF0Y2hlZC5cbiAgICAgKi9cbiAgICByZWFkb25seSBmcmF1ZERldGVjdGlvbj86IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgaWdub3JlRXhpc3Rpbmc6IFdoZXRoZXIgdG8gaWdub3JlIGV4aXN0aW5nIFdBRjMgaW5zdGFuY2VcbiAgICAgKiBGYWxzZTogUk9TIHdpbGwgcGVyZm9ybSBhIHVuaXF1ZW5lc3MgY2hlY2suSWYgdGhlIFdBRjMgaW5zdGFuY2UgZXhpc3RzLCBhbiBlcnJvciB3aWxsIGJlIHJlcG9ydGVkIHdoZW4gY3JlYXRpbmcgaXQuXG4gICAgICogVHJ1ZTogUk9TIHdpbGwgbm90IGNoZWNrIHRoZSB1bmlxdWVuZXNzLklmIHRoZSBXQUYzIGluc3RhbmNlIGV4aXN0cywgdGhlIGNyZWF0aW9uIHByb2Nlc3Mgd2lsbCBiZSBpZ25vcmVkLlxuICAgICAqIElmIHRoZSBXQUYzIGluc3RhbmNlIGlzIG5vdCBjcmVhdGVkIGJ5IFJPUywgaXQgd2lsbCBiZSBpZ25vcmVkIGR1cmluZyB1cGRhdGUgYW5kIGRlbGV0ZSBzdGFnZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBpZ25vcmVFeGlzdGluZz86IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgaW50ZWxsaWdlbnRMb2FkQmFsYW5jaW5nOiBJbnRlbGxpZ2VudCBsb2FkIGJhbGFuY2VyIGZvciBXQUYgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcmVhZG9ubHkgaW50ZWxsaWdlbnRMb2FkQmFsYW5jaW5nPzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBsb2dTZXJ2aWNlOiBMb2cgc2VydmljZSBmb3IgV0FGIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGxvZ1NlcnZpY2U/OiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGxvZ1N0b3JhZ2U6IExvZyBzdG9yYWdlIGNhcGFjaXR5LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGxvZ1N0b3JhZ2U/OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcGVyaW9kOiBUaGUgc3Vic2NyaXB0aW9uIHBlcmlvZCBvZiB0aGUgZmlyZXdhbGxJZiBQZXJpb2RVbml0IGlzIG1vbnRoLCB0aGUgdmFsaWQgcmFuZ2UgaXMgMSwgMywgNlxuICAgICAqIElmIHBlcmlvZFVuaXQgaXMgeWVhciwgdGhlIHZhbGlkIHJhbmdlIGlzIDEsIDIsIDNcbiAgICAgKi9cbiAgICByZWFkb25seSBwZXJpb2Q/OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcGVyaW9kVW5pdDogVGhlIHVuaXQgb2YgdGhlIHN1YnNjcmlwdGlvbiBkdXJhdGlvbi4gVmFsaWQgdmFsdWVzOlxuICAgICAqIE1vbnRoXG4gICAgICogWWVhclxuICAgICAqIERlZmF1bHQgdmFsdWU6IE1vbnRoLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHBlcmlvZFVuaXQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcXBzRXh0ZW5zaW9uOiBFeHRlbmRlZCBRUFMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcXBzRXh0ZW5zaW9uPzogbnVtYmVyIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHRyYWZmaWNCaWxsaW5nUHJvdGVjdGlvblRocmVzaG9sZDogSW4gcGF5LWFzLXlvdS1nbyBXQUYgMy4wLCB0aGUgdHJhZmZpYyBiaWxsaW5nIHByb3RlY3Rpb24gZmVhdHVyZSBpcyBhdXRvbWF0aWNhbGx5IGVuYWJsZWQgdG8gcHJldmVudCB1bmV4cGVjdGVkIGFuZCB1bnVzdWFsbHkgaGlnaCBiaWxscyB0aGF0IHJlc3VsdCBmcm9tIHVucHJlZGljdGFibGUgZmFjdG9ycyBzdWNoIGFzIEhUVFAgZmxvb2QgYXR0YWNrcy4gQSBiaWxsIGlzIG5vdCBnZW5lcmF0ZWQgZm9yIGFuIGhvdXIgaWYgdGhlIHBlYWsgdHJhZmZpYyBleGNlZWRzIHRoZSB0cmFmZmljIGJpbGxpbmcgcHJvdGVjdGlvbiB0aHJlc2hvbGQgd2l0aGluIHRoZSBob3VyLiBUaGVuLCB5b3VyIFdBRiBpbnN0YW5jZSBpcyBhZGRlZCB0byBhIHNhbmRib3guIElmIHRoZSBwZWFrIHRyYWZmaWMgaXMgbG93ZXIgdGhhbiB0aGUgdHJhZmZpYyBiaWxsaW5nIHByb3RlY3Rpb24gdGhyZXNob2xkIHRoZSBuZXh0IGhvdXIsIHlvdXIgV0FGIGluc3RhbmNlIGlzIHJlbW92ZWQgZnJvbSB0aGUgc2FuZGJveC5cbiAgICAgKi9cbiAgICByZWFkb25seSB0cmFmZmljQmlsbGluZ1Byb3RlY3Rpb25UaHJlc2hvbGQ/OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgd2FmVmVyc2lvbjogVGhlIHZlcnNpb24gb2YgV0FGMy4wLlxuICAgICAqXG4gICAgICovXG4gICAgcmVhZG9ubHkgd2FmVmVyc2lvbj86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgZ2l2ZW4gcHJvcGVydGllcyBtYXRjaCB0aG9zZSBvZiBhIGBSb3NJbnN0YW5jZVByb3BzYFxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NJbnN0YW5jZVByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIHZhbGlkYXRpb24uXG4gKi9cbmZ1bmN0aW9uIFJvc0luc3RhbmNlUHJvcHNWYWxpZGF0b3IocHJvcGVydGllczogYW55KTogcm9zLlZhbGlkYXRpb25SZXN1bHQge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHJvcy5WQUxJREFUSU9OX1NVQ0NFU1M7IH1cbiAgICBjb25zdCBlcnJvcnMgPSBuZXcgcm9zLlZhbGlkYXRpb25SZXN1bHRzKCk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdpZ25vcmVFeGlzdGluZycsIHJvcy52YWxpZGF0ZUJvb2xlYW4pKHByb3BlcnRpZXMuaWdub3JlRXhpc3RpbmcpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2ludGVsbGlnZW50TG9hZEJhbGFuY2luZycsIHJvcy52YWxpZGF0ZUJvb2xlYW4pKHByb3BlcnRpZXMuaW50ZWxsaWdlbnRMb2FkQmFsYW5jaW5nKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdhdXRvUmVuZXcnLCByb3MudmFsaWRhdGVCb29sZWFuKShwcm9wZXJ0aWVzLmF1dG9SZW5ldykpO1xuICAgIGlmKHByb3BlcnRpZXMucGVyaW9kICYmICh0eXBlb2YgcHJvcGVydGllcy5wZXJpb2QpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3BlcmlvZCcsIHJvcy52YWxpZGF0ZUFsbG93ZWRWYWx1ZXMpKHtcbiAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLnBlcmlvZCxcbiAgICAgICAgICBhbGxvd2VkVmFsdWVzOiBbMSwyLDMsNl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdwZXJpb2QnLCByb3MudmFsaWRhdGVOdW1iZXIpKHByb3BlcnRpZXMucGVyaW9kKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdib3RXZWJQcm90ZWN0aW9uJywgcm9zLnZhbGlkYXRlQm9vbGVhbikocHJvcGVydGllcy5ib3RXZWJQcm90ZWN0aW9uKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdhcGlTZWN1cml0eScsIHJvcy52YWxpZGF0ZUJvb2xlYW4pKHByb3BlcnRpZXMuYXBpU2VjdXJpdHkpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2F1dG9QYXknLCByb3MudmFsaWRhdGVCb29sZWFuKShwcm9wZXJ0aWVzLmF1dG9QYXkpKTtcbiAgICBpZihwcm9wZXJ0aWVzLnRyYWZmaWNCaWxsaW5nUHJvdGVjdGlvblRocmVzaG9sZCAmJiAodHlwZW9mIHByb3BlcnRpZXMudHJhZmZpY0JpbGxpbmdQcm90ZWN0aW9uVGhyZXNob2xkKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd0cmFmZmljQmlsbGluZ1Byb3RlY3Rpb25UaHJlc2hvbGQnLCByb3MudmFsaWRhdGVSYW5nZSkoe1xuICAgICAgICAgICAgZGF0YTogcHJvcGVydGllcy50cmFmZmljQmlsbGluZ1Byb3RlY3Rpb25UaHJlc2hvbGQsXG4gICAgICAgICAgICBtaW46IDEwMDAsXG4gICAgICAgICAgICBtYXg6IDEwMDAwMCxcbiAgICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigndHJhZmZpY0JpbGxpbmdQcm90ZWN0aW9uVGhyZXNob2xkJywgcm9zLnZhbGlkYXRlTnVtYmVyKShwcm9wZXJ0aWVzLnRyYWZmaWNCaWxsaW5nUHJvdGVjdGlvblRocmVzaG9sZCkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncGF5VHlwZScsIHJvcy5yZXF1aXJlZFZhbGlkYXRvcikocHJvcGVydGllcy5wYXlUeXBlKSk7XG4gICAgaWYocHJvcGVydGllcy5wYXlUeXBlICYmICh0eXBlb2YgcHJvcGVydGllcy5wYXlUeXBlKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdwYXlUeXBlJywgcm9zLnZhbGlkYXRlQWxsb3dlZFZhbHVlcykoe1xuICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMucGF5VHlwZSxcbiAgICAgICAgICBhbGxvd2VkVmFsdWVzOiBbXCJQYXlBc1lvdUdvXCIsXCJQb3N0UGFpZFwiLFwiUGF5T25EZW1hbmRcIixcIlBvc3RwYWlkXCIsXCJQb3N0UGF5XCIsXCJQb3N0cGF5XCIsXCJQT1NUUEFZXCIsXCJQT1NUXCIsXCJTdWJzY3JpcHRpb25cIixcIlByZVBhaWRcIixcIlByZXBhaWRcIixcIlByZVBheVwiLFwiUHJlcGF5XCIsXCJQUkVQQVlcIixcIlBSRVwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3BheVR5cGUnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMucGF5VHlwZSkpO1xuICAgIGlmKHByb3BlcnRpZXMubG9nU3RvcmFnZSAmJiAodHlwZW9mIHByb3BlcnRpZXMubG9nU3RvcmFnZSkgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignbG9nU3RvcmFnZScsIHJvcy52YWxpZGF0ZVJhbmdlKSh7XG4gICAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLmxvZ1N0b3JhZ2UsXG4gICAgICAgICAgICBtaW46IDMsXG4gICAgICAgICAgICBtYXg6IDE1MCxcbiAgICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignbG9nU3RvcmFnZScsIHJvcy52YWxpZGF0ZU51bWJlcikocHJvcGVydGllcy5sb2dTdG9yYWdlKSk7XG4gICAgaWYocHJvcGVydGllcy5lbGFzdGljUXBzICYmICh0eXBlb2YgcHJvcGVydGllcy5lbGFzdGljUXBzKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdlbGFzdGljUXBzJywgcm9zLnZhbGlkYXRlUmFuZ2UpKHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMuZWxhc3RpY1FwcyxcbiAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgIG1heDogNjAwMDAsXG4gICAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2VsYXN0aWNRcHMnLCByb3MudmFsaWRhdGVOdW1iZXIpKHByb3BlcnRpZXMuZWxhc3RpY1FwcykpO1xuICAgIGlmKHByb3BlcnRpZXMuZG9tYWluc0V4dGVuc2lvbiAmJiAodHlwZW9mIHByb3BlcnRpZXMuZG9tYWluc0V4dGVuc2lvbikgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZG9tYWluc0V4dGVuc2lvbicsIHJvcy52YWxpZGF0ZVJhbmdlKSh7XG4gICAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLmRvbWFpbnNFeHRlbnNpb24sXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDUwMDAsXG4gICAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2RvbWFpbnNFeHRlbnNpb24nLCByb3MudmFsaWRhdGVOdW1iZXIpKHByb3BlcnRpZXMuZG9tYWluc0V4dGVuc2lvbikpO1xuICAgIGlmKHByb3BlcnRpZXMud2FmVmVyc2lvbiAmJiAodHlwZW9mIHByb3BlcnRpZXMud2FmVmVyc2lvbikgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignd2FmVmVyc2lvbicsIHJvcy52YWxpZGF0ZUFsbG93ZWRWYWx1ZXMpKHtcbiAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLndhZlZlcnNpb24sXG4gICAgICAgICAgYWxsb3dlZFZhbHVlczogW1wiQmFzaWNcIixcIlByb1wiLFwiRW50ZXJwcmlzZVwiLFwiVWx0aW1hdGVcIl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd3YWZWZXJzaW9uJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLndhZlZlcnNpb24pKTtcbiAgICBpZihwcm9wZXJ0aWVzLmV4Y2x1c2l2ZUlwQWRkcmVzcyAmJiAodHlwZW9mIHByb3BlcnRpZXMuZXhjbHVzaXZlSXBBZGRyZXNzKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdleGNsdXNpdmVJcEFkZHJlc3MnLCByb3MudmFsaWRhdGVSYW5nZSkoe1xuICAgICAgICAgICAgZGF0YTogcHJvcGVydGllcy5leGNsdXNpdmVJcEFkZHJlc3MsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDEwMCxcbiAgICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZXhjbHVzaXZlSXBBZGRyZXNzJywgcm9zLnZhbGlkYXRlTnVtYmVyKShwcm9wZXJ0aWVzLmV4Y2x1c2l2ZUlwQWRkcmVzcykpO1xuICAgIGlmKHByb3BlcnRpZXMuYWRkaXRpb25hbFByb3RlY3Rpb25Ob2RlcyAmJiAodHlwZW9mIHByb3BlcnRpZXMuYWRkaXRpb25hbFByb3RlY3Rpb25Ob2RlcykgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignYWRkaXRpb25hbFByb3RlY3Rpb25Ob2RlcycsIHJvcy52YWxpZGF0ZVJhbmdlKSh7XG4gICAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLmFkZGl0aW9uYWxQcm90ZWN0aW9uTm9kZXMsXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDUwMCxcbiAgICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignYWRkaXRpb25hbFByb3RlY3Rpb25Ob2RlcycsIHJvcy52YWxpZGF0ZU51bWJlcikocHJvcGVydGllcy5hZGRpdGlvbmFsUHJvdGVjdGlvbk5vZGVzKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdyZWdpb24nLCByb3MucmVxdWlyZWRWYWxpZGF0b3IpKHByb3BlcnRpZXMucmVnaW9uKSk7XG4gICAgaWYocHJvcGVydGllcy5yZWdpb24gJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLnJlZ2lvbikgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncmVnaW9uJywgcm9zLnZhbGlkYXRlQWxsb3dlZFZhbHVlcykoe1xuICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMucmVnaW9uLFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFtcIk91dHNpZGVDaGluZXNlTWFpbmxhbmRcIixcIkNoaW5lc2VNYWlubGFuZFwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3JlZ2lvbicsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5yZWdpb24pKTtcbiAgICBpZihwcm9wZXJ0aWVzLnFwc0V4dGVuc2lvbiAmJiAodHlwZW9mIHByb3BlcnRpZXMucXBzRXh0ZW5zaW9uKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdxcHNFeHRlbnNpb24nLCByb3MudmFsaWRhdGVSYW5nZSkoe1xuICAgICAgICAgICAgZGF0YTogcHJvcGVydGllcy5xcHNFeHRlbnNpb24sXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDMwMDAwLFxuICAgICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdxcHNFeHRlbnNpb24nLCByb3MudmFsaWRhdGVOdW1iZXIpKHByb3BlcnRpZXMucXBzRXh0ZW5zaW9uKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdmcmF1ZERldGVjdGlvbicsIHJvcy52YWxpZGF0ZUJvb2xlYW4pKHByb3BlcnRpZXMuZnJhdWREZXRlY3Rpb24pKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2JvdEFwcFByb3RlY3Rpb24nLCByb3MudmFsaWRhdGVCb29sZWFuKShwcm9wZXJ0aWVzLmJvdEFwcFByb3RlY3Rpb24pKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2xvZ1NlcnZpY2UnLCByb3MudmFsaWRhdGVCb29sZWFuKShwcm9wZXJ0aWVzLmxvZ1NlcnZpY2UpKTtcbiAgICBpZihwcm9wZXJ0aWVzLnBlcmlvZFVuaXQgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLnBlcmlvZFVuaXQpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3BlcmlvZFVuaXQnLCByb3MudmFsaWRhdGVBbGxvd2VkVmFsdWVzKSh7XG4gICAgICAgICAgZGF0YTogcHJvcGVydGllcy5wZXJpb2RVbml0LFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFtcIk1vbnRoXCIsXCJZZWFyXCJdLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncGVyaW9kVW5pdCcsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5wZXJpb2RVbml0KSk7XG4gICAgcmV0dXJuIGVycm9ycy53cmFwKCdzdXBwbGllZCBwcm9wZXJ0aWVzIG5vdCBjb3JyZWN0IGZvciBcIlJvc0luc3RhbmNlUHJvcHNcIicpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OldBRjM6Okluc3RhbmNlYCByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NJbnN0YW5jZVByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpXQUYzOjpJbnN0YW5jZWAgcmVzb3VyY2UuXG4gKi9cbi8vIEB0cy1pZ25vcmUgVFM2MTMzXG5mdW5jdGlvbiByb3NJbnN0YW5jZVByb3BzVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzOiBhbnksIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuKTogYW55IHtcbiAgICBpZiAoIXJvcy5jYW5JbnNwZWN0KHByb3BlcnRpZXMpKSB7IHJldHVybiBwcm9wZXJ0aWVzOyB9XG4gICAgaWYoZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQpIHtcbiAgICAgICAgUm9zSW5zdGFuY2VQcm9wc1ZhbGlkYXRvcihwcm9wZXJ0aWVzKS5hc3NlcnRTdWNjZXNzKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBQYXlUeXBlOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnBheVR5cGUpLFxuICAgICAgUmVnaW9uOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnJlZ2lvbiksXG4gICAgICBBZGRpdGlvbmFsUHJvdGVjdGlvbk5vZGVzOiByb3MubnVtYmVyVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmFkZGl0aW9uYWxQcm90ZWN0aW9uTm9kZXMpLFxuICAgICAgQXBpU2VjdXJpdHk6IHJvcy5ib29sZWFuVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmFwaVNlY3VyaXR5KSxcbiAgICAgIEF1dG9QYXk6IHJvcy5ib29sZWFuVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmF1dG9QYXkpLFxuICAgICAgQXV0b1JlbmV3OiByb3MuYm9vbGVhblRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5hdXRvUmVuZXcpLFxuICAgICAgQm90QXBwUHJvdGVjdGlvbjogcm9zLmJvb2xlYW5Ub1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuYm90QXBwUHJvdGVjdGlvbiksXG4gICAgICBCb3RXZWJQcm90ZWN0aW9uOiByb3MuYm9vbGVhblRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5ib3RXZWJQcm90ZWN0aW9uKSxcbiAgICAgIERvbWFpbnNFeHRlbnNpb246IHJvcy5udW1iZXJUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuZG9tYWluc0V4dGVuc2lvbiksXG4gICAgICBFbGFzdGljUXBzOiByb3MubnVtYmVyVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmVsYXN0aWNRcHMpLFxuICAgICAgRXhjbHVzaXZlSVBBZGRyZXNzOiByb3MubnVtYmVyVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmV4Y2x1c2l2ZUlwQWRkcmVzcyksXG4gICAgICBGcmF1ZERldGVjdGlvbjogcm9zLmJvb2xlYW5Ub1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuZnJhdWREZXRlY3Rpb24pLFxuICAgICAgSWdub3JlRXhpc3Rpbmc6IHJvcy5ib29sZWFuVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmlnbm9yZUV4aXN0aW5nKSxcbiAgICAgIEludGVsbGlnZW50TG9hZEJhbGFuY2luZzogcm9zLmJvb2xlYW5Ub1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuaW50ZWxsaWdlbnRMb2FkQmFsYW5jaW5nKSxcbiAgICAgIExvZ1NlcnZpY2U6IHJvcy5ib29sZWFuVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmxvZ1NlcnZpY2UpLFxuICAgICAgTG9nU3RvcmFnZTogcm9zLm51bWJlclRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5sb2dTdG9yYWdlKSxcbiAgICAgIFBlcmlvZDogcm9zLm51bWJlclRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5wZXJpb2QpLFxuICAgICAgUGVyaW9kVW5pdDogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5wZXJpb2RVbml0KSxcbiAgICAgIFFwc0V4dGVuc2lvbjogcm9zLm51bWJlclRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5xcHNFeHRlbnNpb24pLFxuICAgICAgVHJhZmZpY0JpbGxpbmdQcm90ZWN0aW9uVGhyZXNob2xkOiByb3MubnVtYmVyVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnRyYWZmaWNCaWxsaW5nUHJvdGVjdGlvblRocmVzaG9sZCksXG4gICAgICBXYWZWZXJzaW9uOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLndhZlZlcnNpb24pLFxuICAgIH07XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyBhIGJhc2UgZW5jYXBzdWxhdGlvbiBhcm91bmQgdGhlIFJPUyByZXNvdXJjZSB0eXBlIGBBTElZVU46OldBRjM6Okluc3RhbmNlYCwgd2hpY2ggaXMgdXNlZCB0byBjcmVhdGUgYSBXZWIgQXBwbGljYXRpb24gRmlyZXdhbGwgKFdBRikgMy4wIGluc3RhbmNlLlxuICogQE5vdGUgVGhpcyBjbGFzcyBkb2VzIG5vdCBjb250YWluIGFkZGl0aW9uYWwgZnVuY3Rpb25zLCBzbyBpdCBpcyByZWNvbW1lbmRlZCB0byB1c2UgdGhlIGBJbnN0YW5jZWAgY2xhc3MgaW5zdGVhZCBvZiB0aGlzIGNsYXNzIGZvciBhIG1vcmUgY29udmVuaWVudCBkZXZlbG9wbWVudCBleHBlcmllbmNlLlxuICogU2VlIGh0dHBzOi8vd3d3LmFsaWJhYmFjbG91ZC5jb20vaGVscC9yb3MvZGV2ZWxvcGVyLXJlZmVyZW5jZS9hbGl5dW4td2FmMy1pbnN0YW5jZVxuICovXG5leHBvcnQgY2xhc3MgUm9zSW5zdGFuY2UgZXh0ZW5kcyByb3MuUm9zUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZXNvdXJjZSB0eXBlIG5hbWUgZm9yIHRoaXMgcmVzb3VyY2UgY2xhc3MuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1NfUkVTT1VSQ0VfVFlQRV9OQU1FID0gXCJBTElZVU46OldBRjM6Okluc3RhbmNlXCI7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIEluc3RhbmNlSWQ6IEluc3RhbmNlIElkLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRySW5zdGFuY2VJZDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgcHVibGljIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuO1xuXG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcGF5VHlwZTogVGhlIGJpbGxpbmcgbWV0aG9kIG9mIHRoZSBmaXJld2FsbCBpbnN0YW5jZS4gVmFsaWQgdmFsdWVzOlxuICAgICAqIFBheUFzWW91R286IHBheS1hcy15b3UtZ29cbiAgICAgKiBTdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyBwYXlUeXBlOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcmVnaW9uOiBXZWIgQXBwbGljYXRpb24gRmlyZXdhbGwgaXMgYXZhaWxhYmxlIGluIHRoZSBmb2xsb3dpbmcgcmVnaW9uczogcmVnaW9ucyBpbiB0aGUgQ2hpbmVzZSBtYWlubGFuZCwgQ2hpbmEgKEhvbmcgS29uZyksIFNpbmdhcG9yZSAoU2luZ2Fwb3JlKSwgTWFsYXlzaWEgKEt1YWxhIEx1bXB1ciksIFVTIChTaWxpY29uIFZhbGxleSksIEF1c3RyYWxpYSAoU3lkbmV5KSwgR2VybWFueSAoRnJhbmtmdXJ0KSwgSW5kaWEgKE11bWJhaSksIEluZG9uZXNpYSAoSmFrYXJ0YSksIFVBRSAoRHViYWkpLCBhbmQgSmFwYW4gKFRva3lvKS5cbiAgICAgKiAgSWYgeW91ciBvcmlnaW4gc2VydmVyIGlzIGRlcGxveWVkIHdpdGhpbiB0aGUgQ2hpbmVzZSBtYWlubGFuZCwgc2VsZWN0IENoaW5lc2UgTWFpbmxhbmQuIElmIHlvdXIgb3JpZ2luIHNlcnZlciBpcyBkZXBsb3llZCBvdXRzaWRlIHRoZSBDaGluZXNlIG1haW5sYW5kLCBzZWxlY3QgT3V0c2lkZSBDaGluZXNlIG1haW5sYW5kLiBJbnRlbGxpZ2VudCByZWdpb24gc2VsZWN0aW9uIGlzIHN1cHBvcnRlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVnaW9uOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgYWRkaXRpb25hbFByb3RlY3Rpb25Ob2RlczogRWFjaCBwcm90ZWN0aW9uIGNsdXN0ZXIgaGFzIGF0IGxlYXN0IHR3byBwcm90ZWN0aW9uIG5vZGVzLCBhbmQgZWFjaCBub2RlIHByb3ZpZGVzIHRoZSBwcm90ZWN0aW9uIGNhcGFiaWxpdGllcyBvZiB1cCB0byA1LDAwMCBRUFMgZm9yIEhUVFAgcmVxdWVzdHMgb3IgdXAgdG8gMywwMDAgUVBTIGZvciBIVFRQUyByZXF1ZXN0cy4gWW91IGNhbiBhZGQgcHJvdGVjdGlvbiBub2RlcyB0byBpbmNyZWFzZSBwcm90ZWN0aW9uIGNhcGFiaWxpdGllcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYWRkaXRpb25hbFByb3RlY3Rpb25Ob2RlczogbnVtYmVyIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGFwaVNlY3VyaXR5OiBUaGUgQVBJIHNlY3VyaXR5IGZlYXR1cmUgZGV0ZWN0cyByZXNwb25zZXMgd2l0aCBzcGVjaWZpZWQgY2hhcmFjdGVyaXN0aWNzIHRvIGNoZWNrIHdoZXRoZXIgZGF0YSBsZWFrcyBvY2N1ci4gQWZ0ZXIgeW91IGVuYWJsZSB0aGUgZmVhdHVyZSwgV0FGIGlzIGF1dGhvcml6ZWQgdG8gcGVyZm9ybSByZWxhdGVkIGFuYWx5c2lzIG9uIHlvdXIgZGF0YS4gSWYgeW91IHNlbGVjdCBDaGluZXNlIE1haW5sYW5kLCBzZXJ2aWNlIGRlcGxveW1lbnQgYW5kIGRhdGEgcHJvY2Vzc2luZyBhcmUgcGVyZm9ybWVkIGluIHRoZSBDaGluZXNlIG1haW5sYW5kLlxuICAgICAqL1xuICAgIHB1YmxpYyBhcGlTZWN1cml0eTogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBhdXRvUGF5OiBXaGV0aGVyIHRvIGF1dG8gcGF5IHRoZSBiaWxsLlxuICAgICAqL1xuICAgIHB1YmxpYyBhdXRvUGF5OiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGF1dG9SZW5ldzogV2hldGhlciB0byBhdXRvIHJlbmV3IHRoZSBwcmVwYXkgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcHVibGljIGF1dG9SZW5ldzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBib3RBcHBQcm90ZWN0aW9uOiBCb3QgbWFuYWdlbWVudCBtb2R1bGUgZm9yIEFwcCBwcm90ZWN0aW9uLlxuICAgICAqL1xuICAgIHB1YmxpYyBib3RBcHBQcm90ZWN0aW9uOiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGJvdFdlYlByb3RlY3Rpb246IEJvdCBtYW5hZ2VtZW50IG1vZHVsZSBmb3IgV2ViIGFwcGxpY2F0aW9uIHByb3RlY3Rpb24uXG4gICAgICovXG4gICAgcHVibGljIGJvdFdlYlByb3RlY3Rpb246IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZG9tYWluc0V4dGVuc2lvbjogSWYgdGhlIGFjdHVhbCBudW1iZXIgb2YgcmVxdWlyZWQgYWNjZXNzIGRvbWFpbiBuYW1lcyBleGNlZWRzIHRoZSBudW1iZXIgb2YgZnJlZSBkb21haW4gbmFtZXMgaW4gdGhlIHZlcnNpb24sIHRoZSBudW1iZXIgb2YgZG9tYWluIG5hbWVzIGNhbiBiZSBleHBhbmRlZCBhY2NvcmRpbmcgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLkRvbWFpbiBuYW1lIGNvdW50aW5nIGRvZXMgbm90IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBkb21haW4gbmFtZSB0eXBlcy4gVGhlIG1haW4gZG9tYWluIG5hbWUsIHN1Yi1kb21haW4gbmFtZSwgYW5kIHBhbi1kb21haW4gbmFtZSBhcmUgZWFjaCBjb3VudGVkIGFzIG9uZSBkb21haW4gbmFtZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG9tYWluc0V4dGVuc2lvbjogbnVtYmVyIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGVsYXN0aWNRcHM6IFRoZSBidXJzdGFibGUgUVBTIChwYXktYXMteW91LWdvKSBmZWF0dXJlIGlzIHN1aXRhYmxlIGZvciBzY2VuYXJpb3MgdGhhdCBpbnZvbHZlIHNob3J0LXRlcm0gb3Igc3VkZGVuIHRyYWZmaWMgc3VyZ2VzLCBmb3IgZXhhbXBsZSwgZHVyaW5nIHByb21vdGlvbnMuIEluIHRoZXNlIHNjZW5hcmlvcywgdGhlIHRyYWZmaWMgcGVhayBtYXkgZXhjZWVkIHRoZSBzdW0gb2YgdGhlIG1heGltdW0gUVBTIHRoYXQgaXMgc3VwcG9ydGVkIGJ5IHlvdXIgV0FGIGVkaXRpb24gYW5kIHRoZSBleHRlbmRlZCBRUFMuIElmIHlvdSBlbmFibGUgdGhlIGZlYXR1cmUsIHlvdSBhcmUgY2hhcmdlZCBiYXNlZCBvbiB0aGUgYW1vdW50IG9mIGV4Y2VzcyBRUFMgcmVzb3VyY2VzIHRoYXQgeW91IHVzZS4gVGhpcyBoZWxwcyBwcmV2ZW50IHlvdXIgZG9tYWluIG5hbWVzIGZyb20gYmVpbmcgYWRkZWQgdG8gYSBzYW5kYm94IHdoZW4gUVBTIHJlc291cmNlcyBhcmUgZXhjZXNzaXZlbHkgdXNlZCBhbmQgaGVscHMgZW5zdXJlIHNlcnZpY2UgY29udGludWl0eS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZWxhc3RpY1FwczogbnVtYmVyIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGV4Y2x1c2l2ZUlwQWRkcmVzczogRXhjbHVlc2l2ZSBJUCBhZGRyZXNzIG51bWJlci5cbiAgICAgKi9cbiAgICBwdWJsaWMgZXhjbHVzaXZlSXBBZGRyZXNzOiBudW1iZXIgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZnJhdWREZXRlY3Rpb246IFlvdSBjYW4gZW5hYmxlIHRoaXMgZmVhdHVyZSBvbmx5IGFmdGVyIHlvdSBlbmFibGUgdGhlIGJvdCBtYW5hZ2VtZW50IG1vZHVsZS4gSWYgYWJub3JtYWwgcGhvbmUgbnVtYmVycyBhcmUgdXNlZCBpbiBsb2dvbiBvciByZWdpc3RyYXRpb24gc2NlbmFyaW9zLCBhbm9tYWx5IHRhZ3MgYXJlIG1hdGNoZWQuIFJlcXVlc3RzIGZyb20gdGhlIGFibm9ybWFsIHBob25lIG51bWJlcnMgYXJlIGJsb2NrZWQgb3IgQ0FQVENIQSB2ZXJpZmljYXRpb24gaXMgcmVxdWlyZWQuIFlvdSBhcmUgY2hhcmdlZCBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIHRpbWVzIHRoYXQgYW5vbWFseSB0YWdzIGFyZSBtYXRjaGVkLlxuICAgICAqL1xuICAgIHB1YmxpYyBmcmF1ZERldGVjdGlvbjogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBpZ25vcmVFeGlzdGluZzogV2hldGhlciB0byBpZ25vcmUgZXhpc3RpbmcgV0FGMyBpbnN0YW5jZVxuICAgICAqIEZhbHNlOiBST1Mgd2lsbCBwZXJmb3JtIGEgdW5pcXVlbmVzcyBjaGVjay5JZiB0aGUgV0FGMyBpbnN0YW5jZSBleGlzdHMsIGFuIGVycm9yIHdpbGwgYmUgcmVwb3J0ZWQgd2hlbiBjcmVhdGluZyBpdC5cbiAgICAgKiBUcnVlOiBST1Mgd2lsbCBub3QgY2hlY2sgdGhlIHVuaXF1ZW5lc3MuSWYgdGhlIFdBRjMgaW5zdGFuY2UgZXhpc3RzLCB0aGUgY3JlYXRpb24gcHJvY2VzcyB3aWxsIGJlIGlnbm9yZWQuXG4gICAgICogSWYgdGhlIFdBRjMgaW5zdGFuY2UgaXMgbm90IGNyZWF0ZWQgYnkgUk9TLCBpdCB3aWxsIGJlIGlnbm9yZWQgZHVyaW5nIHVwZGF0ZSBhbmQgZGVsZXRlIHN0YWdlLlxuICAgICAqL1xuICAgIHB1YmxpYyBpZ25vcmVFeGlzdGluZzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBpbnRlbGxpZ2VudExvYWRCYWxhbmNpbmc6IEludGVsbGlnZW50IGxvYWQgYmFsYW5jZXIgZm9yIFdBRiBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgaW50ZWxsaWdlbnRMb2FkQmFsYW5jaW5nOiBib29sZWFuIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGxvZ1NlcnZpY2U6IExvZyBzZXJ2aWNlIGZvciBXQUYgaW5zdGFuY2UuXG4gICAgICovXG4gICAgcHVibGljIGxvZ1NlcnZpY2U6IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgbG9nU3RvcmFnZTogTG9nIHN0b3JhZ2UgY2FwYWNpdHkuXG4gICAgICovXG4gICAgcHVibGljIGxvZ1N0b3JhZ2U6IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwZXJpb2Q6IFRoZSBzdWJzY3JpcHRpb24gcGVyaW9kIG9mIHRoZSBmaXJld2FsbElmIFBlcmlvZFVuaXQgaXMgbW9udGgsIHRoZSB2YWxpZCByYW5nZSBpcyAxLCAzLCA2XG4gICAgICogSWYgcGVyaW9kVW5pdCBpcyB5ZWFyLCB0aGUgdmFsaWQgcmFuZ2UgaXMgMSwgMiwgM1xuICAgICAqL1xuICAgIHB1YmxpYyBwZXJpb2Q6IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwZXJpb2RVbml0OiBUaGUgdW5pdCBvZiB0aGUgc3Vic2NyaXB0aW9uIGR1cmF0aW9uLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogTW9udGhcbiAgICAgKiBZZWFyXG4gICAgICogRGVmYXVsdCB2YWx1ZTogTW9udGguXG4gICAgICovXG4gICAgcHVibGljIHBlcmlvZFVuaXQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBxcHNFeHRlbnNpb246IEV4dGVuZGVkIFFQUy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcXBzRXh0ZW5zaW9uOiBudW1iZXIgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgdHJhZmZpY0JpbGxpbmdQcm90ZWN0aW9uVGhyZXNob2xkOiBJbiBwYXktYXMteW91LWdvIFdBRiAzLjAsIHRoZSB0cmFmZmljIGJpbGxpbmcgcHJvdGVjdGlvbiBmZWF0dXJlIGlzIGF1dG9tYXRpY2FsbHkgZW5hYmxlZCB0byBwcmV2ZW50IHVuZXhwZWN0ZWQgYW5kIHVudXN1YWxseSBoaWdoIGJpbGxzIHRoYXQgcmVzdWx0IGZyb20gdW5wcmVkaWN0YWJsZSBmYWN0b3JzIHN1Y2ggYXMgSFRUUCBmbG9vZCBhdHRhY2tzLiBBIGJpbGwgaXMgbm90IGdlbmVyYXRlZCBmb3IgYW4gaG91ciBpZiB0aGUgcGVhayB0cmFmZmljIGV4Y2VlZHMgdGhlIHRyYWZmaWMgYmlsbGluZyBwcm90ZWN0aW9uIHRocmVzaG9sZCB3aXRoaW4gdGhlIGhvdXIuIFRoZW4sIHlvdXIgV0FGIGluc3RhbmNlIGlzIGFkZGVkIHRvIGEgc2FuZGJveC4gSWYgdGhlIHBlYWsgdHJhZmZpYyBpcyBsb3dlciB0aGFuIHRoZSB0cmFmZmljIGJpbGxpbmcgcHJvdGVjdGlvbiB0aHJlc2hvbGQgdGhlIG5leHQgaG91ciwgeW91ciBXQUYgaW5zdGFuY2UgaXMgcmVtb3ZlZCBmcm9tIHRoZSBzYW5kYm94LlxuICAgICAqL1xuICAgIHB1YmxpYyB0cmFmZmljQmlsbGluZ1Byb3RlY3Rpb25UaHJlc2hvbGQ6IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSB3YWZWZXJzaW9uOiBUaGUgdmVyc2lvbiBvZiBXQUYzLjAuXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgd2FmVmVyc2lvbjogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNjb3BlIC0gc2NvcGUgaW4gd2hpY2ggdGhpcyByZXNvdXJjZSBpcyBkZWZpbmVkXG4gICAgICogQHBhcmFtIGlkICAgIC0gc2NvcGVkIGlkIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBwcm9wcyAtIHJlc291cmNlIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY29wZTogcm9zLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFJvc0luc3RhbmNlUHJvcHMsIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHNjb3BlLCBpZCwgeyB0eXBlOiBSb3NJbnN0YW5jZS5ST1NfUkVTT1VSQ0VfVFlQRV9OQU1FLCBwcm9wZXJ0aWVzOiBwcm9wcyB9KTtcbiAgICAgICAgdGhpcy5hdHRySW5zdGFuY2VJZCA9IHRoaXMuZ2V0QXR0KCdJbnN0YW5jZUlkJyk7XG5cbiAgICAgICAgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCA9IGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50O1xuICAgICAgICB0aGlzLnBheVR5cGUgPSBwcm9wcy5wYXlUeXBlO1xuICAgICAgICB0aGlzLnJlZ2lvbiA9IHByb3BzLnJlZ2lvbjtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsUHJvdGVjdGlvbk5vZGVzID0gcHJvcHMuYWRkaXRpb25hbFByb3RlY3Rpb25Ob2RlcztcbiAgICAgICAgdGhpcy5hcGlTZWN1cml0eSA9IHByb3BzLmFwaVNlY3VyaXR5O1xuICAgICAgICB0aGlzLmF1dG9QYXkgPSBwcm9wcy5hdXRvUGF5O1xuICAgICAgICB0aGlzLmF1dG9SZW5ldyA9IHByb3BzLmF1dG9SZW5ldztcbiAgICAgICAgdGhpcy5ib3RBcHBQcm90ZWN0aW9uID0gcHJvcHMuYm90QXBwUHJvdGVjdGlvbjtcbiAgICAgICAgdGhpcy5ib3RXZWJQcm90ZWN0aW9uID0gcHJvcHMuYm90V2ViUHJvdGVjdGlvbjtcbiAgICAgICAgdGhpcy5kb21haW5zRXh0ZW5zaW9uID0gcHJvcHMuZG9tYWluc0V4dGVuc2lvbjtcbiAgICAgICAgdGhpcy5lbGFzdGljUXBzID0gcHJvcHMuZWxhc3RpY1FwcztcbiAgICAgICAgdGhpcy5leGNsdXNpdmVJcEFkZHJlc3MgPSBwcm9wcy5leGNsdXNpdmVJcEFkZHJlc3M7XG4gICAgICAgIHRoaXMuZnJhdWREZXRlY3Rpb24gPSBwcm9wcy5mcmF1ZERldGVjdGlvbjtcbiAgICAgICAgdGhpcy5pZ25vcmVFeGlzdGluZyA9IHByb3BzLmlnbm9yZUV4aXN0aW5nO1xuICAgICAgICB0aGlzLmludGVsbGlnZW50TG9hZEJhbGFuY2luZyA9IHByb3BzLmludGVsbGlnZW50TG9hZEJhbGFuY2luZztcbiAgICAgICAgdGhpcy5sb2dTZXJ2aWNlID0gcHJvcHMubG9nU2VydmljZTtcbiAgICAgICAgdGhpcy5sb2dTdG9yYWdlID0gcHJvcHMubG9nU3RvcmFnZTtcbiAgICAgICAgdGhpcy5wZXJpb2QgPSBwcm9wcy5wZXJpb2Q7XG4gICAgICAgIHRoaXMucGVyaW9kVW5pdCA9IHByb3BzLnBlcmlvZFVuaXQ7XG4gICAgICAgIHRoaXMucXBzRXh0ZW5zaW9uID0gcHJvcHMucXBzRXh0ZW5zaW9uO1xuICAgICAgICB0aGlzLnRyYWZmaWNCaWxsaW5nUHJvdGVjdGlvblRocmVzaG9sZCA9IHByb3BzLnRyYWZmaWNCaWxsaW5nUHJvdGVjdGlvblRocmVzaG9sZDtcbiAgICAgICAgdGhpcy53YWZWZXJzaW9uID0gcHJvcHMud2FmVmVyc2lvbjtcbiAgICB9XG5cblxuICAgIHByb3RlY3RlZCBnZXQgcm9zUHJvcGVydGllcygpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXlUeXBlOiB0aGlzLnBheVR5cGUsXG4gICAgICAgICAgICByZWdpb246IHRoaXMucmVnaW9uLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3RlY3Rpb25Ob2RlczogdGhpcy5hZGRpdGlvbmFsUHJvdGVjdGlvbk5vZGVzLFxuICAgICAgICAgICAgYXBpU2VjdXJpdHk6IHRoaXMuYXBpU2VjdXJpdHksXG4gICAgICAgICAgICBhdXRvUGF5OiB0aGlzLmF1dG9QYXksXG4gICAgICAgICAgICBhdXRvUmVuZXc6IHRoaXMuYXV0b1JlbmV3LFxuICAgICAgICAgICAgYm90QXBwUHJvdGVjdGlvbjogdGhpcy5ib3RBcHBQcm90ZWN0aW9uLFxuICAgICAgICAgICAgYm90V2ViUHJvdGVjdGlvbjogdGhpcy5ib3RXZWJQcm90ZWN0aW9uLFxuICAgICAgICAgICAgZG9tYWluc0V4dGVuc2lvbjogdGhpcy5kb21haW5zRXh0ZW5zaW9uLFxuICAgICAgICAgICAgZWxhc3RpY1FwczogdGhpcy5lbGFzdGljUXBzLFxuICAgICAgICAgICAgZXhjbHVzaXZlSXBBZGRyZXNzOiB0aGlzLmV4Y2x1c2l2ZUlwQWRkcmVzcyxcbiAgICAgICAgICAgIGZyYXVkRGV0ZWN0aW9uOiB0aGlzLmZyYXVkRGV0ZWN0aW9uLFxuICAgICAgICAgICAgaWdub3JlRXhpc3Rpbmc6IHRoaXMuaWdub3JlRXhpc3RpbmcsXG4gICAgICAgICAgICBpbnRlbGxpZ2VudExvYWRCYWxhbmNpbmc6IHRoaXMuaW50ZWxsaWdlbnRMb2FkQmFsYW5jaW5nLFxuICAgICAgICAgICAgbG9nU2VydmljZTogdGhpcy5sb2dTZXJ2aWNlLFxuICAgICAgICAgICAgbG9nU3RvcmFnZTogdGhpcy5sb2dTdG9yYWdlLFxuICAgICAgICAgICAgcGVyaW9kOiB0aGlzLnBlcmlvZCxcbiAgICAgICAgICAgIHBlcmlvZFVuaXQ6IHRoaXMucGVyaW9kVW5pdCxcbiAgICAgICAgICAgIHFwc0V4dGVuc2lvbjogdGhpcy5xcHNFeHRlbnNpb24sXG4gICAgICAgICAgICB0cmFmZmljQmlsbGluZ1Byb3RlY3Rpb25UaHJlc2hvbGQ6IHRoaXMudHJhZmZpY0JpbGxpbmdQcm90ZWN0aW9uVGhyZXNob2xkLFxuICAgICAgICAgICAgd2FmVmVyc2lvbjogdGhpcy53YWZWZXJzaW9uLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgcmVuZGVyUHJvcGVydGllcyhwcm9wczoge1trZXk6IHN0cmluZ106IGFueX0pOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICB7XG4gICAgICAgIHJldHVybiByb3NJbnN0YW5jZVByb3BzVG9Sb3NUZW1wbGF0ZShwcm9wcywgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCk7XG4gICAgfVxufVxuIl19