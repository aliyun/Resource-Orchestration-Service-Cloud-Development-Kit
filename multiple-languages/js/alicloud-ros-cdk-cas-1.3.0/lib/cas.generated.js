"use strict";
// Generated from the AliCloud ROS Resource Specification
Object.defineProperty(exports, "__esModule", { value: true });
exports.RosSslCertificate = exports.RosOrder = exports.RosCertificate = void 0;
const ros = require("@alicloud/ros-cdk-core");
/**
 * Determine whether the given properties match those of a `RosCertificateProps`
 *
 * @param properties - the TypeScript properties of a `RosCertificateProps`
 *
 * @returns the result of the validation.
 */
function RosCertificatePropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('sourceIp', ros.validateString)(properties.sourceIp));
    errors.collect(ros.propertyValidator('lang', ros.validateString)(properties.lang));
    errors.collect(ros.propertyValidator('cert', ros.requiredValidator)(properties.cert));
    errors.collect(ros.propertyValidator('cert', ros.validateString)(properties.cert));
    errors.collect(ros.propertyValidator('key', ros.requiredValidator)(properties.key));
    errors.collect(ros.propertyValidator('key', ros.validateString)(properties.key));
    errors.collect(ros.propertyValidator('name', ros.requiredValidator)(properties.name));
    errors.collect(ros.propertyValidator('name', ros.validateString)(properties.name));
    return errors.wrap('supplied properties not correct for "RosCertificateProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::CAS::Certificate` resource
 *
 * @param properties - the TypeScript properties of a `RosCertificateProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::CAS::Certificate` resource.
 */
// @ts-ignore TS6133
function rosCertificatePropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosCertificatePropsValidator(properties).assertSuccess();
    }
    return {
        'Cert': ros.stringToRosTemplate(properties.cert),
        'Key': ros.stringToRosTemplate(properties.key),
        'Name': ros.stringToRosTemplate(properties.name),
        'Lang': ros.stringToRosTemplate(properties.lang),
        'SourceIp': ros.stringToRosTemplate(properties.sourceIp),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::CAS::Certificate`, which is used to add a certificate.
 * @Note This class does not contain additional functions, so it is recommended to use the `Certificate` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-cas-certificate
 */
class RosCertificate extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosCertificate.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrCertId = this.getAtt('CertId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.cert = props.cert;
        this.key = props.key;
        this.name = props.name;
        this.lang = props.lang;
        this.sourceIp = props.sourceIp;
    }
    get rosProperties() {
        return {
            cert: this.cert,
            key: this.key,
            name: this.name,
            lang: this.lang,
            sourceIp: this.sourceIp,
        };
    }
    renderProperties(props) {
        return rosCertificatePropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosCertificate = RosCertificate;
/**
 * The resource type name for this resource class.
 */
RosCertificate.ROS_RESOURCE_TYPE_NAME = "ALIYUN::CAS::Certificate";
/**
 * Determine whether the given properties match those of a `RosOrderProps`
 *
 * @param properties - the TypeScript properties of a `RosOrderProps`
 *
 * @returns the result of the validation.
 */
function RosOrderPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    if (properties.domainCnt && (typeof properties.domainCnt) !== 'object') {
        errors.collect(ros.propertyValidator('domainCnt', ros.validateRange)({
            data: properties.domainCnt,
            min: 1,
            max: 500,
        }));
    }
    errors.collect(ros.propertyValidator('domainCnt', ros.validateNumber)(properties.domainCnt));
    if (properties.domainType && (typeof properties.domainType) !== 'object') {
        errors.collect(ros.propertyValidator('domainType', ros.validateAllowedValues)({
            data: properties.domainType,
            allowedValues: ["all", "one", "multiple"],
        }));
    }
    errors.collect(ros.propertyValidator('domainType', ros.validateString)(properties.domainType));
    if (properties.service && (typeof properties.service) !== 'object') {
        errors.collect(ros.propertyValidator('service', ros.validateAllowedValues)({
            data: properties.service,
            allowedValues: ["VipProduct", "NoNeed", "ExpeditedProduct", "DeployProduct", "SM2DeployProduct"],
        }));
    }
    errors.collect(ros.propertyValidator('service', ros.validateString)(properties.service));
    if (properties.period && (typeof properties.period) !== 'object') {
        errors.collect(ros.propertyValidator('period', ros.validateRange)({
            data: properties.period,
            min: 1,
            max: 3,
        }));
    }
    errors.collect(ros.propertyValidator('period', ros.validateNumber)(properties.period));
    errors.collect(ros.propertyValidator('certType', ros.requiredValidator)(properties.certType));
    if (properties.certType && (typeof properties.certType) !== 'object') {
        errors.collect(ros.propertyValidator('certType', ros.validateAllowedValues)({
            data: properties.certType,
            allowedValues: ["DV", "OV", "EV"],
        }));
    }
    errors.collect(ros.propertyValidator('certType', ros.validateString)(properties.certType));
    errors.collect(ros.propertyValidator('certBrand', ros.requiredValidator)(properties.certBrand));
    if (properties.certBrand && (typeof properties.certBrand) !== 'object') {
        errors.collect(ros.propertyValidator('certBrand', ros.validateAllowedValues)({
            data: properties.certBrand,
            allowedValues: ["Rapid", "Globalsign", "vTrus", "Wosign", "Digicert", "Digicert pro", "Geotrust", "CFCA"],
        }));
    }
    errors.collect(ros.propertyValidator('certBrand', ros.validateString)(properties.certBrand));
    return errors.wrap('supplied properties not correct for "RosOrderProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::CAS::Order` resource
 *
 * @param properties - the TypeScript properties of a `RosOrderProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::CAS::Order` resource.
 */
// @ts-ignore TS6133
function rosOrderPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosOrderPropsValidator(properties).assertSuccess();
    }
    return {
        'CertBrand': ros.stringToRosTemplate(properties.certBrand),
        'CertType': ros.stringToRosTemplate(properties.certType),
        'DomainCnt': ros.numberToRosTemplate(properties.domainCnt),
        'DomainType': ros.stringToRosTemplate(properties.domainType),
        'Period': ros.numberToRosTemplate(properties.period),
        'Service': ros.stringToRosTemplate(properties.service),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::CAS::Order`, which is used to create a certificate order.
 * @Note This class does not contain additional functions, so it is recommended to use the `Order` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-cas-order
 */
class RosOrder extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosOrder.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.certBrand = props.certBrand;
        this.certType = props.certType;
        this.domainCnt = props.domainCnt;
        this.domainType = props.domainType;
        this.period = props.period;
        this.service = props.service;
    }
    get rosProperties() {
        return {
            certBrand: this.certBrand,
            certType: this.certType,
            domainCnt: this.domainCnt,
            domainType: this.domainType,
            period: this.period,
            service: this.service,
        };
    }
    renderProperties(props) {
        return rosOrderPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosOrder = RosOrder;
/**
 * The resource type name for this resource class.
 */
RosOrder.ROS_RESOURCE_TYPE_NAME = "ALIYUN::CAS::Order";
/**
 * Determine whether the given properties match those of a `RosSslCertificateProps`
 *
 * @param properties - the TypeScript properties of a `RosSslCertificateProps`
 *
 * @returns the result of the validation.
 */
function RosSslCertificatePropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    if (properties.domains && (Array.isArray(properties.domains) || (typeof properties.domains) === 'string')) {
        errors.collect(ros.propertyValidator('domains', ros.validateLength)({
            data: properties.domains.length,
            min: 1,
            max: 5,
        }));
    }
    errors.collect(ros.propertyValidator('domains', ros.listValidator(ros.validateString))(properties.domains));
    errors.collect(ros.propertyValidator('companyName', ros.validateString)(properties.companyName));
    if (properties.domainType && (typeof properties.domainType) !== 'object') {
        errors.collect(ros.propertyValidator('domainType', ros.validateAllowedValues)({
            data: properties.domainType,
            allowedValues: ["all", "one", "multiple"],
        }));
    }
    errors.collect(ros.propertyValidator('domainType', ros.validateString)(properties.domainType));
    errors.collect(ros.propertyValidator('email', ros.validateString)(properties.email));
    errors.collect(ros.propertyValidator('csr', ros.validateString)(properties.csr));
    errors.collect(ros.propertyValidator('username', ros.validateString)(properties.username));
    errors.collect(ros.propertyValidator('productCode', ros.validateString)(properties.productCode));
    errors.collect(ros.propertyValidator('phone', ros.validateString)(properties.phone));
    if (properties.certType && (typeof properties.certType) !== 'object') {
        errors.collect(ros.propertyValidator('certType', ros.validateAllowedValues)({
            data: properties.certType,
            allowedValues: ["DV", "OV", "EV"],
        }));
    }
    errors.collect(ros.propertyValidator('certType', ros.validateString)(properties.certType));
    if (properties.certBrand && (typeof properties.certBrand) !== 'object') {
        errors.collect(ros.propertyValidator('certBrand', ros.validateAllowedValues)({
            data: properties.certBrand,
            allowedValues: ["Rapid", "Globalsign", "vTrus", "Wosign", "Digicert", "Digicert pro", "Geotrust", "CFCA"],
        }));
    }
    errors.collect(ros.propertyValidator('certBrand', ros.validateString)(properties.certBrand));
    if (properties.validateType && (typeof properties.validateType) !== 'object') {
        errors.collect(ros.propertyValidator('validateType', ros.validateAllowedValues)({
            data: properties.validateType,
            allowedValues: ["DNS", "FILE"],
        }));
    }
    errors.collect(ros.propertyValidator('validateType', ros.validateString)(properties.validateType));
    return errors.wrap('supplied properties not correct for "RosSslCertificateProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::CAS::SslCertificate` resource
 *
 * @param properties - the TypeScript properties of a `RosSslCertificateProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::CAS::SslCertificate` resource.
 */
// @ts-ignore TS6133
function rosSslCertificatePropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosSslCertificatePropsValidator(properties).assertSuccess();
    }
    return {
        'CertBrand': ros.stringToRosTemplate(properties.certBrand),
        'CertType': ros.stringToRosTemplate(properties.certType),
        'CompanyName': ros.stringToRosTemplate(properties.companyName),
        'Csr': ros.stringToRosTemplate(properties.csr),
        'Domains': ros.listMapper(ros.stringToRosTemplate)(properties.domains),
        'DomainType': ros.stringToRosTemplate(properties.domainType),
        'Email': ros.stringToRosTemplate(properties.email),
        'Phone': ros.stringToRosTemplate(properties.phone),
        'ProductCode': ros.stringToRosTemplate(properties.productCode),
        'Username': ros.stringToRosTemplate(properties.username),
        'ValidateType': ros.stringToRosTemplate(properties.validateType),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::CAS::SslCertificate`, which is used to create an SSL certificate.
 * @Note This class does not contain additional functions, so it is recommended to use the `SslCertificate` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-cas-sslcertificate
 */
class RosSslCertificate extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosSslCertificate.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrCertificateId = this.getAtt('CertificateId');
        this.attrOrderId = this.getAtt('OrderId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.certBrand = props.certBrand;
        this.certType = props.certType;
        this.companyName = props.companyName;
        this.csr = props.csr;
        this.domains = props.domains;
        this.domainType = props.domainType;
        this.email = props.email;
        this.phone = props.phone;
        this.productCode = props.productCode;
        this.username = props.username;
        this.validateType = props.validateType;
    }
    get rosProperties() {
        return {
            certBrand: this.certBrand,
            certType: this.certType,
            companyName: this.companyName,
            csr: this.csr,
            domains: this.domains,
            domainType: this.domainType,
            email: this.email,
            phone: this.phone,
            productCode: this.productCode,
            username: this.username,
            validateType: this.validateType,
        };
    }
    renderProperties(props) {
        return rosSslCertificatePropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosSslCertificate = RosSslCertificate;
/**
 * The resource type name for this resource class.
 */
RosSslCertificate.ROS_RESOURCE_TYPE_NAME = "ALIYUN::CAS::SslCertificate";
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FzLmdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNhcy5nZW5lcmF0ZWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHlEQUF5RDs7O0FBRXpELDhDQUE4QztBQWtDOUM7Ozs7OztHQU1HO0FBQ0gsU0FBUyw0QkFBNEIsQ0FBQyxVQUFlO0lBQ2pELElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1FBQUUsT0FBTyxHQUFHLENBQUMsa0JBQWtCLENBQUM7S0FBRTtJQUNuRSxNQUFNLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDM0YsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuRixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDdEYsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuRixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDcEYsTUFB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QUFLLENBQUMsV0FBVyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztRQUMvQixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUM7SUFDM0MsQ0FBQztJQUdELElBQWMsYUFBYTtRQUN2QixPQUFPO1lBQ0gsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1lBQ3pCLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtZQUN2QixXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVc7WUFDN0IsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHO1lBQ2IsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO1lBQ3JCLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtZQUMzQixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7WUFDakIsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO1lBQ2pCLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVztZQUM3QixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7WUFDdkIsWUFBWSxFQUFFLElBQUksQ0FBQyxZQUFZO1NBQ2xDLENBQUM7SUFDTixDQUFDO0lBQ1MsZ0JBQWdCLENBQUMsS0FBMkI7UUFDbEQsT0FBTyxtQ0FBbUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7SUFDN0YsQ0FBQzs7QUFoSkwsOENBaUpDO0FBaEpHOztHQUVHO0FBQ29CLHdDQUFzQixHQUFHLDZCQUE2QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGZyb20gdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBTcGVjaWZpY2F0aW9uXG5cbmltcG9ydCAqIGFzIHJvcyBmcm9tICdAYWxpY2xvdWQvcm9zLWNkay1jb3JlJztcblxuLyoqXG4gKiBQcm9wZXJ0aWVzIGZvciBkZWZpbmluZyBhIGBSb3NDZXJ0aWZpY2F0ZWAuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1jYXMtY2VydGlmaWNhdGVcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSb3NDZXJ0aWZpY2F0ZVByb3BzIHtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBjZXJ0OiBTcGVjaWZ5IHRoZSBjb250ZW50IG9mIHRoZSBjZXJ0aWZpY2F0ZS4gVG8gdXNlIHRoZSBQRU0gZW5jb2RpbmcgZm9ybWF0LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGNlcnQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBrZXk6IFNwZWNpZnkgdGhlIGNlcnRpZmljYXRlIHByaXZhdGUga2V5IGNvbnRlbnQuIFRvIHVzZSB0aGUgUEVNIGVuY29kaW5nIGZvcm1hdC5cbiAgICAgKi9cbiAgICByZWFkb25seSBrZXk6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBuYW1lOiBDdXN0b20gY2VydGlmaWNhdGUgbmFtZS4gVGhlIGNlcnRpZmljYXRlIG5hbWUgdW5kZXIgYSB1c2VyIGNhbm5vdCBiZSBkdXBsaWNhdGVkLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBsYW5nOiBTcGVjaWZpZXMgdGhlIGxhbmd1YWdlIHR5cGUgZm9yIHJlcXVlc3RpbmcgYW5kIHJlY2VpdmluZyBtZXNzYWdlcy5cbiAgICAgKi9cbiAgICByZWFkb25seSBsYW5nPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHNvdXJjZUlwOiBTcGVjaWZpZXMgdGhlIHNvdXJjZSBJUCBhZGRyZXNzIG9mIHRoZSByZXF1ZXN0LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHNvdXJjZUlwPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xufVxuXG4vKipcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBnaXZlbiBwcm9wZXJ0aWVzIG1hdGNoIHRob3NlIG9mIGEgYFJvc0NlcnRpZmljYXRlUHJvcHNgXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc0NlcnRpZmljYXRlUHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgdmFsaWRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gUm9zQ2VydGlmaWNhdGVQcm9wc1ZhbGlkYXRvcihwcm9wZXJ0aWVzOiBhbnkpOiByb3MuVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcm9zLlZBTElEQVRJT05fU1VDQ0VTUzsgfVxuICAgIGNvbnN0IGVycm9ycyA9IG5ldyByb3MuVmFsaWRhdGlvblJlc3VsdHMoKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3NvdXJjZUlwJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnNvdXJjZUlwKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdsYW5nJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmxhbmcpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NlcnQnLCByb3MucmVxdWlyZWRWYWxpZGF0b3IpKHByb3BlcnRpZXMuY2VydCkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignY2VydCcsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5jZXJ0KSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdrZXknLCByb3MucmVxdWlyZWRWYWxpZGF0b3IpKHByb3BlcnRpZXMua2V5KSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdrZXknLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMua2V5KSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCduYW1lJywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLm5hbWUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ25hbWUnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMubmFtZSkpO1xuICAgIHJldHVybiBlcnJvcnMud3JhcCgnc3VwcGxpZWQgcHJvcGVydGllcyBub3QgY29ycmVjdCBmb3IgXCJSb3NDZXJ0aWZpY2F0ZVByb3BzXCInKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpDQVM6OkNlcnRpZmljYXRlYCByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NDZXJ0aWZpY2F0ZVByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpDQVM6OkNlcnRpZmljYXRlYCByZXNvdXJjZS5cbiAqL1xuLy8gQHRzLWlnbm9yZSBUUzYxMzNcbmZ1bmN0aW9uIHJvc0NlcnRpZmljYXRlUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXM6IGFueSwgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pOiBhbnkge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHByb3BlcnRpZXM7IH1cbiAgICBpZihlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCkge1xuICAgICAgICBSb3NDZXJ0aWZpY2F0ZVByb3BzVmFsaWRhdG9yKHByb3BlcnRpZXMpLmFzc2VydFN1Y2Nlc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICdDZXJ0Jzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5jZXJ0KSxcbiAgICAgICdLZXknOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmtleSksXG4gICAgICAnTmFtZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMubmFtZSksXG4gICAgICAnTGFuZyc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMubGFuZyksXG4gICAgICAnU291cmNlSXAnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnNvdXJjZUlwKSxcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYSBiYXNlIGVuY2Fwc3VsYXRpb24gYXJvdW5kIHRoZSBST1MgcmVzb3VyY2UgdHlwZSBgQUxJWVVOOjpDQVM6OkNlcnRpZmljYXRlYCwgd2hpY2ggaXMgdXNlZCB0byBhZGQgYSBjZXJ0aWZpY2F0ZS5cbiAqIEBOb3RlIFRoaXMgY2xhc3MgZG9lcyBub3QgY29udGFpbiBhZGRpdGlvbmFsIGZ1bmN0aW9ucywgc28gaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBgQ2VydGlmaWNhdGVgIGNsYXNzIGluc3RlYWQgb2YgdGhpcyBjbGFzcyBmb3IgYSBtb3JlIGNvbnZlbmllbnQgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZS5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWNhcy1jZXJ0aWZpY2F0ZVxuICovXG5leHBvcnQgY2xhc3MgUm9zQ2VydGlmaWNhdGUgZXh0ZW5kcyByb3MuUm9zUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZXNvdXJjZSB0eXBlIG5hbWUgZm9yIHRoaXMgcmVzb3VyY2UgY2xhc3MuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1NfUkVTT1VSQ0VfVFlQRV9OQU1FID0gXCJBTElZVU46OkNBUzo6Q2VydGlmaWNhdGVcIjtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgQ2VydElkOiBDZXJ0aWZpY2F0ZSBJRC5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0ckNlcnRJZDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgcHVibGljIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuO1xuXG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgY2VydDogU3BlY2lmeSB0aGUgY29udGVudCBvZiB0aGUgY2VydGlmaWNhdGUuIFRvIHVzZSB0aGUgUEVNIGVuY29kaW5nIGZvcm1hdC5cbiAgICAgKi9cbiAgICBwdWJsaWMgY2VydDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGtleTogU3BlY2lmeSB0aGUgY2VydGlmaWNhdGUgcHJpdmF0ZSBrZXkgY29udGVudC4gVG8gdXNlIHRoZSBQRU0gZW5jb2RpbmcgZm9ybWF0LlxuICAgICAqL1xuICAgIHB1YmxpYyBrZXk6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBuYW1lOiBDdXN0b20gY2VydGlmaWNhdGUgbmFtZS4gVGhlIGNlcnRpZmljYXRlIG5hbWUgdW5kZXIgYSB1c2VyIGNhbm5vdCBiZSBkdXBsaWNhdGVkLlxuICAgICAqL1xuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgbGFuZzogU3BlY2lmaWVzIHRoZSBsYW5ndWFnZSB0eXBlIGZvciByZXF1ZXN0aW5nIGFuZCByZWNlaXZpbmcgbWVzc2FnZXMuXG4gICAgICovXG4gICAgcHVibGljIGxhbmc6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBzb3VyY2VJcDogU3BlY2lmaWVzIHRoZSBzb3VyY2UgSVAgYWRkcmVzcyBvZiB0aGUgcmVxdWVzdC5cbiAgICAgKi9cbiAgICBwdWJsaWMgc291cmNlSXA6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzY29wZSAtIHNjb3BlIGluIHdoaWNoIHRoaXMgcmVzb3VyY2UgaXMgZGVmaW5lZFxuICAgICAqIEBwYXJhbSBpZCAgICAtIHNjb3BlZCBpZCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gcHJvcHMgLSByZXNvdXJjZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2NvcGU6IHJvcy5Db25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBSb3NDZXJ0aWZpY2F0ZVByb3BzLCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbikge1xuICAgICAgICBzdXBlcihzY29wZSwgaWQsIHsgdHlwZTogUm9zQ2VydGlmaWNhdGUuUk9TX1JFU09VUkNFX1RZUEVfTkFNRSwgcHJvcGVydGllczogcHJvcHMgfSk7XG4gICAgICAgIHRoaXMuYXR0ckNlcnRJZCA9IHRoaXMuZ2V0QXR0KCdDZXJ0SWQnKTtcblxuICAgICAgICB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50ID0gZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ7XG4gICAgICAgIHRoaXMuY2VydCA9IHByb3BzLmNlcnQ7XG4gICAgICAgIHRoaXMua2V5ID0gcHJvcHMua2V5O1xuICAgICAgICB0aGlzLm5hbWUgPSBwcm9wcy5uYW1lO1xuICAgICAgICB0aGlzLmxhbmcgPSBwcm9wcy5sYW5nO1xuICAgICAgICB0aGlzLnNvdXJjZUlwID0gcHJvcHMuc291cmNlSXA7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2VydDogdGhpcy5jZXJ0LFxuICAgICAgICAgICAga2V5OiB0aGlzLmtleSxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGxhbmc6IHRoaXMubGFuZyxcbiAgICAgICAgICAgIHNvdXJjZUlwOiB0aGlzLnNvdXJjZUlwLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgcmVuZGVyUHJvcGVydGllcyhwcm9wczoge1trZXk6IHN0cmluZ106IGFueX0pOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICB7XG4gICAgICAgIHJldHVybiByb3NDZXJ0aWZpY2F0ZVByb3BzVG9Sb3NUZW1wbGF0ZShwcm9wcywgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3BlcnRpZXMgZm9yIGRlZmluaW5nIGEgYFJvc09yZGVyYC5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWNhcy1vcmRlclxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJvc09yZGVyUHJvcHMge1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGNlcnRCcmFuZDogQ2VydGlmaWNhdGUgYnJhbmQuIFZhbGlkIHZhbHVlczogUmFwaWQsIEdsb2JhbHNpZ24sIHZUcnVzLCBXb3NpZ24sIERpZ2ljZXJ0LCBEaWdpY2VydCBwcm8sIEdlb3RydXN0LCBDRkNBLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGNlcnRCcmFuZDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGNlcnRUeXBlOiBDZXJ0aWZpY2F0ZSB0eXBlLiBWYWxpZCB2YWx1ZXM6IERWLCBPViwgRVYuXG4gICAgICovXG4gICAgcmVhZG9ubHkgY2VydFR5cGU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBkb21haW5DbnQ6IE51bWJlciBvZiBkb21haW5zIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBjZXJ0aWZpY2F0ZS4gVmFsaWQgdmFsdWVzOiAxLTUwMC5cbiAgICAgKi9cbiAgICByZWFkb25seSBkb21haW5DbnQ/OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZG9tYWluVHlwZTogRG9tYWluIHR5cGUuIFZhbGlkIHZhbHVlczogb25lLCBhbGwsIG11bHRpcGxlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGRvbWFpblR5cGU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcGVyaW9kOiBTZXJ2aWNlIHRpbWUgb2YgdGhlIGNlcnRpZmljYXRlLCBpbiB5ZWFyLiBWYWxpZCB2YWx1ZXM6IDEsIDIsIDMuXG4gICAgICogTm90ZTogU3RhcnRpbmcgU2VwdGVtYmVyIDEsIDIwMjAsIGNlcnRpZmljYXRlcyBpc3N1ZWQgYnkgY2FzIGFyb3VuZCB0aGUgd29ybGQgd2lsbCBiZSB2YWxpZCBmb3IgYSBtYXhpbXVtIG9mIDEgeWVhci5cbiAgICAgKi9cbiAgICByZWFkb25seSBwZXJpb2Q/OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgc2VydmljZTogV2hldGhlciBlbmFibGUgb3RoZXIgc2VydmljZS4gVmFsaWQgdmFsdWVzOlxuICAgICAqIC0gTm9OZWVkOiBEbyBub3QgYXBwbHkgZm9yIGFueSBzZXJ2aWNlcy5cbiAgICAgKiAtIEV4cGVkaXRlZFByb2R1Y3Q6IFJlcXVlc3QgYXNzaXN0YW5jZSBzZXJ2aWNlcy5cbiAgICAgKiAtIERlcGxveVByb2R1Y3Q6IERlcGxveSBzZXJ2aWNlcy5cbiAgICAgKiAtIFNNMkRlcGxveVByb2R1Y3Q6IERlcGxveSBzZXJ2aWNlcyB3aXRoIFNNMiBlbmNyeXB0aW9uLlxuICAgICAqIC0gVmlwUHJvZHVjdDogUmVxdWVzdCBhc3Npc3RhbmNlIGFuZCBkZXBsb3ltZW50IHNlcnZpY2VzLlxuICAgICAqICoqTm90ZToqKiBUaGlzIHBhcmFtZXRlciBpcyBub3Qgc3VwcG9ydGVkIGJ5IGludGVybmF0aW9uYWwgc3RhdGlvbnMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgc2VydmljZT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgZ2l2ZW4gcHJvcGVydGllcyBtYXRjaCB0aG9zZSBvZiBhIGBSb3NPcmRlclByb3BzYFxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NPcmRlclByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIHZhbGlkYXRpb24uXG4gKi9cbmZ1bmN0aW9uIFJvc09yZGVyUHJvcHNWYWxpZGF0b3IocHJvcGVydGllczogYW55KTogcm9zLlZhbGlkYXRpb25SZXN1bHQge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHJvcy5WQUxJREFUSU9OX1NVQ0NFU1M7IH1cbiAgICBjb25zdCBlcnJvcnMgPSBuZXcgcm9zLlZhbGlkYXRpb25SZXN1bHRzKCk7XG4gICAgaWYocHJvcGVydGllcy5kb21haW5DbnQgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLmRvbWFpbkNudCkgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZG9tYWluQ250Jywgcm9zLnZhbGlkYXRlUmFuZ2UpKHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMuZG9tYWluQ250LFxuICAgICAgICAgICAgbWluOiAxLFxuICAgICAgICAgICAgbWF4OiA1MDAsXG4gICAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2RvbWFpbkNudCcsIHJvcy52YWxpZGF0ZU51bWJlcikocHJvcGVydGllcy5kb21haW5DbnQpKTtcbiAgICBpZihwcm9wZXJ0aWVzLmRvbWFpblR5cGUgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLmRvbWFpblR5cGUpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2RvbWFpblR5cGUnLCByb3MudmFsaWRhdGVBbGxvd2VkVmFsdWVzKSh7XG4gICAgICAgICAgZGF0YTogcHJvcGVydGllcy5kb21haW5UeXBlLFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFtcImFsbFwiLFwib25lXCIsXCJtdWx0aXBsZVwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2RvbWFpblR5cGUnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuZG9tYWluVHlwZSkpO1xuICAgIGlmKHByb3BlcnRpZXMuc2VydmljZSAmJiAodHlwZW9mIHByb3BlcnRpZXMuc2VydmljZSkgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignc2VydmljZScsIHJvcy52YWxpZGF0ZUFsbG93ZWRWYWx1ZXMpKHtcbiAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLnNlcnZpY2UsXG4gICAgICAgICAgYWxsb3dlZFZhbHVlczogW1wiVmlwUHJvZHVjdFwiLFwiTm9OZWVkXCIsXCJFeHBlZGl0ZWRQcm9kdWN0XCIsXCJEZXBsb3lQcm9kdWN0XCIsXCJTTTJEZXBsb3lQcm9kdWN0XCJdLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignc2VydmljZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5zZXJ2aWNlKSk7XG4gICAgaWYocHJvcGVydGllcy5wZXJpb2QgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLnBlcmlvZCkgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncGVyaW9kJywgcm9zLnZhbGlkYXRlUmFuZ2UpKHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMucGVyaW9kLFxuICAgICAgICAgICAgbWluOiAxLFxuICAgICAgICAgICAgbWF4OiAzLFxuICAgICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdwZXJpb2QnLCByb3MudmFsaWRhdGVOdW1iZXIpKHByb3BlcnRpZXMucGVyaW9kKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdjZXJ0VHlwZScsIHJvcy5yZXF1aXJlZFZhbGlkYXRvcikocHJvcGVydGllcy5jZXJ0VHlwZSkpO1xuICAgIGlmKHByb3BlcnRpZXMuY2VydFR5cGUgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLmNlcnRUeXBlKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdjZXJ0VHlwZScsIHJvcy52YWxpZGF0ZUFsbG93ZWRWYWx1ZXMpKHtcbiAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLmNlcnRUeXBlLFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFtcIkRWXCIsXCJPVlwiLFwiRVZcIl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdjZXJ0VHlwZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5jZXJ0VHlwZSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignY2VydEJyYW5kJywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLmNlcnRCcmFuZCkpO1xuICAgIGlmKHByb3BlcnRpZXMuY2VydEJyYW5kICYmICh0eXBlb2YgcHJvcGVydGllcy5jZXJ0QnJhbmQpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NlcnRCcmFuZCcsIHJvcy52YWxpZGF0ZUFsbG93ZWRWYWx1ZXMpKHtcbiAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLmNlcnRCcmFuZCxcbiAgICAgICAgICBhbGxvd2VkVmFsdWVzOiBbXCJSYXBpZFwiLFwiR2xvYmFsc2lnblwiLFwidlRydXNcIixcIldvc2lnblwiLFwiRGlnaWNlcnRcIixcIkRpZ2ljZXJ0IHByb1wiLFwiR2VvdHJ1c3RcIixcIkNGQ0FcIl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdjZXJ0QnJhbmQnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuY2VydEJyYW5kKSk7XG4gICAgcmV0dXJuIGVycm9ycy53cmFwKCdzdXBwbGllZCBwcm9wZXJ0aWVzIG5vdCBjb3JyZWN0IGZvciBcIlJvc09yZGVyUHJvcHNcIicpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OkNBUzo6T3JkZXJgIHJlc291cmNlXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc09yZGVyUHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OkNBUzo6T3JkZXJgIHJlc291cmNlLlxuICovXG4vLyBAdHMtaWdub3JlIFRTNjEzM1xuZnVuY3Rpb24gcm9zT3JkZXJQcm9wc1RvUm9zVGVtcGxhdGUocHJvcGVydGllczogYW55LCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbik6IGFueSB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcHJvcGVydGllczsgfVxuICAgIGlmKGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50KSB7XG4gICAgICAgIFJvc09yZGVyUHJvcHNWYWxpZGF0b3IocHJvcGVydGllcykuYXNzZXJ0U3VjY2VzcygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ0NlcnRCcmFuZCc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuY2VydEJyYW5kKSxcbiAgICAgICdDZXJ0VHlwZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuY2VydFR5cGUpLFxuICAgICAgJ0RvbWFpbkNudCc6IHJvcy5udW1iZXJUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuZG9tYWluQ250KSxcbiAgICAgICdEb21haW5UeXBlJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5kb21haW5UeXBlKSxcbiAgICAgICdQZXJpb2QnOiByb3MubnVtYmVyVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnBlcmlvZCksXG4gICAgICAnU2VydmljZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuc2VydmljZSksXG4gICAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGEgYmFzZSBlbmNhcHN1bGF0aW9uIGFyb3VuZCB0aGUgUk9TIHJlc291cmNlIHR5cGUgYEFMSVlVTjo6Q0FTOjpPcmRlcmAsIHdoaWNoIGlzIHVzZWQgdG8gY3JlYXRlIGEgY2VydGlmaWNhdGUgb3JkZXIuXG4gKiBATm90ZSBUaGlzIGNsYXNzIGRvZXMgbm90IGNvbnRhaW4gYWRkaXRpb25hbCBmdW5jdGlvbnMsIHNvIGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgYE9yZGVyYCBjbGFzcyBpbnN0ZWFkIG9mIHRoaXMgY2xhc3MgZm9yIGEgbW9yZSBjb252ZW5pZW50IGRldmVsb3BtZW50IGV4cGVyaWVuY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1jYXMtb3JkZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFJvc09yZGVyIGV4dGVuZHMgcm9zLlJvc1Jlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzb3VyY2UgdHlwZSBuYW1lIGZvciB0aGlzIHJlc291cmNlIGNsYXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUk9TX1JFU09VUkNFX1RZUEVfTkFNRSA9IFwiQUxJWVVOOjpDQVM6Ok9yZGVyXCI7XG5cbiAgICBwdWJsaWMgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW47XG5cblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBjZXJ0QnJhbmQ6IENlcnRpZmljYXRlIGJyYW5kLiBWYWxpZCB2YWx1ZXM6IFJhcGlkLCBHbG9iYWxzaWduLCB2VHJ1cywgV29zaWduLCBEaWdpY2VydCwgRGlnaWNlcnQgcHJvLCBHZW90cnVzdCwgQ0ZDQS5cbiAgICAgKi9cbiAgICBwdWJsaWMgY2VydEJyYW5kOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgY2VydFR5cGU6IENlcnRpZmljYXRlIHR5cGUuIFZhbGlkIHZhbHVlczogRFYsIE9WLCBFVi5cbiAgICAgKi9cbiAgICBwdWJsaWMgY2VydFR5cGU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBkb21haW5DbnQ6IE51bWJlciBvZiBkb21haW5zIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBjZXJ0aWZpY2F0ZS4gVmFsaWQgdmFsdWVzOiAxLTUwMC5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG9tYWluQ250OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZG9tYWluVHlwZTogRG9tYWluIHR5cGUuIFZhbGlkIHZhbHVlczogb25lLCBhbGwsIG11bHRpcGxlLlxuICAgICAqL1xuICAgIHB1YmxpYyBkb21haW5UeXBlOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcGVyaW9kOiBTZXJ2aWNlIHRpbWUgb2YgdGhlIGNlcnRpZmljYXRlLCBpbiB5ZWFyLiBWYWxpZCB2YWx1ZXM6IDEsIDIsIDMuXG4gICAgICogTm90ZTogU3RhcnRpbmcgU2VwdGVtYmVyIDEsIDIwMjAsIGNlcnRpZmljYXRlcyBpc3N1ZWQgYnkgY2FzIGFyb3VuZCB0aGUgd29ybGQgd2lsbCBiZSB2YWxpZCBmb3IgYSBtYXhpbXVtIG9mIDEgeWVhci5cbiAgICAgKi9cbiAgICBwdWJsaWMgcGVyaW9kOiBudW1iZXIgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgc2VydmljZTogV2hldGhlciBlbmFibGUgb3RoZXIgc2VydmljZS4gVmFsaWQgdmFsdWVzOlxuICAgICAqIC0gTm9OZWVkOiBEbyBub3QgYXBwbHkgZm9yIGFueSBzZXJ2aWNlcy5cbiAgICAgKiAtIEV4cGVkaXRlZFByb2R1Y3Q6IFJlcXVlc3QgYXNzaXN0YW5jZSBzZXJ2aWNlcy5cbiAgICAgKiAtIERlcGxveVByb2R1Y3Q6IERlcGxveSBzZXJ2aWNlcy5cbiAgICAgKiAtIFNNMkRlcGxveVByb2R1Y3Q6IERlcGxveSBzZXJ2aWNlcyB3aXRoIFNNMiBlbmNyeXB0aW9uLlxuICAgICAqIC0gVmlwUHJvZHVjdDogUmVxdWVzdCBhc3Npc3RhbmNlIGFuZCBkZXBsb3ltZW50IHNlcnZpY2VzLlxuICAgICAqICoqTm90ZToqKiBUaGlzIHBhcmFtZXRlciBpcyBub3Qgc3VwcG9ydGVkIGJ5IGludGVybmF0aW9uYWwgc3RhdGlvbnMuXG4gICAgICovXG4gICAgcHVibGljIHNlcnZpY2U6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzY29wZSAtIHNjb3BlIGluIHdoaWNoIHRoaXMgcmVzb3VyY2UgaXMgZGVmaW5lZFxuICAgICAqIEBwYXJhbSBpZCAgICAtIHNjb3BlZCBpZCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gcHJvcHMgLSByZXNvdXJjZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2NvcGU6IHJvcy5Db25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBSb3NPcmRlclByb3BzLCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbikge1xuICAgICAgICBzdXBlcihzY29wZSwgaWQsIHsgdHlwZTogUm9zT3JkZXIuUk9TX1JFU09VUkNFX1RZUEVfTkFNRSwgcHJvcGVydGllczogcHJvcHMgfSk7XG5cbiAgICAgICAgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCA9IGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50O1xuICAgICAgICB0aGlzLmNlcnRCcmFuZCA9IHByb3BzLmNlcnRCcmFuZDtcbiAgICAgICAgdGhpcy5jZXJ0VHlwZSA9IHByb3BzLmNlcnRUeXBlO1xuICAgICAgICB0aGlzLmRvbWFpbkNudCA9IHByb3BzLmRvbWFpbkNudDtcbiAgICAgICAgdGhpcy5kb21haW5UeXBlID0gcHJvcHMuZG9tYWluVHlwZTtcbiAgICAgICAgdGhpcy5wZXJpb2QgPSBwcm9wcy5wZXJpb2Q7XG4gICAgICAgIHRoaXMuc2VydmljZSA9IHByb3BzLnNlcnZpY2U7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2VydEJyYW5kOiB0aGlzLmNlcnRCcmFuZCxcbiAgICAgICAgICAgIGNlcnRUeXBlOiB0aGlzLmNlcnRUeXBlLFxuICAgICAgICAgICAgZG9tYWluQ250OiB0aGlzLmRvbWFpbkNudCxcbiAgICAgICAgICAgIGRvbWFpblR5cGU6IHRoaXMuZG9tYWluVHlwZSxcbiAgICAgICAgICAgIHBlcmlvZDogdGhpcy5wZXJpb2QsXG4gICAgICAgICAgICBzZXJ2aWNlOiB0aGlzLnNlcnZpY2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHByb3RlY3RlZCByZW5kZXJQcm9wZXJ0aWVzKHByb3BzOiB7W2tleTogc3RyaW5nXTogYW55fSk6IHsgW2tleTogc3RyaW5nXTogYW55IH0gIHtcbiAgICAgICAgcmV0dXJuIHJvc09yZGVyUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BzLCB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50KTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvcGVydGllcyBmb3IgZGVmaW5pbmcgYSBgUm9zU3NsQ2VydGlmaWNhdGVgLlxuICogU2VlIGh0dHBzOi8vd3d3LmFsaWJhYmFjbG91ZC5jb20vaGVscC9yb3MvZGV2ZWxvcGVyLXJlZmVyZW5jZS9hbGl5dW4tY2FzLXNzbGNlcnRpZmljYXRlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUm9zU3NsQ2VydGlmaWNhdGVQcm9wcyB7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgY2VydEJyYW5kOiBDZXJ0aWZpY2F0ZSBicmFuZC4gVmFsaWQgdmFsdWVzOiBSYXBpZCwgR2xvYmFsc2lnbiwgdlRydXMsIFdvc2lnbiwgRGlnaWNlcnQsIERpZ2ljZXJ0IHBybywgR2VvdHJ1c3QsIENGQ0EuXG4gICAgICogKipOb3RlOioqIFRoaXMgcGFyYW1ldGVyIG11c3QgYmUgc3BlY2lmaWVkIGFsb25nIHdpdGggb3Igd2l0aG91dCB0aGUgQ2VydFR5cGUgYW5kIERvbWFpblR5cCBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGNlcnRCcmFuZD86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBjZXJ0VHlwZTogQ2VydGlmaWNhdGUgdHlwZS4gVmFsaWQgdmFsdWVzOiBEViwgT1YsIEVWLlxuICAgICAqICoqTm90ZToqKiBUaGlzIHBhcmFtZXRlciBtdXN0IGJlIHNwZWNpZmllZCBhbG9uZyB3aXRoIG9yIHdpdGhvdXQgdGhlIERvbWFpblR5cGUgYW5kIENlcnRCcmFuZCBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGNlcnRUeXBlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGNvbXBhbnlOYW1lOiBUaGUgbmFtZSBvZiB0aGUgY2VydGlmaWNhdGUgYXBwbGljYXRpb24gY29tcGFueS5cbiAgICAgKiAqKk5vdGUqKjogVGhpcyBwYXJhbWV0ZXIgaXMgb25seSBhcHBsaWNhYmxlIHdoZW4gYXBwbHlpbmcgZm9yIE9WIGNlcnRpZmljYXRlcy5cbiAgICAgKiBXaGVuIGFwcGx5aW5nIGZvciBPViBjZXJ0aWZpY2F0ZSwgaWYgeW91IHNldCB0aGUgY29tcGFueSBuYW1lIGhlcmUsIGl0IG1lYW5zIHRoYXQgdGhlIGNvcnJlc3BvbmRpbmcgY29tcGFueSBpbmZvcm1hdGlvbiBpbiB0aGUgaW5mb3JtYXRpb24gbWFuYWdlbWVudCBtb2R1bGUgaXMgdXNlZDsgSWYgeW91IGRvIG5vdCBzZXQgdGhpcyBwYXJhbWV0ZXIsIGl0IGluZGljYXRlcyB0aGF0IHRoZSBsYXRlc3QgY29tcGFueSBpbmZvcm1hdGlvbiBhZGRlZCBpcyBzZWxlY3RlZCBmcm9tIHRoZSBpbmZvcm1hdGlvbiBtYW5hZ2VtZW50IG1vZHVsZS5cbiAgICAgKi9cbiAgICByZWFkb25seSBjb21wYW55TmFtZT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBjc3I6IFRoZSBjb250ZW50cyBvZiBhIG1hbnVhbGx5IGdlbmVyYXRlZCBDU1IgZmlsZSBmb3IgYSBkb21haW4gbmFtZSB1c2luZyB0aGUgT3BlblNTTCBvciBLZXl0b29sIHRvb2xzLiBUaGUgQ1NSIGtleSB0eXBlIG11c3QgYmUgUlNBIG9yIEVDQywgYW5kIHRoZSBSU0Ega2V5IGxlbmd0aCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAyMDQ4LiBJZiB0aGlzIHBhcmFtZXRlciBpcyBub3Qgc2V0LCB0aGUgQ1NSIGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCBmb3IgeW91IGJ5IHRoZSBTU0wgY2VydGlmaWNhdGUgc2VydmljZS5cbiAgICAgKiBBIENTUiAoQ2VydGlmaWNhdGUgU2lnbmluZyBSZXF1ZXN0KSBpcyBhIGNlcnRpZmljYXRlIHNpZ25pbmcgcmVxdWVzdCBmaWxlIHRoYXQgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgeW91ciBzZXJ2ZXIgYW5kIHlvdXIgY29tcGFueS4gV2hlbiB5b3UgYXBwbHkgZm9yIGEgY2VydGlmaWNhdGUsIHlvdSB3aWxsIG5lZWQgdG8gc3VibWl0IHRoZSBDU1IgZmlsZSBvZiB5b3VyIGNlcnRpZmljYXRlIHRvIHRoZSBDQSBjZXJ0aWZpY2F0aW9uIGF1dGhvcml0eSBmb3IgcmV2aWV3LiBBZnRlciB0aGUgQ0EgY2VudGVyIHNpZ25zIHRoZSBDU1IgZmlsZSB3aXRoIHRoZSByb290IGNlcnRpZmljYXRlJ3MgcHJpdmF0ZSBrZXksIGl0IHdpbGwgZ2VuZXJhdGUgdGhlIGNlcnRpZmljYXRlIHB1YmxpYyBrZXkgZmlsZSAodGhhdCBpcywgdGhlIFNTTCBjZXJ0aWZpY2F0ZSBpc3N1ZWQgdG8geW91KS5cbiAgICAgKi9cbiAgICByZWFkb25seSBjc3I/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZG9tYWluczogVGhlIGRvbWFpbiB0byBiaW5kIHRoZSBjZXJ0aWZpY2F0ZSB0by4gVGhlIHNwZWNpZmljIHJlcXVpcmVtZW50cyBhcmUgYXMgZm9sbG93czpcbiAgICAgKiAtIFN1cHBvcnRzIHNpbmdsZSBvciB3aWxkY2FyZCBkb21haW5zIChlLmcuLCAqLmFsaXl1bmRvYy5jb20pLlxuICAgICAqIC0gTXVsdGlwbGUgZG9tYWlucyBhcmUgc3VwcG9ydGVkLiBZb3UgY2FuIHNldCB1cCB0byA1IGRvbWFpbnMuXG4gICAgICogLSBJZiB5b3Ugc2V0IG1vcmUgdGhhbiBvbmUgZG9tYWluIG5hbWUsIHRoZSBtdWx0aXBsZSBkb21haW5zIGNhbiBvbmx5IGJlIHNpbmdsZSBkb21haW4gbmFtZSBvciB3aWxkY2FyZCBkb21haW4gbmFtZSwgbm90IGJvdGggc2luZ2xlIGRvbWFpbiBuYW1lIGFuZCB3aWxkY2FyZCBkb21haW4gbmFtZS5cbiAgICAgKiAqKk5vdGU6KiogVGhpcyBpcyByZXF1aXJlZCB3aGVuIHRoZSBjZXJ0aWZpY2F0ZSBpcyBib3VuZCB0byBtb3JlIHRoYW4gb25lIGhvc3RuYW1lLiBUaGlzIHBhcmFtZXRlciBpcyBub3QgYWxsb3dlZCB0byBiZSBlbXB0eSBhdCB0aGUgc2FtZSB0aW1lIGFzIHRoZSBDc3IgcGFyYW1ldGVyLiBJZiB5b3Ugc2V0IGJvdGggdGhpcyBwYXJhbWV0ZXIgYW5kIHRoZSBDc3IgcGFyYW1ldGVyLCB0YWtlIHRoZSBDTiBmaWVsZCB2YWx1ZSBpbiB0aGUgQ3NyIGFzIHRoZSBkb21haW4gbmFtZSBmb3IgdGhlIGNlcnRpZmljYXRlIHRvIGJpbmQgdG8uXG4gICAgICovXG4gICAgcmVhZG9ubHkgZG9tYWlucz86IEFycmF5PHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZT4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZG9tYWluVHlwZTogRG9tYWluIHR5cGUuIFZhbGlkIHZhbHVlczogb25lLCBhbGwsIG11bHRpcGxlLlxuICAgICAqICoqTm90ZToqKiBUaGlzIHBhcmFtZXRlciBtdXN0IGJlIHNwZWNpZmllZCBhbG9uZyB3aXRoIG9yIHdpdGhvdXQgdGhlIENlcnRUeXBlIGFuZCBDZXJ0QnJhbmQgcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICByZWFkb25seSBkb21haW5UeXBlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGVtYWlsOiBUaGUgYXBwbGljYW50J3MgZW1haWwuXG4gICAgICovXG4gICAgcmVhZG9ubHkgZW1haWw/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcGhvbmU6IFRoZSBhcHBsaWNhbnQncyBtb2JpbGUgcGhvbmUgbnVtYmVyLiBBIENBIG9mZmljaWFsIG1heSBjb250YWN0IHlvdSBhdCB0aGlzIG51bWJlciB0byB2ZXJpZnkgeW91ciBjZXJ0aWZpY2F0ZSByZXF1ZXN0LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHBob25lPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHByb2R1Y3RDb2RlOiBTcGVjaWZpY2F0aW9uIG9mIHRoZSBjZXJ0aWZpY2F0ZSB0byBhcHBseSBmb3IuIFZhbHVlOlxuICAgICAqIC0gZGlnaWNlcnQtZnJlZS0xLWZyZWUgKGRlZmF1bHQpIDogVGhpcyBpbmRpY2F0ZXMgRGlnaUNlcnQgRFYgc2luZ2xlLWRvbWFpbiBjZXJ0aWZpY2F0ZXMgKGZyZWUgMy1tb250aCBjZXJ0aWZpY2F0ZXMpLlxuICAgICAqIC0gc3ltYW50ZWMtZnJlZSAxLWZyZWU6IFN0YW5kcyBmb3IgRGlnaUNlcnQgRFYgZnJlZSBzaW5nbGUtZG9tYWluIGNlcnRpZmljYXRlICgxLXllYXIgZnJlZSBjZXJ0aWZpY2F0ZSkuXG4gICAgICogLSBzeW1hbnRlYy1kdi0xLXN0YXJ0ZXI6IFRoaXMgcmVwcmVzZW50cyB0aGUgRGlnaUNlcnQgRFYgd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogLSBzeW1hbnRlYy1vdi0xLXBlcnNvbmFsOiBUaGlzIHN0YW5kcyBmb3IgRGlnaUNlcnQgT1Ygc2luZ2xlLWRvbWFpbiBjZXJ0aWZpY2F0ZVxuICAgICAqIC0gc3ltYW50ZWMtb3Ytdy1wZXJzb25hbDogVGhpcyBzdGFuZHMgZm9yIERpZ2lDZXJ0IE9WIHdpbGRjYXJkIGRvbWFpbiBuYW1lIGNlcnRpZmljYXRlLlxuICAgICAqIC0gZ2VvdHJ1c3QtZHYtMS1zdGFydGVyOiBUaGlzIHJlcHJlc2VudHMgdGhlIEdlb1RydXN0IERWIHNpbmdsZS1kb21haW4gY2VydGlmaWNhdGUuXG4gICAgICogLSBnZW90cnVzdC1kdi13LXN0YXJ0ZXI6IFRoaXMgcmVwcmVzZW50cyB0aGUgR2VvVHJ1c3QgRFYgd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogLSBnZW90cnVzdC1vdi0xLXBlcnNvbmFsOiBUaGlzIHN0YW5kcyBmb3IgR2VvVHJ1c3QgT1Ygc2luZ2xlLWRvbWFpbiBjZXJ0aWZpY2F0ZS5cbiAgICAgKiAtIGdlb3RydXN0LW92LXctcGVyc29uYWw6IFRoaXMgcmVwcmVzZW50cyB0aGUgR2VvVHJ1c3QgT1Ygd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogLSBnbG9iYWxzaWduLWR2LTEtcGVyc29uYWw6IFRoaXMgc3RhbmRzIGZvciBHbG9iYWxTaWduIERWIHNpbmdsZS1kb21haW4gY2VydGlmaWNhdGUuXG4gICAgICogLSBnbG9iYWxzaWduLWR2LXctYWR2YW5jZWQ6IFRoaXMgc3RhbmRzIGZvciBHbG9iYWxTaWduIERWIHdpbGRjYXJkIGRvbWFpbiBuYW1lIGNlcnRpZmljYXRlLlxuICAgICAqIC0gZ2xvYmFsc2lnbi1vdi0xLXBlcnNvbmFsOiBUaGlzIHN0YW5kcyBmb3IgR2xvYmFsU2lnbiBPViBzaW5nbGUtZG9tYWluIGNlcnRpZmljYXRlLlxuICAgICAqIC0gZ2xvYmFsc2lnbi1vdi13LWFkdmFuY2VkOiBUaGlzIHJlcHJlc2VudHMgdGhlIEdsb2JhbFNpZ24gT1Ygd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogLSBjZmNhLW92LTEtcGVyc29uYWw6IFRoaXMgc3RhbmRzIGZvciBDRkNBIE9WIHNpbmdsZSBkb21haW4gY2VydGlmaWNhdGVcbiAgICAgKiAtIGNmY2EtZXYtdy1hZHZhbmNlZDogVGhpcyBzdGFuZHMgZm9yIENGQ0EgT1Ygd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogKipOb3RlOioqIElmIHlvdSBzcGVjaWZ5IHRoaXMgcGFyYW1ldGVyLCB5b3UgZG8gbm90IG5lZWQgdG8gc3BlY2lmeSB0aGUgRG9tYWluVHlwZSwgQ2VydFR5cGUsIGFuZCBDZXJ0QnJhbmQgcGFyYW1ldGVyczsgb3RoZXJ3aXNlLCB0aGlzIHBhcmFtZXRlciB3aWxsIHByZXZhaWwuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcHJvZHVjdENvZGU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgdXNlcm5hbWU6IFRoZSBhcHBsaWNhbnQncyBuYW1lLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHVzZXJuYW1lPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHZhbGlkYXRlVHlwZTogSG93IGRvbWFpbiBvd25lcnNoaXAgaXMgdmVyaWZpZWQuIFZhbGlkIHZhbHVlczpcbiAgICAgKiAtIEROUzogRE5TIHZhbGlkYXRpb24gVGhlIG93bmVyc2hpcCBvZiB0aGUgZG9tYWluIG5hbWUgaXMgdmVyaWZpZWQgYnkgYWRkaW5nIGEgVFhUIHR5cGUgRE5TIHJlY29yZCB0byB0aGUgZG9tYWluIG5hbWUncyBETlMgbWFuYWdlbWVudCBwbGF0Zm9ybS4gWW91IG5lZWQgYWRtaW5pc3RyYXRpdmUgcGVybWlzc2lvbiBmb3IgZG9tYWluIHJlc29sdXRpb24gdG8gY29tcGxldGUgdmFsaWRhdGlvbi5cbiAgICAgKiAtIEZJTEU6IEZpbGUgdmFsaWRhdGlvbiBPd25lcnNoaXAgb2YgYSBkb21haW4gbmFtZSBpcyB2ZXJpZmllZCBieSBjcmVhdGluZyBhIHNwZWNpZmllZCBmaWxlIG9uIHRoZSBkb21haW4gbmFtZSBzZXJ2ZXIuIFlvdSBuZWVkIGFkbWluaXN0cmF0b3IgYWNjZXNzIHRvIHlvdXIgZG9tYWluIG5hbWUgc2VydmVyIHRvIGNvbXBsZXRlIHZhbGlkYXRpb24uXG4gICAgICovXG4gICAgcmVhZG9ubHkgdmFsaWRhdGVUeXBlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xufVxuXG4vKipcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBnaXZlbiBwcm9wZXJ0aWVzIG1hdGNoIHRob3NlIG9mIGEgYFJvc1NzbENlcnRpZmljYXRlUHJvcHNgXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc1NzbENlcnRpZmljYXRlUHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgdmFsaWRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gUm9zU3NsQ2VydGlmaWNhdGVQcm9wc1ZhbGlkYXRvcihwcm9wZXJ0aWVzOiBhbnkpOiByb3MuVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcm9zLlZBTElEQVRJT05fU1VDQ0VTUzsgfVxuICAgIGNvbnN0IGVycm9ycyA9IG5ldyByb3MuVmFsaWRhdGlvblJlc3VsdHMoKTtcbiAgICBpZihwcm9wZXJ0aWVzLmRvbWFpbnMgJiYgKEFycmF5LmlzQXJyYXkocHJvcGVydGllcy5kb21haW5zKSB8fCAodHlwZW9mIHByb3BlcnRpZXMuZG9tYWlucykgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2RvbWFpbnMnLCByb3MudmFsaWRhdGVMZW5ndGgpKHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMuZG9tYWlucy5sZW5ndGgsXG4gICAgICAgICAgICBtaW46IDEsXG4gICAgICAgICAgICBtYXg6IDUsXG4gICAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2RvbWFpbnMnLCByb3MubGlzdFZhbGlkYXRvcihyb3MudmFsaWRhdGVTdHJpbmcpKShwcm9wZXJ0aWVzLmRvbWFpbnMpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NvbXBhbnlOYW1lJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmNvbXBhbnlOYW1lKSk7XG4gICAgaWYocHJvcGVydGllcy5kb21haW5UeXBlICYmICh0eXBlb2YgcHJvcGVydGllcy5kb21haW5UeXBlKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdkb21haW5UeXBlJywgcm9zLnZhbGlkYXRlQWxsb3dlZFZhbHVlcykoe1xuICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMuZG9tYWluVHlwZSxcbiAgICAgICAgICBhbGxvd2VkVmFsdWVzOiBbXCJhbGxcIixcIm9uZVwiLFwibXVsdGlwbGVcIl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdkb21haW5UeXBlJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmRvbWFpblR5cGUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2VtYWlsJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmVtYWlsKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdjc3InLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuY3NyKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd1c2VybmFtZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy51c2VybmFtZSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncHJvZHVjdENvZGUnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMucHJvZHVjdENvZGUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3Bob25lJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnBob25lKSk7XG4gICAgaWYocHJvcGVydGllcy5jZXJ0VHlwZSAmJiAodHlwZW9mIHByb3BlcnRpZXMuY2VydFR5cGUpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NlcnRUeXBlJywgcm9zLnZhbGlkYXRlQWxsb3dlZFZhbHVlcykoe1xuICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMuY2VydFR5cGUsXG4gICAgICAgICAgYWxsb3dlZFZhbHVlczogW1wiRFZcIixcIk9WXCIsXCJFVlwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NlcnRUeXBlJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmNlcnRUeXBlKSk7XG4gICAgaWYocHJvcGVydGllcy5jZXJ0QnJhbmQgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLmNlcnRCcmFuZCkgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignY2VydEJyYW5kJywgcm9zLnZhbGlkYXRlQWxsb3dlZFZhbHVlcykoe1xuICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMuY2VydEJyYW5kLFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFtcIlJhcGlkXCIsXCJHbG9iYWxzaWduXCIsXCJ2VHJ1c1wiLFwiV29zaWduXCIsXCJEaWdpY2VydFwiLFwiRGlnaWNlcnQgcHJvXCIsXCJHZW90cnVzdFwiLFwiQ0ZDQVwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NlcnRCcmFuZCcsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5jZXJ0QnJhbmQpKTtcbiAgICBpZihwcm9wZXJ0aWVzLnZhbGlkYXRlVHlwZSAmJiAodHlwZW9mIHByb3BlcnRpZXMudmFsaWRhdGVUeXBlKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd2YWxpZGF0ZVR5cGUnLCByb3MudmFsaWRhdGVBbGxvd2VkVmFsdWVzKSh7XG4gICAgICAgICAgZGF0YTogcHJvcGVydGllcy52YWxpZGF0ZVR5cGUsXG4gICAgICAgICAgYWxsb3dlZFZhbHVlczogW1wiRE5TXCIsXCJGSUxFXCJdLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigndmFsaWRhdGVUeXBlJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnZhbGlkYXRlVHlwZSkpO1xuICAgIHJldHVybiBlcnJvcnMud3JhcCgnc3VwcGxpZWQgcHJvcGVydGllcyBub3QgY29ycmVjdCBmb3IgXCJSb3NTc2xDZXJ0aWZpY2F0ZVByb3BzXCInKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpDQVM6OlNzbENlcnRpZmljYXRlYCByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NTc2xDZXJ0aWZpY2F0ZVByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpDQVM6OlNzbENlcnRpZmljYXRlYCByZXNvdXJjZS5cbiAqL1xuLy8gQHRzLWlnbm9yZSBUUzYxMzNcbmZ1bmN0aW9uIHJvc1NzbENlcnRpZmljYXRlUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXM6IGFueSwgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pOiBhbnkge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHByb3BlcnRpZXM7IH1cbiAgICBpZihlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCkge1xuICAgICAgICBSb3NTc2xDZXJ0aWZpY2F0ZVByb3BzVmFsaWRhdG9yKHByb3BlcnRpZXMpLmFzc2VydFN1Y2Nlc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICdDZXJ0QnJhbmQnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmNlcnRCcmFuZCksXG4gICAgICAnQ2VydFR5cGUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmNlcnRUeXBlKSxcbiAgICAgICdDb21wYW55TmFtZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuY29tcGFueU5hbWUpLFxuICAgICAgJ0Nzcic6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuY3NyKSxcbiAgICAgICdEb21haW5zJzogcm9zLmxpc3RNYXBwZXIocm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUpKHByb3BlcnRpZXMuZG9tYWlucyksXG4gICAgICAnRG9tYWluVHlwZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuZG9tYWluVHlwZSksXG4gICAgICAnRW1haWwnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmVtYWlsKSxcbiAgICAgICdQaG9uZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMucGhvbmUpLFxuICAgICAgJ1Byb2R1Y3RDb2RlJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5wcm9kdWN0Q29kZSksXG4gICAgICAnVXNlcm5hbWUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnVzZXJuYW1lKSxcbiAgICAgICdWYWxpZGF0ZVR5cGUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnZhbGlkYXRlVHlwZSksXG4gICAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGEgYmFzZSBlbmNhcHN1bGF0aW9uIGFyb3VuZCB0aGUgUk9TIHJlc291cmNlIHR5cGUgYEFMSVlVTjo6Q0FTOjpTc2xDZXJ0aWZpY2F0ZWAsIHdoaWNoIGlzIHVzZWQgdG8gY3JlYXRlIGFuIFNTTCBjZXJ0aWZpY2F0ZS5cbiAqIEBOb3RlIFRoaXMgY2xhc3MgZG9lcyBub3QgY29udGFpbiBhZGRpdGlvbmFsIGZ1bmN0aW9ucywgc28gaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBgU3NsQ2VydGlmaWNhdGVgIGNsYXNzIGluc3RlYWQgb2YgdGhpcyBjbGFzcyBmb3IgYSBtb3JlIGNvbnZlbmllbnQgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZS5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWNhcy1zc2xjZXJ0aWZpY2F0ZVxuICovXG5leHBvcnQgY2xhc3MgUm9zU3NsQ2VydGlmaWNhdGUgZXh0ZW5kcyByb3MuUm9zUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZXNvdXJjZSB0eXBlIG5hbWUgZm9yIHRoaXMgcmVzb3VyY2UgY2xhc3MuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1NfUkVTT1VSQ0VfVFlQRV9OQU1FID0gXCJBTElZVU46OkNBUzo6U3NsQ2VydGlmaWNhdGVcIjtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgQ2VydGlmaWNhdGVJZDogVGhlIElEIG9mIHRoZSBjZXJ0aWZpY2F0ZSBpc3N1ZWQgdG8geW91LlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyQ2VydGlmaWNhdGVJZDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBPcmRlcklkOiBUaGUgSUQgb2YgdGhlIGNlcnRpZmljYXRlIG9yZGVyLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyT3JkZXJJZDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgcHVibGljIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuO1xuXG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgY2VydEJyYW5kOiBDZXJ0aWZpY2F0ZSBicmFuZC4gVmFsaWQgdmFsdWVzOiBSYXBpZCwgR2xvYmFsc2lnbiwgdlRydXMsIFdvc2lnbiwgRGlnaWNlcnQsIERpZ2ljZXJ0IHBybywgR2VvdHJ1c3QsIENGQ0EuXG4gICAgICogKipOb3RlOioqIFRoaXMgcGFyYW1ldGVyIG11c3QgYmUgc3BlY2lmaWVkIGFsb25nIHdpdGggb3Igd2l0aG91dCB0aGUgQ2VydFR5cGUgYW5kIERvbWFpblR5cCBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjZXJ0QnJhbmQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBjZXJ0VHlwZTogQ2VydGlmaWNhdGUgdHlwZS4gVmFsaWQgdmFsdWVzOiBEViwgT1YsIEVWLlxuICAgICAqICoqTm90ZToqKiBUaGlzIHBhcmFtZXRlciBtdXN0IGJlIHNwZWNpZmllZCBhbG9uZyB3aXRoIG9yIHdpdGhvdXQgdGhlIERvbWFpblR5cGUgYW5kIENlcnRCcmFuZCBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjZXJ0VHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGNvbXBhbnlOYW1lOiBUaGUgbmFtZSBvZiB0aGUgY2VydGlmaWNhdGUgYXBwbGljYXRpb24gY29tcGFueS5cbiAgICAgKiAqKk5vdGUqKjogVGhpcyBwYXJhbWV0ZXIgaXMgb25seSBhcHBsaWNhYmxlIHdoZW4gYXBwbHlpbmcgZm9yIE9WIGNlcnRpZmljYXRlcy5cbiAgICAgKiBXaGVuIGFwcGx5aW5nIGZvciBPViBjZXJ0aWZpY2F0ZSwgaWYgeW91IHNldCB0aGUgY29tcGFueSBuYW1lIGhlcmUsIGl0IG1lYW5zIHRoYXQgdGhlIGNvcnJlc3BvbmRpbmcgY29tcGFueSBpbmZvcm1hdGlvbiBpbiB0aGUgaW5mb3JtYXRpb24gbWFuYWdlbWVudCBtb2R1bGUgaXMgdXNlZDsgSWYgeW91IGRvIG5vdCBzZXQgdGhpcyBwYXJhbWV0ZXIsIGl0IGluZGljYXRlcyB0aGF0IHRoZSBsYXRlc3QgY29tcGFueSBpbmZvcm1hdGlvbiBhZGRlZCBpcyBzZWxlY3RlZCBmcm9tIHRoZSBpbmZvcm1hdGlvbiBtYW5hZ2VtZW50IG1vZHVsZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgY29tcGFueU5hbWU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBjc3I6IFRoZSBjb250ZW50cyBvZiBhIG1hbnVhbGx5IGdlbmVyYXRlZCBDU1IgZmlsZSBmb3IgYSBkb21haW4gbmFtZSB1c2luZyB0aGUgT3BlblNTTCBvciBLZXl0b29sIHRvb2xzLiBUaGUgQ1NSIGtleSB0eXBlIG11c3QgYmUgUlNBIG9yIEVDQywgYW5kIHRoZSBSU0Ega2V5IGxlbmd0aCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAyMDQ4LiBJZiB0aGlzIHBhcmFtZXRlciBpcyBub3Qgc2V0LCB0aGUgQ1NSIGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCBmb3IgeW91IGJ5IHRoZSBTU0wgY2VydGlmaWNhdGUgc2VydmljZS5cbiAgICAgKiBBIENTUiAoQ2VydGlmaWNhdGUgU2lnbmluZyBSZXF1ZXN0KSBpcyBhIGNlcnRpZmljYXRlIHNpZ25pbmcgcmVxdWVzdCBmaWxlIHRoYXQgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgeW91ciBzZXJ2ZXIgYW5kIHlvdXIgY29tcGFueS4gV2hlbiB5b3UgYXBwbHkgZm9yIGEgY2VydGlmaWNhdGUsIHlvdSB3aWxsIG5lZWQgdG8gc3VibWl0IHRoZSBDU1IgZmlsZSBvZiB5b3VyIGNlcnRpZmljYXRlIHRvIHRoZSBDQSBjZXJ0aWZpY2F0aW9uIGF1dGhvcml0eSBmb3IgcmV2aWV3LiBBZnRlciB0aGUgQ0EgY2VudGVyIHNpZ25zIHRoZSBDU1IgZmlsZSB3aXRoIHRoZSByb290IGNlcnRpZmljYXRlJ3MgcHJpdmF0ZSBrZXksIGl0IHdpbGwgZ2VuZXJhdGUgdGhlIGNlcnRpZmljYXRlIHB1YmxpYyBrZXkgZmlsZSAodGhhdCBpcywgdGhlIFNTTCBjZXJ0aWZpY2F0ZSBpc3N1ZWQgdG8geW91KS5cbiAgICAgKi9cbiAgICBwdWJsaWMgY3NyOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZG9tYWluczogVGhlIGRvbWFpbiB0byBiaW5kIHRoZSBjZXJ0aWZpY2F0ZSB0by4gVGhlIHNwZWNpZmljIHJlcXVpcmVtZW50cyBhcmUgYXMgZm9sbG93czpcbiAgICAgKiAtIFN1cHBvcnRzIHNpbmdsZSBvciB3aWxkY2FyZCBkb21haW5zIChlLmcuLCAqLmFsaXl1bmRvYy5jb20pLlxuICAgICAqIC0gTXVsdGlwbGUgZG9tYWlucyBhcmUgc3VwcG9ydGVkLiBZb3UgY2FuIHNldCB1cCB0byA1IGRvbWFpbnMuXG4gICAgICogLSBJZiB5b3Ugc2V0IG1vcmUgdGhhbiBvbmUgZG9tYWluIG5hbWUsIHRoZSBtdWx0aXBsZSBkb21haW5zIGNhbiBvbmx5IGJlIHNpbmdsZSBkb21haW4gbmFtZSBvciB3aWxkY2FyZCBkb21haW4gbmFtZSwgbm90IGJvdGggc2luZ2xlIGRvbWFpbiBuYW1lIGFuZCB3aWxkY2FyZCBkb21haW4gbmFtZS5cbiAgICAgKiAqKk5vdGU6KiogVGhpcyBpcyByZXF1aXJlZCB3aGVuIHRoZSBjZXJ0aWZpY2F0ZSBpcyBib3VuZCB0byBtb3JlIHRoYW4gb25lIGhvc3RuYW1lLiBUaGlzIHBhcmFtZXRlciBpcyBub3QgYWxsb3dlZCB0byBiZSBlbXB0eSBhdCB0aGUgc2FtZSB0aW1lIGFzIHRoZSBDc3IgcGFyYW1ldGVyLiBJZiB5b3Ugc2V0IGJvdGggdGhpcyBwYXJhbWV0ZXIgYW5kIHRoZSBDc3IgcGFyYW1ldGVyLCB0YWtlIHRoZSBDTiBmaWVsZCB2YWx1ZSBpbiB0aGUgQ3NyIGFzIHRoZSBkb21haW4gbmFtZSBmb3IgdGhlIGNlcnRpZmljYXRlIHRvIGJpbmQgdG8uXG4gICAgICovXG4gICAgcHVibGljIGRvbWFpbnM6IEFycmF5PHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZT4gfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZG9tYWluVHlwZTogRG9tYWluIHR5cGUuIFZhbGlkIHZhbHVlczogb25lLCBhbGwsIG11bHRpcGxlLlxuICAgICAqICoqTm90ZToqKiBUaGlzIHBhcmFtZXRlciBtdXN0IGJlIHNwZWNpZmllZCBhbG9uZyB3aXRoIG9yIHdpdGhvdXQgdGhlIENlcnRUeXBlIGFuZCBDZXJ0QnJhbmQgcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZG9tYWluVHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGVtYWlsOiBUaGUgYXBwbGljYW50J3MgZW1haWwuXG4gICAgICovXG4gICAgcHVibGljIGVtYWlsOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcGhvbmU6IFRoZSBhcHBsaWNhbnQncyBtb2JpbGUgcGhvbmUgbnVtYmVyLiBBIENBIG9mZmljaWFsIG1heSBjb250YWN0IHlvdSBhdCB0aGlzIG51bWJlciB0byB2ZXJpZnkgeW91ciBjZXJ0aWZpY2F0ZSByZXF1ZXN0LlxuICAgICAqL1xuICAgIHB1YmxpYyBwaG9uZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHByb2R1Y3RDb2RlOiBTcGVjaWZpY2F0aW9uIG9mIHRoZSBjZXJ0aWZpY2F0ZSB0byBhcHBseSBmb3IuIFZhbHVlOlxuICAgICAqIC0gZGlnaWNlcnQtZnJlZS0xLWZyZWUgKGRlZmF1bHQpIDogVGhpcyBpbmRpY2F0ZXMgRGlnaUNlcnQgRFYgc2luZ2xlLWRvbWFpbiBjZXJ0aWZpY2F0ZXMgKGZyZWUgMy1tb250aCBjZXJ0aWZpY2F0ZXMpLlxuICAgICAqIC0gc3ltYW50ZWMtZnJlZSAxLWZyZWU6IFN0YW5kcyBmb3IgRGlnaUNlcnQgRFYgZnJlZSBzaW5nbGUtZG9tYWluIGNlcnRpZmljYXRlICgxLXllYXIgZnJlZSBjZXJ0aWZpY2F0ZSkuXG4gICAgICogLSBzeW1hbnRlYy1kdi0xLXN0YXJ0ZXI6IFRoaXMgcmVwcmVzZW50cyB0aGUgRGlnaUNlcnQgRFYgd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogLSBzeW1hbnRlYy1vdi0xLXBlcnNvbmFsOiBUaGlzIHN0YW5kcyBmb3IgRGlnaUNlcnQgT1Ygc2luZ2xlLWRvbWFpbiBjZXJ0aWZpY2F0ZVxuICAgICAqIC0gc3ltYW50ZWMtb3Ytdy1wZXJzb25hbDogVGhpcyBzdGFuZHMgZm9yIERpZ2lDZXJ0IE9WIHdpbGRjYXJkIGRvbWFpbiBuYW1lIGNlcnRpZmljYXRlLlxuICAgICAqIC0gZ2VvdHJ1c3QtZHYtMS1zdGFydGVyOiBUaGlzIHJlcHJlc2VudHMgdGhlIEdlb1RydXN0IERWIHNpbmdsZS1kb21haW4gY2VydGlmaWNhdGUuXG4gICAgICogLSBnZW90cnVzdC1kdi13LXN0YXJ0ZXI6IFRoaXMgcmVwcmVzZW50cyB0aGUgR2VvVHJ1c3QgRFYgd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogLSBnZW90cnVzdC1vdi0xLXBlcnNvbmFsOiBUaGlzIHN0YW5kcyBmb3IgR2VvVHJ1c3QgT1Ygc2luZ2xlLWRvbWFpbiBjZXJ0aWZpY2F0ZS5cbiAgICAgKiAtIGdlb3RydXN0LW92LXctcGVyc29uYWw6IFRoaXMgcmVwcmVzZW50cyB0aGUgR2VvVHJ1c3QgT1Ygd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogLSBnbG9iYWxzaWduLWR2LTEtcGVyc29uYWw6IFRoaXMgc3RhbmRzIGZvciBHbG9iYWxTaWduIERWIHNpbmdsZS1kb21haW4gY2VydGlmaWNhdGUuXG4gICAgICogLSBnbG9iYWxzaWduLWR2LXctYWR2YW5jZWQ6IFRoaXMgc3RhbmRzIGZvciBHbG9iYWxTaWduIERWIHdpbGRjYXJkIGRvbWFpbiBuYW1lIGNlcnRpZmljYXRlLlxuICAgICAqIC0gZ2xvYmFsc2lnbi1vdi0xLXBlcnNvbmFsOiBUaGlzIHN0YW5kcyBmb3IgR2xvYmFsU2lnbiBPViBzaW5nbGUtZG9tYWluIGNlcnRpZmljYXRlLlxuICAgICAqIC0gZ2xvYmFsc2lnbi1vdi13LWFkdmFuY2VkOiBUaGlzIHJlcHJlc2VudHMgdGhlIEdsb2JhbFNpZ24gT1Ygd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogLSBjZmNhLW92LTEtcGVyc29uYWw6IFRoaXMgc3RhbmRzIGZvciBDRkNBIE9WIHNpbmdsZSBkb21haW4gY2VydGlmaWNhdGVcbiAgICAgKiAtIGNmY2EtZXYtdy1hZHZhbmNlZDogVGhpcyBzdGFuZHMgZm9yIENGQ0EgT1Ygd2lsZGNhcmQgZG9tYWluIG5hbWUgY2VydGlmaWNhdGUuXG4gICAgICogKipOb3RlOioqIElmIHlvdSBzcGVjaWZ5IHRoaXMgcGFyYW1ldGVyLCB5b3UgZG8gbm90IG5lZWQgdG8gc3BlY2lmeSB0aGUgRG9tYWluVHlwZSwgQ2VydFR5cGUsIGFuZCBDZXJ0QnJhbmQgcGFyYW1ldGVyczsgb3RoZXJ3aXNlLCB0aGlzIHBhcmFtZXRlciB3aWxsIHByZXZhaWwuXG4gICAgICovXG4gICAgcHVibGljIHByb2R1Y3RDb2RlOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgdXNlcm5hbWU6IFRoZSBhcHBsaWNhbnQncyBuYW1lLlxuICAgICAqL1xuICAgIHB1YmxpYyB1c2VybmFtZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHZhbGlkYXRlVHlwZTogSG93IGRvbWFpbiBvd25lcnNoaXAgaXMgdmVyaWZpZWQuIFZhbGlkIHZhbHVlczpcbiAgICAgKiAtIEROUzogRE5TIHZhbGlkYXRpb24gVGhlIG93bmVyc2hpcCBvZiB0aGUgZG9tYWluIG5hbWUgaXMgdmVyaWZpZWQgYnkgYWRkaW5nIGEgVFhUIHR5cGUgRE5TIHJlY29yZCB0byB0aGUgZG9tYWluIG5hbWUncyBETlMgbWFuYWdlbWVudCBwbGF0Zm9ybS4gWW91IG5lZWQgYWRtaW5pc3RyYXRpdmUgcGVybWlzc2lvbiBmb3IgZG9tYWluIHJlc29sdXRpb24gdG8gY29tcGxldGUgdmFsaWRhdGlvbi5cbiAgICAgKiAtIEZJTEU6IEZpbGUgdmFsaWRhdGlvbiBPd25lcnNoaXAgb2YgYSBkb21haW4gbmFtZSBpcyB2ZXJpZmllZCBieSBjcmVhdGluZyBhIHNwZWNpZmllZCBmaWxlIG9uIHRoZSBkb21haW4gbmFtZSBzZXJ2ZXIuIFlvdSBuZWVkIGFkbWluaXN0cmF0b3IgYWNjZXNzIHRvIHlvdXIgZG9tYWluIG5hbWUgc2VydmVyIHRvIGNvbXBsZXRlIHZhbGlkYXRpb24uXG4gICAgICovXG4gICAgcHVibGljIHZhbGlkYXRlVHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNjb3BlIC0gc2NvcGUgaW4gd2hpY2ggdGhpcyByZXNvdXJjZSBpcyBkZWZpbmVkXG4gICAgICogQHBhcmFtIGlkICAgIC0gc2NvcGVkIGlkIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBwcm9wcyAtIHJlc291cmNlIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY29wZTogcm9zLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFJvc1NzbENlcnRpZmljYXRlUHJvcHMsIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHNjb3BlLCBpZCwgeyB0eXBlOiBSb3NTc2xDZXJ0aWZpY2F0ZS5ST1NfUkVTT1VSQ0VfVFlQRV9OQU1FLCBwcm9wZXJ0aWVzOiBwcm9wcyB9KTtcbiAgICAgICAgdGhpcy5hdHRyQ2VydGlmaWNhdGVJZCA9IHRoaXMuZ2V0QXR0KCdDZXJ0aWZpY2F0ZUlkJyk7XG4gICAgICAgIHRoaXMuYXR0ck9yZGVySWQgPSB0aGlzLmdldEF0dCgnT3JkZXJJZCcpO1xuXG4gICAgICAgIHRoaXMuZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQgPSBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDtcbiAgICAgICAgdGhpcy5jZXJ0QnJhbmQgPSBwcm9wcy5jZXJ0QnJhbmQ7XG4gICAgICAgIHRoaXMuY2VydFR5cGUgPSBwcm9wcy5jZXJ0VHlwZTtcbiAgICAgICAgdGhpcy5jb21wYW55TmFtZSA9IHByb3BzLmNvbXBhbnlOYW1lO1xuICAgICAgICB0aGlzLmNzciA9IHByb3BzLmNzcjtcbiAgICAgICAgdGhpcy5kb21haW5zID0gcHJvcHMuZG9tYWlucztcbiAgICAgICAgdGhpcy5kb21haW5UeXBlID0gcHJvcHMuZG9tYWluVHlwZTtcbiAgICAgICAgdGhpcy5lbWFpbCA9IHByb3BzLmVtYWlsO1xuICAgICAgICB0aGlzLnBob25lID0gcHJvcHMucGhvbmU7XG4gICAgICAgIHRoaXMucHJvZHVjdENvZGUgPSBwcm9wcy5wcm9kdWN0Q29kZTtcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHByb3BzLnVzZXJuYW1lO1xuICAgICAgICB0aGlzLnZhbGlkYXRlVHlwZSA9IHByb3BzLnZhbGlkYXRlVHlwZTtcbiAgICB9XG5cblxuICAgIHByb3RlY3RlZCBnZXQgcm9zUHJvcGVydGllcygpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjZXJ0QnJhbmQ6IHRoaXMuY2VydEJyYW5kLFxuICAgICAgICAgICAgY2VydFR5cGU6IHRoaXMuY2VydFR5cGUsXG4gICAgICAgICAgICBjb21wYW55TmFtZTogdGhpcy5jb21wYW55TmFtZSxcbiAgICAgICAgICAgIGNzcjogdGhpcy5jc3IsXG4gICAgICAgICAgICBkb21haW5zOiB0aGlzLmRvbWFpbnMsXG4gICAgICAgICAgICBkb21haW5UeXBlOiB0aGlzLmRvbWFpblR5cGUsXG4gICAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCxcbiAgICAgICAgICAgIHBob25lOiB0aGlzLnBob25lLFxuICAgICAgICAgICAgcHJvZHVjdENvZGU6IHRoaXMucHJvZHVjdENvZGUsXG4gICAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSxcbiAgICAgICAgICAgIHZhbGlkYXRlVHlwZTogdGhpcy52YWxpZGF0ZVR5cGUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHByb3RlY3RlZCByZW5kZXJQcm9wZXJ0aWVzKHByb3BzOiB7W2tleTogc3RyaW5nXTogYW55fSk6IHsgW2tleTogc3RyaW5nXTogYW55IH0gIHtcbiAgICAgICAgcmV0dXJuIHJvc1NzbENlcnRpZmljYXRlUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BzLCB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50KTtcbiAgICB9XG59XG4iXX0=