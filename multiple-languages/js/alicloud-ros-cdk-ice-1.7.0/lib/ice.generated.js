"use strict";
// Generated from the AliCloud ROS Resource Specification
Object.defineProperty(exports, "__esModule", { value: true });
exports.RosUploadMedia = exports.RosSearchLib = exports.RosMediaInfo = exports.RosInsertMediaToSearchLib = exports.RosCategory = void 0;
const ros = require("@alicloud/ros-cdk-core");
/**
 * Determine whether the given properties match those of a `RosCategoryProps`
 *
 * @param properties - the TypeScript properties of a `RosCategoryProps`
 *
 * @returns the result of the validation.
 */
function RosCategoryPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('parentId', ros.validateNumber)(properties.parentId));
    if (properties.type && (typeof properties.type) !== 'object') {
        errors.collect(ros.propertyValidator('type', ros.validateAllowedValues)({
            data: properties.type,
            allowedValues: ["material", "default"],
        }));
    }
    errors.collect(ros.propertyValidator('type', ros.validateString)(properties.type));
    errors.collect(ros.propertyValidator('cateName', ros.requiredValidator)(properties.cateName));
    errors.collect(ros.propertyValidator('cateName', ros.validateString)(properties.cateName));
    return errors.wrap('supplied properties not correct for "RosCategoryProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::ICE::Category` resource
 *
 * @param properties - the TypeScript properties of a `RosCategoryProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::ICE::Category` resource.
 */
// @ts-ignore TS6133
function rosCategoryPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosCategoryPropsValidator(properties).assertSuccess();
    }
    return {
        'CateName': ros.stringToRosTemplate(properties.cateName),
        'ParentId': ros.numberToRosTemplate(properties.parentId),
        'Type': ros.stringToRosTemplate(properties.type),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::ICE::Category`, which is used to create a media asset category.
 * @Note This class does not contain additional functions, so it is recommended to use the `Category` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-ice-category
 */
class RosCategory extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosCategory.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrCateId = this.getAtt('CateId');
        this.attrLevel = this.getAtt('Level');
        this.attrParentId = this.getAtt('ParentId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.cateName = props.cateName;
        this.parentId = props.parentId;
        this.type = props.type;
    }
    get rosProperties() {
        return {
            cateName: this.cateName,
            parentId: this.parentId,
            type: this.type,
        };
    }
    renderProperties(props) {
        return rosCategoryPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosCategory = RosCategory;
/**
 * The resource type name for this resource class.
 */
RosCategory.ROS_RESOURCE_TYPE_NAME = "ALIYUN::ICE::Category";
/**
 * Determine whether the given properties match those of a `RosInsertMediaToSearchLibProps`
 *
 * @param properties - the TypeScript properties of a `RosInsertMediaToSearchLibProps`
 *
 * @returns the result of the validation.
 */
function RosInsertMediaToSearchLibPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('input', ros.requiredValidator)(properties.input));
    errors.collect(ros.propertyValidator('input', ros.validateString)(properties.input));
    errors.collect(ros.propertyValidator('mediaId', ros.validateString)(properties.mediaId));
    errors.collect(ros.propertyValidator('searchLibName', ros.validateString)(properties.searchLibName));
    if (properties.mediaType && (typeof properties.mediaType) !== 'object') {
        errors.collect(ros.propertyValidator('mediaType', ros.validateAllowedValues)({
            data: properties.mediaType,
            allowedValues: ["video", "image", "audio"],
        }));
    }
    errors.collect(ros.propertyValidator('mediaType', ros.validateString)(properties.mediaType));
    errors.collect(ros.propertyValidator('msgBody', ros.hashValidator(ros.validateAny))(properties.msgBody));
    return errors.wrap('supplied properties not correct for "RosInsertMediaToSearchLibProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::ICE::InsertMediaToSearchLib` resource
 *
 * @param properties - the TypeScript properties of a `RosInsertMediaToSearchLibProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::ICE::InsertMediaToSearchLib` resource.
 */
// @ts-ignore TS6133
function rosInsertMediaToSearchLibPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosInsertMediaToSearchLibPropsValidator(properties).assertSuccess();
    }
    return {
        'Input': ros.stringToRosTemplate(properties.input),
        'MediaId': ros.stringToRosTemplate(properties.mediaId),
        'MediaType': ros.stringToRosTemplate(properties.mediaType),
        'MsgBody': ros.hashMapper(ros.objectToRosTemplate)(properties.msgBody),
        'SearchLibName': ros.stringToRosTemplate(properties.searchLibName),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::ICE::InsertMediaToSearchLib`, which is used to add a media asset to a search library.
 * @Note This class does not contain additional functions, so it is recommended to use the `InsertMediaToSearchLib` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-ice-insertmediatosearchlib
 */
class RosInsertMediaToSearchLib extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosInsertMediaToSearchLib.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrMediaId = this.getAtt('MediaId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.input = props.input;
        this.mediaId = props.mediaId;
        this.mediaType = props.mediaType;
        this.msgBody = props.msgBody;
        this.searchLibName = props.searchLibName;
    }
    get rosProperties() {
        return {
            input: this.input,
            mediaId: this.mediaId,
            mediaType: this.mediaType,
            msgBody: this.msgBody,
            searchLibName: this.searchLibName,
        };
    }
    renderProperties(props) {
        return rosInsertMediaToSearchLibPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosInsertMediaToSearchLib = RosInsertMediaToSearchLib;
/**
 * The resource type name for this resource class.
 */
RosInsertMediaToSearchLib.ROS_RESOURCE_TYPE_NAME = "ALIYUN::ICE::InsertMediaToSearchLib";
/**
 * Determine whether the given properties match those of a `RosMediaInfoProps`
 *
 * @param properties - the TypeScript properties of a `RosMediaInfoProps`
 *
 * @returns the result of the validation.
 */
function RosMediaInfoPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('registerConfig', ros.validateString)(properties.registerConfig));
    errors.collect(ros.propertyValidator('overwrite', ros.validateBoolean)(properties.overwrite));
    if (properties.description && (Array.isArray(properties.description) || (typeof properties.description) === 'string')) {
        errors.collect(ros.propertyValidator('description', ros.validateLength)({
            data: properties.description.length,
            min: undefined,
            max: 1024,
        }));
    }
    errors.collect(ros.propertyValidator('description', ros.validateString)(properties.description));
    errors.collect(ros.propertyValidator('userData', ros.hashValidator(ros.validateAny))(properties.userData));
    if (properties.businessType && (typeof properties.businessType) !== 'object') {
        errors.collect(ros.propertyValidator('businessType', ros.validateAllowedValues)({
            data: properties.businessType,
            allowedValues: ["subtitles", "watermark", "opening", "ending", "general"],
        }));
    }
    errors.collect(ros.propertyValidator('businessType', ros.validateString)(properties.businessType));
    if (properties.title && (Array.isArray(properties.title) || (typeof properties.title) === 'string')) {
        errors.collect(ros.propertyValidator('title', ros.validateLength)({
            data: properties.title.length,
            min: undefined,
            max: 128,
        }));
    }
    errors.collect(ros.propertyValidator('title', ros.validateString)(properties.title));
    errors.collect(ros.propertyValidator('cateId', ros.validateNumber)(properties.cateId));
    errors.collect(ros.propertyValidator('workflowId', ros.validateString)(properties.workflowId));
    errors.collect(ros.propertyValidator('inputUrl', ros.requiredValidator)(properties.inputUrl));
    errors.collect(ros.propertyValidator('inputUrl', ros.validateString)(properties.inputUrl));
    if (properties.smartTagTemplateId && (typeof properties.smartTagTemplateId) !== 'object') {
        errors.collect(ros.propertyValidator('smartTagTemplateId', ros.validateAllowedValues)({
            data: properties.smartTagTemplateId,
            allowedValues: ["S00000101-300080", "S00000103-000001", "S00000103-000002"],
        }));
    }
    errors.collect(ros.propertyValidator('smartTagTemplateId', ros.validateString)(properties.smartTagTemplateId));
    if (properties.referenceId && (Array.isArray(properties.referenceId) || (typeof properties.referenceId) === 'string')) {
        errors.collect(ros.propertyValidator('referenceId', ros.validateLength)({
            data: properties.referenceId.length,
            min: 6,
            max: 64,
        }));
    }
    errors.collect(ros.propertyValidator('referenceId', ros.validateString)(properties.referenceId));
    if (properties.mediaType && (typeof properties.mediaType) !== 'object') {
        errors.collect(ros.propertyValidator('mediaType', ros.validateAllowedValues)({
            data: properties.mediaType,
            allowedValues: ["image", "video", "audio", "text"],
        }));
    }
    errors.collect(ros.propertyValidator('mediaType', ros.validateString)(properties.mediaType));
    if (properties.coverUrl && (Array.isArray(properties.coverUrl) || (typeof properties.coverUrl) === 'string')) {
        errors.collect(ros.propertyValidator('coverUrl', ros.validateLength)({
            data: properties.coverUrl.length,
            min: undefined,
            max: 128,
        }));
    }
    errors.collect(ros.propertyValidator('coverUrl', ros.validateString)(properties.coverUrl));
    if (properties.mediaTags && (Array.isArray(properties.mediaTags) || (typeof properties.mediaTags) === 'string')) {
        errors.collect(ros.propertyValidator('mediaTags', ros.validateLength)({
            data: properties.mediaTags.length,
            min: undefined,
            max: 16,
        }));
    }
    errors.collect(ros.propertyValidator('mediaTags', ros.listValidator(ros.validateString))(properties.mediaTags));
    return errors.wrap('supplied properties not correct for "RosMediaInfoProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::ICE::MediaInfo` resource
 *
 * @param properties - the TypeScript properties of a `RosMediaInfoProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::ICE::MediaInfo` resource.
 */
// @ts-ignore TS6133
function rosMediaInfoPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosMediaInfoPropsValidator(properties).assertSuccess();
    }
    return {
        'InputURL': ros.stringToRosTemplate(properties.inputUrl),
        'BusinessType': ros.stringToRosTemplate(properties.businessType),
        'CateId': ros.numberToRosTemplate(properties.cateId),
        'CoverURL': ros.stringToRosTemplate(properties.coverUrl),
        'Description': ros.stringToRosTemplate(properties.description),
        'MediaTags': ros.listMapper(ros.stringToRosTemplate)(properties.mediaTags),
        'MediaType': ros.stringToRosTemplate(properties.mediaType),
        'Overwrite': ros.booleanToRosTemplate(properties.overwrite),
        'ReferenceId': ros.stringToRosTemplate(properties.referenceId),
        'RegisterConfig': ros.stringToRosTemplate(properties.registerConfig),
        'SmartTagTemplateId': ros.stringToRosTemplate(properties.smartTagTemplateId),
        'Title': ros.stringToRosTemplate(properties.title),
        'UserData': ros.hashMapper(ros.objectToRosTemplate)(properties.userData),
        'WorkflowId': ros.stringToRosTemplate(properties.workflowId),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::ICE::MediaInfo`, which is used to register a media asset in Intelligent Media Services (IMS).
 * @Note This class does not contain additional functions, so it is recommended to use the `MediaInfo` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-ice-mediainfo
 */
class RosMediaInfo extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosMediaInfo.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrMediaId = this.getAtt('MediaId');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.inputUrl = props.inputUrl;
        this.businessType = props.businessType;
        this.cateId = props.cateId;
        this.coverUrl = props.coverUrl;
        this.description = props.description;
        this.mediaTags = props.mediaTags;
        this.mediaType = props.mediaType;
        this.overwrite = props.overwrite;
        this.referenceId = props.referenceId;
        this.registerConfig = props.registerConfig;
        this.smartTagTemplateId = props.smartTagTemplateId;
        this.title = props.title;
        this.userData = props.userData;
        this.workflowId = props.workflowId;
    }
    get rosProperties() {
        return {
            inputUrl: this.inputUrl,
            businessType: this.businessType,
            cateId: this.cateId,
            coverUrl: this.coverUrl,
            description: this.description,
            mediaTags: this.mediaTags,
            mediaType: this.mediaType,
            overwrite: this.overwrite,
            referenceId: this.referenceId,
            registerConfig: this.registerConfig,
            smartTagTemplateId: this.smartTagTemplateId,
            title: this.title,
            userData: this.userData,
            workflowId: this.workflowId,
        };
    }
    renderProperties(props) {
        return rosMediaInfoPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosMediaInfo = RosMediaInfo;
/**
 * The resource type name for this resource class.
 */
RosMediaInfo.ROS_RESOURCE_TYPE_NAME = "ALIYUN::ICE::MediaInfo";
/**
 * Determine whether the given properties match those of a `RosSearchLibProps`
 *
 * @param properties - the TypeScript properties of a `RosSearchLibProps`
 *
 * @returns the result of the validation.
 */
function RosSearchLibPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('searchLibName', ros.requiredValidator)(properties.searchLibName));
    errors.collect(ros.propertyValidator('searchLibName', ros.validateString)(properties.searchLibName));
    return errors.wrap('supplied properties not correct for "RosSearchLibProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::ICE::SearchLib` resource
 *
 * @param properties - the TypeScript properties of a `RosSearchLibProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::ICE::SearchLib` resource.
 */
// @ts-ignore TS6133
function rosSearchLibPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosSearchLibPropsValidator(properties).assertSuccess();
    }
    return {
        'SearchLibName': ros.stringToRosTemplate(properties.searchLibName),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::ICE::SearchLib`, which is used to create a search library.
 * @Note This class does not contain additional functions, so it is recommended to use the `SearchLib` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-ice-searchlib
 */
class RosSearchLib extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosSearchLib.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrSearchLibName = this.getAtt('SearchLibName');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.searchLibName = props.searchLibName;
    }
    get rosProperties() {
        return {
            searchLibName: this.searchLibName,
        };
    }
    renderProperties(props) {
        return rosSearchLibPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosSearchLib = RosSearchLib;
/**
 * The resource type name for this resource class.
 */
RosSearchLib.ROS_RESOURCE_TYPE_NAME = "ALIYUN::ICE::SearchLib";
/**
 * Determine whether the given properties match those of a `RosUploadMediaProps`
 *
 * @param properties - the TypeScript properties of a `RosUploadMediaProps`
 *
 * @returns the result of the validation.
 */
function RosUploadMediaPropsValidator(properties) {
    if (!ros.canInspect(properties)) {
        return ros.VALIDATION_SUCCESS;
    }
    const errors = new ros.ValidationResults();
    errors.collect(ros.propertyValidator('entityId', ros.validateString)(properties.entityId));
    errors.collect(ros.propertyValidator('appId', ros.validateString)(properties.appId));
    errors.collect(ros.propertyValidator('fileInfo', ros.hashValidator(ros.validateAny))(properties.fileInfo));
    errors.collect(ros.propertyValidator('userData', ros.hashValidator(ros.validateAny))(properties.userData));
    errors.collect(ros.propertyValidator('uploadTargetConfig', ros.hashValidator(ros.validateAny))(properties.uploadTargetConfig));
    errors.collect(ros.propertyValidator('mediaMetaData', ros.hashValidator(ros.validateAny))(properties.mediaMetaData));
    errors.collect(ros.propertyValidator('postProcessConfig', ros.hashValidator(ros.validateAny))(properties.postProcessConfig));
    return errors.wrap('supplied properties not correct for "RosUploadMediaProps"');
}
/**
 * Renders the AliCloud ROS Resource properties of an `ALIYUN::ICE::UploadMedia` resource
 *
 * @param properties - the TypeScript properties of a `RosUploadMediaProps`
 *
 * @returns the AliCloud ROS Resource properties of an `ALIYUN::ICE::UploadMedia` resource.
 */
// @ts-ignore TS6133
function rosUploadMediaPropsToRosTemplate(properties, enableResourcePropertyConstraint) {
    if (!ros.canInspect(properties)) {
        return properties;
    }
    if (enableResourcePropertyConstraint) {
        RosUploadMediaPropsValidator(properties).assertSuccess();
    }
    return {
        'AppId': ros.stringToRosTemplate(properties.appId),
        'EntityId': ros.stringToRosTemplate(properties.entityId),
        'FileInfo': ros.hashMapper(ros.objectToRosTemplate)(properties.fileInfo),
        'MediaMetaData': ros.hashMapper(ros.objectToRosTemplate)(properties.mediaMetaData),
        'PostProcessConfig': ros.hashMapper(ros.objectToRosTemplate)(properties.postProcessConfig),
        'UploadTargetConfig': ros.hashMapper(ros.objectToRosTemplate)(properties.uploadTargetConfig),
        'UserData': ros.hashMapper(ros.objectToRosTemplate)(properties.userData),
    };
}
/**
 * This class is a base encapsulation around the ROS resource type `ALIYUN::ICE::UploadMedia`, which is used to query the upload address and credential of a media asset.
 * @Note This class does not contain additional functions, so it is recommended to use the `UploadMedia` class instead of this class for a more convenient development experience.
 * See https://www.alibabacloud.com/help/ros/developer-reference/aliyun-ice-uploadmedia
 */
class RosUploadMedia extends ros.RosResource {
    /**
     * @param scope - scope in which this resource is defined
     * @param id    - scoped id of the resource
     * @param props - resource properties
     */
    constructor(scope, id, props, enableResourcePropertyConstraint) {
        super(scope, id, { type: RosUploadMedia.ROS_RESOURCE_TYPE_NAME, properties: props });
        this.attrFileUrl = this.getAtt('FileURL');
        this.attrMediaId = this.getAtt('MediaId');
        this.attrMediaUrl = this.getAtt('MediaURL');
        this.attrUploadAddress = this.getAtt('UploadAddress');
        this.attrUploadAuth = this.getAtt('UploadAuth');
        this.enableResourcePropertyConstraint = enableResourcePropertyConstraint;
        this.appId = props.appId;
        this.entityId = props.entityId;
        this.fileInfo = props.fileInfo;
        this.mediaMetaData = props.mediaMetaData;
        this.postProcessConfig = props.postProcessConfig;
        this.uploadTargetConfig = props.uploadTargetConfig;
        this.userData = props.userData;
    }
    get rosProperties() {
        return {
            appId: this.appId,
            entityId: this.entityId,
            fileInfo: this.fileInfo,
            mediaMetaData: this.mediaMetaData,
            postProcessConfig: this.postProcessConfig,
            uploadTargetConfig: this.uploadTargetConfig,
            userData: this.userData,
        };
    }
    renderProperties(props) {
        return rosUploadMediaPropsToRosTemplate(props, this.enableResourcePropertyConstraint);
    }
}
exports.RosUploadMedia = RosUploadMedia;
/**
 * The resource type name for this resource class.
 */
RosUploadMedia.ROS_RESOURCE_TYPE_NAME = "ALIYUN::ICE::UploadMedia";
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWNlLmdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImljZS5nZW5lcmF0ZWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHlEQUF5RDs7O0FBRXpELDhDQUE4QztBQTRCOUM7Ozs7OztHQU1HO0FBQ0gsU0FBUyx5QkFBeUIsQ0FBQyxVQUFlO0lBQzlDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxFQUFFO1FBQUUsT0FBTyxHQUFHLENBQUMsa0JBQWtCLENBQUM7S0FBRTtJQUNuRSxNQUFNLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsY0FBYyxDQUFDLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDM0YsSUFBRyxVQUFVLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssUUFBUSxFQUFFO1FBQ3pELE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUN0RSxJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUk7WUFDckIsYUFBYSxFQUFFLENBQUMsVUFBVSxFQUFDLFNBQVMsQ0FBQztTQUN0QyxDQUFDLENBQUMsQ0FBQztLQUNQO0lBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuRixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixDQUFDLENBQUMsVUFBVSxDQUFD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LENBQUM7UUFDekIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDO1FBQy9CLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztRQUMvQixJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUM7UUFDekMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztRQUNqRCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDLGtCQUFrQixDQUFDO1FBQ25ELElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztJQUNuQyxDQUFDO0lBR0QsSUFBYyxhQUFhO1FBQ3ZCLE9BQU87WUFDSCxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7WUFDakIsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO1lBQ3ZCLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtZQUN2QixhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWE7WUFDakMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLGlCQUFpQjtZQUN6QyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsa0JBQWtCO1lBQzNDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtTQUMxQixDQUFDO0lBQ04sQ0FBQztJQUNTLGdCQUFnQixDQUFDLEtBQTJCO1FBQ2xELE9BQU8sZ0NBQWdDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0lBQzFGLENBQUM7O0FBbElMLHdDQW1JQztBQWxJRzs7R0FFRztBQUNvQixxQ0FBc0IsR0FBRywwQkFBMEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYXRlZCBmcm9tIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgU3BlY2lmaWNhdGlvblxuXG5pbXBvcnQgKiBhcyByb3MgZnJvbSAnQGFsaWNsb3VkL3Jvcy1jZGstY29yZSc7XG5cbi8qKlxuICogUHJvcGVydGllcyBmb3IgZGVmaW5pbmcgYSBgUm9zQ2F0ZWdvcnlgLlxuICogU2VlIGh0dHBzOi8vd3d3LmFsaWJhYmFjbG91ZC5jb20vaGVscC9yb3MvZGV2ZWxvcGVyLXJlZmVyZW5jZS9hbGl5dW4taWNlLWNhdGVnb3J5XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUm9zQ2F0ZWdvcnlQcm9wcyB7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgY2F0ZU5hbWU6IFRoZSBjYXRlZ29yeSBuYW1lLlxuICAgICAqIFRoZSB2YWx1ZSBjYW4gYmUgdXAgdG8gNjQgYnl0ZXMgaW4gbGVuZ3RoLlxuICAgICAqIFRoZSB2YWx1ZSBtdXN0IGJlIGVuY29kZWQgaW4gVVRGLTguXG4gICAgICovXG4gICAgcmVhZG9ubHkgY2F0ZU5hbWU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwYXJlbnRJZDogVGhlIElEIG9mIHRoZSBwYXJlbnQgY2F0ZWdvcnkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcGFyZW50SWQ/OiBudW1iZXIgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgdHlwZTogVGhlIHR5cGUgb2YgdGhlIGNhdGVnb3J5LiBWYWxpZCB2YWx1ZXM6XG4gICAgICogZGVmYXVsdDogYXVkaW8sIHZpZGVvLCBhbmQgaW1hZ2UgZmlsZXMuIFRoaXMgaXMgdGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICogbWF0ZXJpYWw6IHNob3J0IHZpZGVvIG1hdGVyaWFscy5cbiAgICAgKi9cbiAgICByZWFkb25seSB0eXBlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xufVxuXG4vKipcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBnaXZlbiBwcm9wZXJ0aWVzIG1hdGNoIHRob3NlIG9mIGEgYFJvc0NhdGVnb3J5UHJvcHNgXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc0NhdGVnb3J5UHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgdmFsaWRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gUm9zQ2F0ZWdvcnlQcm9wc1ZhbGlkYXRvcihwcm9wZXJ0aWVzOiBhbnkpOiByb3MuVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcm9zLlZBTElEQVRJT05fU1VDQ0VTUzsgfVxuICAgIGNvbnN0IGVycm9ycyA9IG5ldyByb3MuVmFsaWRhdGlvblJlc3VsdHMoKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3BhcmVudElkJywgcm9zLnZhbGlkYXRlTnVtYmVyKShwcm9wZXJ0aWVzLnBhcmVudElkKSk7XG4gICAgaWYocHJvcGVydGllcy50eXBlICYmICh0eXBlb2YgcHJvcGVydGllcy50eXBlKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd0eXBlJywgcm9zLnZhbGlkYXRlQWxsb3dlZFZhbHVlcykoe1xuICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMudHlwZSxcbiAgICAgICAgICBhbGxvd2VkVmFsdWVzOiBbXCJtYXRlcmlhbFwiLFwiZGVmYXVsdFwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3R5cGUnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMudHlwZSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignY2F0ZU5hbWUnLCByb3MucmVxdWlyZWRWYWxpZGF0b3IpKHByb3BlcnRpZXMuY2F0ZU5hbWUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NhdGVOYW1lJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmNhdGVOYW1lKSk7XG4gICAgcmV0dXJuIGVycm9ycy53cmFwKCdzdXBwbGllZCBwcm9wZXJ0aWVzIG5vdCBjb3JyZWN0IGZvciBcIlJvc0NhdGVnb3J5UHJvcHNcIicpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OklDRTo6Q2F0ZWdvcnlgIHJlc291cmNlXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc0NhdGVnb3J5UHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OklDRTo6Q2F0ZWdvcnlgIHJlc291cmNlLlxuICovXG4vLyBAdHMtaWdub3JlIFRTNjEzM1xuZnVuY3Rpb24gcm9zQ2F0ZWdvcnlQcm9wc1RvUm9zVGVtcGxhdGUocHJvcGVydGllczogYW55LCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbik6IGFueSB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcHJvcGVydGllczsgfVxuICAgIGlmKGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50KSB7XG4gICAgICAgIFJvc0NhdGVnb3J5UHJvcHNWYWxpZGF0b3IocHJvcGVydGllcykuYXNzZXJ0U3VjY2VzcygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ0NhdGVOYW1lJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5jYXRlTmFtZSksXG4gICAgICAnUGFyZW50SWQnOiByb3MubnVtYmVyVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnBhcmVudElkKSxcbiAgICAgICdUeXBlJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy50eXBlKSxcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYSBiYXNlIGVuY2Fwc3VsYXRpb24gYXJvdW5kIHRoZSBST1MgcmVzb3VyY2UgdHlwZSBgQUxJWVVOOjpJQ0U6OkNhdGVnb3J5YCwgd2hpY2ggaXMgdXNlZCB0byBjcmVhdGUgYSBtZWRpYSBhc3NldCBjYXRlZ29yeS5cbiAqIEBOb3RlIFRoaXMgY2xhc3MgZG9lcyBub3QgY29udGFpbiBhZGRpdGlvbmFsIGZ1bmN0aW9ucywgc28gaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBgQ2F0ZWdvcnlgIGNsYXNzIGluc3RlYWQgb2YgdGhpcyBjbGFzcyBmb3IgYSBtb3JlIGNvbnZlbmllbnQgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZS5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWljZS1jYXRlZ29yeVxuICovXG5leHBvcnQgY2xhc3MgUm9zQ2F0ZWdvcnkgZXh0ZW5kcyByb3MuUm9zUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZXNvdXJjZSB0eXBlIG5hbWUgZm9yIHRoaXMgcmVzb3VyY2UgY2xhc3MuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1NfUkVTT1VSQ0VfVFlQRV9OQU1FID0gXCJBTElZVU46OklDRTo6Q2F0ZWdvcnlcIjtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgQ2F0ZUlkOiBUaGUgSUQgb2YgdGhlIGNhdGVnb3J5LlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyQ2F0ZUlkOiByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIExldmVsOiBUaGUgbGV2ZWwgb2YgdGhlIGNhdGVnb3J5LiBUaGUgcHJpbWFyeSBjbGFzc2lmaWNhdGlvbiBsZXZlbCBpcyAwLCB0aGUgc2Vjb25kYXJ5IGNsYXNzaWZpY2F0aW9uIGxldmVsIGlzIDEsIGFuZCB0aGUgdGVydGlhcnkgY2xhc3NpZmljYXRpb24gbGV2ZWwgaXMgMi5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0ckxldmVsOiByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIFBhcmVudElkOiBUaGUgSUQgb2YgdGhlIHBhcmVudCBjYXRlZ29yeS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0clBhcmVudElkOiByb3MuSVJlc29sdmFibGU7XG5cbiAgICBwdWJsaWMgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW47XG5cblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBjYXRlTmFtZTogVGhlIGNhdGVnb3J5IG5hbWUuXG4gICAgICogVGhlIHZhbHVlIGNhbiBiZSB1cCB0byA2NCBieXRlcyBpbiBsZW5ndGguXG4gICAgICogVGhlIHZhbHVlIG11c3QgYmUgZW5jb2RlZCBpbiBVVEYtOC5cbiAgICAgKi9cbiAgICBwdWJsaWMgY2F0ZU5hbWU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwYXJlbnRJZDogVGhlIElEIG9mIHRoZSBwYXJlbnQgY2F0ZWdvcnkuXG4gICAgICovXG4gICAgcHVibGljIHBhcmVudElkOiBudW1iZXIgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgdHlwZTogVGhlIHR5cGUgb2YgdGhlIGNhdGVnb3J5LiBWYWxpZCB2YWx1ZXM6XG4gICAgICogZGVmYXVsdDogYXVkaW8sIHZpZGVvLCBhbmQgaW1hZ2UgZmlsZXMuIFRoaXMgaXMgdGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICogbWF0ZXJpYWw6IHNob3J0IHZpZGVvIG1hdGVyaWFscy5cbiAgICAgKi9cbiAgICBwdWJsaWMgdHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNjb3BlIC0gc2NvcGUgaW4gd2hpY2ggdGhpcyByZXNvdXJjZSBpcyBkZWZpbmVkXG4gICAgICogQHBhcmFtIGlkICAgIC0gc2NvcGVkIGlkIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBwcm9wcyAtIHJlc291cmNlIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY29wZTogcm9zLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFJvc0NhdGVnb3J5UHJvcHMsIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHNjb3BlLCBpZCwgeyB0eXBlOiBSb3NDYXRlZ29yeS5ST1NfUkVTT1VSQ0VfVFlQRV9OQU1FLCBwcm9wZXJ0aWVzOiBwcm9wcyB9KTtcbiAgICAgICAgdGhpcy5hdHRyQ2F0ZUlkID0gdGhpcy5nZXRBdHQoJ0NhdGVJZCcpO1xuICAgICAgICB0aGlzLmF0dHJMZXZlbCA9IHRoaXMuZ2V0QXR0KCdMZXZlbCcpO1xuICAgICAgICB0aGlzLmF0dHJQYXJlbnRJZCA9IHRoaXMuZ2V0QXR0KCdQYXJlbnRJZCcpO1xuXG4gICAgICAgIHRoaXMuZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQgPSBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDtcbiAgICAgICAgdGhpcy5jYXRlTmFtZSA9IHByb3BzLmNhdGVOYW1lO1xuICAgICAgICB0aGlzLnBhcmVudElkID0gcHJvcHMucGFyZW50SWQ7XG4gICAgICAgIHRoaXMudHlwZSA9IHByb3BzLnR5cGU7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2F0ZU5hbWU6IHRoaXMuY2F0ZU5hbWUsXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJvdGVjdGVkIHJlbmRlclByb3BlcnRpZXMocHJvcHM6IHtba2V5OiBzdHJpbmddOiBhbnl9KTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4gcm9zQ2F0ZWdvcnlQcm9wc1RvUm9zVGVtcGxhdGUocHJvcHMsIHRoaXMuZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm9wZXJ0aWVzIGZvciBkZWZpbmluZyBhIGBSb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliYC5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWljZS1pbnNlcnRtZWRpYXRvc2VhcmNobGliXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUm9zSW5zZXJ0TWVkaWFUb1NlYXJjaExpYlByb3BzIHtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBpbnB1dDogVGhlIFVSTCBvZiB0aGUgdmlkZW8sIGF1ZGlvLCBvciBpbWFnZSBmaWxlIHRoYXQgeW91IHdhbnQgdG8gaW1wb3J0IHRvIHRoZSBzZWFyY2ggbGlicmFyeS5cbiAgICAgKiBOb3RlOiBNYWtlIHN1cmUgdGhhdCB5b3Ugc3BlY2lmeSBhIGNvcnJlY3QgZmlsZSBuYW1lIGFuZCB0aGUgYnVja2V0IGluIHdoaWNoIHRoZSBmaWxlIHJlc2lkZXMgaXMgaW4gdGhlIHNhbWUgcmVnaW9uIHdoZXJlIHRoaXMgb3BlcmF0aW9uIGlzIGNhbGxlZC4gT3RoZXJ3aXNlLCB0aGUgZmlsZSBjYW5ub3QgYmUgZm91bmQgb3IgdGhlIG9wZXJhdGlvbiBtYXkgZmFpbC5cbiAgICAgKiBTcGVjaWZ5IGFuIE9iamVjdCBTdG9yYWdlIFNlcnZpY2UgKE9TUykgVVJMIGluIHRoZSBmb2xsb3dpbmcgZm9ybWF0OiBvc3M6XFwvXFwvW0J1Y2tldCBuYW1lXVxcL1tGaWxlIHBhdGhdLiBGb3IgZXhhbXBsZSwgeW91IGNhbiBzcGVjaWZ5IG9zczpcXC9cXC9bZXhhbXBsZS1idWNrZXQtXVxcL1tvYmplY3RfcGF0aC1dLlxuICAgICAqIFNwZWNpZnkgYW4gSFRUUCBVUkwgaW4gdGhlIGZvbGxvd2luZyBmb3JtYXQ6IHB1YmxpYyBlbmRwb2ludC4gRm9yIGV4YW1wbGUsIHlvdSBjYW4gc3BlY2lmeSBodHRwOlxcL1xcL2V4YW1wbGUtdGVzdC0qKioqLm1wNC5cbiAgICAgKi9cbiAgICByZWFkb25seSBpbnB1dDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IG1lZGlhSWQ6IFRoZSBJRCBvZiB0aGUgbWVkaWEgYXNzZXQuIEVhY2ggbWVkaWEgSUQgaXMgdW5pcXVlLiBJZiB5b3UgbGVhdmUgdGhpcyBwYXJhbWV0ZXIgZW1wdHksIGEgbWVkaWEgSUQgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZm9yIHRoaXMgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IG1lZGlhSWQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgbWVkaWFUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbWVkaWEgYXNzZXQuIFZhbGlkIHZhbHVlczpcbiAgICAgKiB2aWRlbyAoZGVmYXVsdClcbiAgICAgKiBpbWFnZVxuICAgICAqIGF1ZGlvXG4gICAgICovXG4gICAgcmVhZG9ubHkgbWVkaWFUeXBlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IG1zZ0JvZHk6IFRoZSBtZXNzYWdlIGJvZHkuXG4gICAgICovXG4gICAgcmVhZG9ubHkgbXNnQm9keT86IHsgW2tleTogc3RyaW5nXTogKGFueSB8IHJvcy5JUmVzb2x2YWJsZSkgfSB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBzZWFyY2hMaWJOYW1lOiBUaGUgbmFtZSBvZiB0aGUgc2VhcmNoIGxpYnJhcnkuIERlZmF1bHQgdmFsdWU6IGltcy1kZWZhdWx0LXNlYXJjaC1saWIuXG4gICAgICovXG4gICAgcmVhZG9ubHkgc2VhcmNoTGliTmFtZT86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgZ2l2ZW4gcHJvcGVydGllcyBtYXRjaCB0aG9zZSBvZiBhIGBSb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliUHJvcHNgXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc0luc2VydE1lZGlhVG9TZWFyY2hMaWJQcm9wc2BcbiAqXG4gKiBAcmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSB2YWxpZGF0aW9uLlxuICovXG5mdW5jdGlvbiBSb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliUHJvcHNWYWxpZGF0b3IocHJvcGVydGllczogYW55KTogcm9zLlZhbGlkYXRpb25SZXN1bHQge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHJvcy5WQUxJREFUSU9OX1NVQ0NFU1M7IH1cbiAgICBjb25zdCBlcnJvcnMgPSBuZXcgcm9zLlZhbGlkYXRpb25SZXN1bHRzKCk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdpbnB1dCcsIHJvcy5yZXF1aXJlZFZhbGlkYXRvcikocHJvcGVydGllcy5pbnB1dCkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignaW5wdXQnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuaW5wdXQpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ21lZGlhSWQnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMubWVkaWFJZCkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignc2VhcmNoTGliTmFtZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5zZWFyY2hMaWJOYW1lKSk7XG4gICAgaWYocHJvcGVydGllcy5tZWRpYVR5cGUgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzLm1lZGlhVHlwZSkgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignbWVkaWFUeXBlJywgcm9zLnZhbGlkYXRlQWxsb3dlZFZhbHVlcykoe1xuICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMubWVkaWFUeXBlLFxuICAgICAgICAgIGFsbG93ZWRWYWx1ZXM6IFtcInZpZGVvXCIsXCJpbWFnZVwiLFwiYXVkaW9cIl0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdtZWRpYVR5cGUnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMubWVkaWFUeXBlKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdtc2dCb2R5Jywgcm9zLmhhc2hWYWxpZGF0b3Iocm9zLnZhbGlkYXRlQW55KSkocHJvcGVydGllcy5tc2dCb2R5KSk7XG4gICAgcmV0dXJuIGVycm9ycy53cmFwKCdzdXBwbGllZCBwcm9wZXJ0aWVzIG5vdCBjb3JyZWN0IGZvciBcIlJvc0luc2VydE1lZGlhVG9TZWFyY2hMaWJQcm9wc1wiJyk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgQWxpQ2xvdWQgUk9TIFJlc291cmNlIHByb3BlcnRpZXMgb2YgYW4gYEFMSVlVTjo6SUNFOjpJbnNlcnRNZWRpYVRvU2VhcmNoTGliYCByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliUHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OklDRTo6SW5zZXJ0TWVkaWFUb1NlYXJjaExpYmAgcmVzb3VyY2UuXG4gKi9cbi8vIEB0cy1pZ25vcmUgVFM2MTMzXG5mdW5jdGlvbiByb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXM6IGFueSwgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pOiBhbnkge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHByb3BlcnRpZXM7IH1cbiAgICBpZihlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCkge1xuICAgICAgICBSb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliUHJvcHNWYWxpZGF0b3IocHJvcGVydGllcykuYXNzZXJ0U3VjY2VzcygpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgJ0lucHV0Jzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5pbnB1dCksXG4gICAgICAnTWVkaWFJZCc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMubWVkaWFJZCksXG4gICAgICAnTWVkaWFUeXBlJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5tZWRpYVR5cGUpLFxuICAgICAgJ01zZ0JvZHknOiByb3MuaGFzaE1hcHBlcihyb3Mub2JqZWN0VG9Sb3NUZW1wbGF0ZSkocHJvcGVydGllcy5tc2dCb2R5KSxcbiAgICAgICdTZWFyY2hMaWJOYW1lJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5zZWFyY2hMaWJOYW1lKSxcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYSBiYXNlIGVuY2Fwc3VsYXRpb24gYXJvdW5kIHRoZSBST1MgcmVzb3VyY2UgdHlwZSBgQUxJWVVOOjpJQ0U6Okluc2VydE1lZGlhVG9TZWFyY2hMaWJgLCB3aGljaCBpcyB1c2VkIHRvIGFkZCBhIG1lZGlhIGFzc2V0IHRvIGEgc2VhcmNoIGxpYnJhcnkuXG4gKiBATm90ZSBUaGlzIGNsYXNzIGRvZXMgbm90IGNvbnRhaW4gYWRkaXRpb25hbCBmdW5jdGlvbnMsIHNvIGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgYEluc2VydE1lZGlhVG9TZWFyY2hMaWJgIGNsYXNzIGluc3RlYWQgb2YgdGhpcyBjbGFzcyBmb3IgYSBtb3JlIGNvbnZlbmllbnQgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZS5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWljZS1pbnNlcnRtZWRpYXRvc2VhcmNobGliXG4gKi9cbmV4cG9ydCBjbGFzcyBSb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliIGV4dGVuZHMgcm9zLlJvc1Jlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzb3VyY2UgdHlwZSBuYW1lIGZvciB0aGlzIHJlc291cmNlIGNsYXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUk9TX1JFU09VUkNFX1RZUEVfTkFNRSA9IFwiQUxJWVVOOjpJQ0U6Okluc2VydE1lZGlhVG9TZWFyY2hMaWJcIjtcblxuICAgIC8qKlxuICAgICAqIEBBdHRyaWJ1dGUgTWVkaWFJZDogVGhlIElEIG9mIHRoZSBtZWRpYSBhc3NldC5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0ck1lZGlhSWQ6IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIHB1YmxpYyBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbjtcblxuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGlucHV0OiBUaGUgVVJMIG9mIHRoZSB2aWRlbywgYXVkaW8sIG9yIGltYWdlIGZpbGUgdGhhdCB5b3Ugd2FudCB0byBpbXBvcnQgdG8gdGhlIHNlYXJjaCBsaWJyYXJ5LlxuICAgICAqIE5vdGU6IE1ha2Ugc3VyZSB0aGF0IHlvdSBzcGVjaWZ5IGEgY29ycmVjdCBmaWxlIG5hbWUgYW5kIHRoZSBidWNrZXQgaW4gd2hpY2ggdGhlIGZpbGUgcmVzaWRlcyBpcyBpbiB0aGUgc2FtZSByZWdpb24gd2hlcmUgdGhpcyBvcGVyYXRpb24gaXMgY2FsbGVkLiBPdGhlcndpc2UsIHRoZSBmaWxlIGNhbm5vdCBiZSBmb3VuZCBvciB0aGUgb3BlcmF0aW9uIG1heSBmYWlsLlxuICAgICAqIFNwZWNpZnkgYW4gT2JqZWN0IFN0b3JhZ2UgU2VydmljZSAoT1NTKSBVUkwgaW4gdGhlIGZvbGxvd2luZyBmb3JtYXQ6IG9zczpcXC9cXC9bQnVja2V0IG5hbWVdXFwvW0ZpbGUgcGF0aF0uIEZvciBleGFtcGxlLCB5b3UgY2FuIHNwZWNpZnkgb3NzOlxcL1xcL1tleGFtcGxlLWJ1Y2tldC1dXFwvW29iamVjdF9wYXRoLV0uXG4gICAgICogU3BlY2lmeSBhbiBIVFRQIFVSTCBpbiB0aGUgZm9sbG93aW5nIGZvcm1hdDogcHVibGljIGVuZHBvaW50LiBGb3IgZXhhbXBsZSwgeW91IGNhbiBzcGVjaWZ5IGh0dHA6XFwvXFwvZXhhbXBsZS10ZXN0LSoqKioubXA0LlxuICAgICAqL1xuICAgIHB1YmxpYyBpbnB1dDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IG1lZGlhSWQ6IFRoZSBJRCBvZiB0aGUgbWVkaWEgYXNzZXQuIEVhY2ggbWVkaWEgSUQgaXMgdW5pcXVlLiBJZiB5b3UgbGVhdmUgdGhpcyBwYXJhbWV0ZXIgZW1wdHksIGEgbWVkaWEgSUQgaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgZm9yIHRoaXMgcGFyYW1ldGVyLlxuICAgICAqL1xuICAgIHB1YmxpYyBtZWRpYUlkOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgbWVkaWFUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbWVkaWEgYXNzZXQuIFZhbGlkIHZhbHVlczpcbiAgICAgKiB2aWRlbyAoZGVmYXVsdClcbiAgICAgKiBpbWFnZVxuICAgICAqIGF1ZGlvXG4gICAgICovXG4gICAgcHVibGljIG1lZGlhVHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IG1zZ0JvZHk6IFRoZSBtZXNzYWdlIGJvZHkuXG4gICAgICovXG4gICAgcHVibGljIG1zZ0JvZHk6IHsgW2tleTogc3RyaW5nXTogKGFueSB8IHJvcy5JUmVzb2x2YWJsZSkgfSB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBzZWFyY2hMaWJOYW1lOiBUaGUgbmFtZSBvZiB0aGUgc2VhcmNoIGxpYnJhcnkuIERlZmF1bHQgdmFsdWU6IGltcy1kZWZhdWx0LXNlYXJjaC1saWIuXG4gICAgICovXG4gICAgcHVibGljIHNlYXJjaExpYk5hbWU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzY29wZSAtIHNjb3BlIGluIHdoaWNoIHRoaXMgcmVzb3VyY2UgaXMgZGVmaW5lZFxuICAgICAqIEBwYXJhbSBpZCAgICAtIHNjb3BlZCBpZCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gcHJvcHMgLSByZXNvdXJjZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2NvcGU6IHJvcy5Db25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBSb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliUHJvcHMsIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHNjb3BlLCBpZCwgeyB0eXBlOiBSb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliLlJPU19SRVNPVVJDRV9UWVBFX05BTUUsIHByb3BlcnRpZXM6IHByb3BzIH0pO1xuICAgICAgICB0aGlzLmF0dHJNZWRpYUlkID0gdGhpcy5nZXRBdHQoJ01lZGlhSWQnKTtcblxuICAgICAgICB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50ID0gZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBwcm9wcy5pbnB1dDtcbiAgICAgICAgdGhpcy5tZWRpYUlkID0gcHJvcHMubWVkaWFJZDtcbiAgICAgICAgdGhpcy5tZWRpYVR5cGUgPSBwcm9wcy5tZWRpYVR5cGU7XG4gICAgICAgIHRoaXMubXNnQm9keSA9IHByb3BzLm1zZ0JvZHk7XG4gICAgICAgIHRoaXMuc2VhcmNoTGliTmFtZSA9IHByb3BzLnNlYXJjaExpYk5hbWU7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5wdXQ6IHRoaXMuaW5wdXQsXG4gICAgICAgICAgICBtZWRpYUlkOiB0aGlzLm1lZGlhSWQsXG4gICAgICAgICAgICBtZWRpYVR5cGU6IHRoaXMubWVkaWFUeXBlLFxuICAgICAgICAgICAgbXNnQm9keTogdGhpcy5tc2dCb2R5LFxuICAgICAgICAgICAgc2VhcmNoTGliTmFtZTogdGhpcy5zZWFyY2hMaWJOYW1lLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgcmVuZGVyUHJvcGVydGllcyhwcm9wczoge1trZXk6IHN0cmluZ106IGFueX0pOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICB7XG4gICAgICAgIHJldHVybiByb3NJbnNlcnRNZWRpYVRvU2VhcmNoTGliUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BzLCB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50KTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvcGVydGllcyBmb3IgZGVmaW5pbmcgYSBgUm9zTWVkaWFJbmZvYC5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWljZS1tZWRpYWluZm9cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSb3NNZWRpYUluZm9Qcm9wcyB7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgaW5wdXRVcmw6IFRoZSBVUkwgb2YgdGhlIG1lZGlhIGFzc2V0IGluIGFub3RoZXIgc2VydmljZS4gVGhlIFVSTCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIElEIG9mIHRoZSBtZWRpYSBhc3NldCBpbiBJTVMuIFRoZSBVUkwgY2Fubm90IGJlIG1vZGlmaWVkIG9uY2UgcmVnaXN0ZXJlZC4gVGhlIGZvbGxvd2luZyB0eXBlcyBvZiBVUkxzIGFyZSBzdXBwb3J0ZWQ6XG4gICAgICogT1NTIFVSTCBpbiBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtYXRzOlxuICAgICAqIGh0dHAocyk6XFwvXFwvZXhhbXBsZS1idWNrZXQub3NzLWNuLXNoYW5naGFpLmFsaXl1bmNzLmNvbVxcL2V4YW1wbGUubXA0XG4gICAgICogb3NzOlxcL1xcL2V4YW1wbGUtYnVja2V0XFwvZXhhbXBsZS5tcDQ6IEluIHRoaXMgZm9ybWF0LCBpdCBpcyBjb25zaWRlcmVkIGJ5IGRlZmF1bHQgdGhhdCB0aGUgcmVnaW9uIG9mIHRoZSBPU1MgYnVja2V0IGluIHdoaWNoIHRoZSBtZWRpYSBhc3NldCByZXNpZGVzIGlzIHRoZSBzYW1lIGFzIHRoZSByZWdpb24gaW4gd2hpY2ggSU1TIGlzIGFjdGl2YXRlZC5cbiAgICAgKiBVUkwgb2YgYW4gQXBzYXJhVmlkZW8gVk9EIG1lZGlhIGFzc2V0XG4gICAgICogdm9kOlxcL1xcLyoqKjIwYjQ4ZmIwNDQ4MzkxNWQ0ZjJjZDhhYyoqKipcbiAgICAgKi9cbiAgICByZWFkb25seSBpbnB1dFVybDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGJ1c2luZXNzVHlwZTogVGhlIGJ1c2luZXNzIHR5cGUgb2YgdGhlIG1lZGlhIGFzc2V0LiBWYWxpZCB2YWx1ZXM6XG4gICAgICogc3VidGl0bGVzXG4gICAgICogd2F0ZXJtYXJrXG4gICAgICogb3BlbmluZ1xuICAgICAqIGVuZGluZ1xuICAgICAqIGdlbmVyYWxcbiAgICAgKi9cbiAgICByZWFkb25seSBidXNpbmVzc1R5cGU/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgY2F0ZUlkOiBUaGUgY2F0ZWdvcnkgSUQuXG4gICAgICovXG4gICAgcmVhZG9ubHkgY2F0ZUlkPzogbnVtYmVyIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGNvdmVyVXJsOiBUaGUgdGh1bWJuYWlsIFVSTCBvZiB0aGUgbWVkaWEgYXNzZXQuXG4gICAgICogVGhlIHZhbHVlIGNhbiBiZSB1cCB0byAxMjggYnl0ZXMgaW4gbGVuZ3RoLlxuICAgICAqIFRoZSB2YWx1ZSBtdXN0IGJlIGVuY29kZWQgaW4gVVRGLTguXG4gICAgICovXG4gICAgcmVhZG9ubHkgY292ZXJVcmw/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgZGVzY3JpcHRpb246IFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgbWVkaWEgYXNzZXQuXG4gICAgICogVGhlIHZhbHVlIGNhbiBiZSB1cCB0byAxLDAyNCBieXRlcyBpbiBsZW5ndGguXG4gICAgICogVGhlIHZhbHVlIG11c3QgYmUgZW5jb2RlZCBpbiBVVEYtOC5cbiAgICAgKi9cbiAgICByZWFkb25seSBkZXNjcmlwdGlvbj86IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBtZWRpYVRhZ3M6IFRoZSB0YWdzIG9mIHRoZSBtZWRpYSBhc3NldC5cbiAgICAgKiBVcCB0byAxNiB0YWdzIGFyZSBzdXBwb3J0ZWQuXG4gICAgICogU2VwYXJhdGUgbXVsdGlwbGUgdGFncyB3aXRoIGNvbW1hcyAoLCkuXG4gICAgICogRWFjaCB0YWcgY2FuIGJlIHVwIHRvIDMyIGJ5dGVzIGluIGxlbmd0aC5cbiAgICAgKiBUaGUgdmFsdWUgbXVzdCBiZSBlbmNvZGVkIGluIFVURi04LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IG1lZGlhVGFncz86IEFycmF5PHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZT4gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgbWVkaWFUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbWVkaWEgYXNzZXQuIFZhbGlkIHZhbHVlczpcbiAgICAgKiBpbWFnZVxuICAgICAqIHZpZGVvXG4gICAgICogYXVkaW9cbiAgICAgKiB0ZXh0XG4gICAgICogV2UgcmVjb21tZW5kIHRoYXQgeW91IHNwZWNpZnkgdGhpcyBwYXJhbWV0ZXIgYmFzZWQgb24geW91ciBidXNpbmVzcyByZXF1aXJlbWVudHMuIElmIHlvdSBzZXQgSW5wdXRVUkwgdG8gYW4gT1NTIFVSTCwgdGhlIG1lZGlhIGFzc2V0IHR5cGUgY2FuIGJlIGF1dG9tYXRpY2FsbHkgZGV0ZXJtaW5lZCBiYXNlZCBvbiB0aGUgZmlsZSBuYW1lIGV4dGVuc2lvbi4gRm9yIG1vcmUgaW5mb3JtYXRpb25cbiAgICAgKiAuXG4gICAgICovXG4gICAgcmVhZG9ubHkgbWVkaWFUeXBlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IG92ZXJ3cml0ZTogU3BlY2lmaWVzIHdoZXRoZXIgdG8gb3ZlcndyaXRlIHRoZSBtZWRpYSBhc3NldCB0aGF0IGhhcyBiZWVuIHJlZ2lzdGVyZWQgYnkgdXNpbmcgdGhlIHNhbWUgVVJMLiBEZWZhdWx0IHZhbHVlOiBmYWxzZS4gVmFsaWQgdmFsdWVzOlxuICAgICAqIC0gdHJ1ZTogSWYgYSBtZWRpYSBhc3NldCBoYXMgYmVlbiByZWdpc3RlcmVkIGJ5IHVzaW5nIHRoZSBzYW1lIFVSTCwgdGhlIG9yaWdpbmFsIG1lZGlhIGFzc2V0IGlzIGRlbGV0ZWQgYW5kIHRoZSBuZXcgbWVkaWEgYXNzZXQgaXMgcmVnaXN0ZXJlZC5cbiAgICAgKiAtIGZhbHNlOiBJZiBhIG1lZGlhIGFzc2V0IGhhcyBiZWVuIHJlZ2lzdGVyZWQgYnkgdXNpbmcgdGhlIHNhbWUgVVJMLCB0aGUgbmV3IG1lZGlhIGFzc2V0IGlzIG5vdCByZWdpc3RlcmVkLiBBIFVSTCBjYW5ub3QgYmUgdXNlZCB0byByZWdpc3RlciBtdWx0aXBsZSBtZWRpYSBhc3NldHMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgb3ZlcndyaXRlPzogYm9vbGVhbiB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSByZWZlcmVuY2VJZDogVGhlIGN1c3RvbSBJRC4gVGhlIElEIGNhbiBiZSA2IHRvIDY0IGNoYXJhY3RlcnMgaW4gbGVuZ3RoIGFuZCBjYW4gY29udGFpbiBvbmx5IGxldHRlcnMsIGRpZ2l0cywgaHlwaGVucyAoLSksIGFuZCB1bmRlcnNjb3JlcyAoXykuIE1ha2Ugc3VyZSB0aGF0IHRoZSBJRCBpcyB1bmlxdWUgYW1vbmcgdXNlcnMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgcmVmZXJlbmNlSWQ/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcmVnaXN0ZXJDb25maWc6IFRoZSByZWdpc3RyYXRpb24gY29uZmlndXJhdGlvbnMuXG4gICAgICogQnkgZGVmYXVsdCwgYSBzcHJpdGUgaXMgZ2VuZXJhdGVkIGZvciB0aGUgbWVkaWEgYXNzZXQuIFlvdSBjYW4gc2V0IE5lZWRTcHJpdGUgdG8gZmFsc2UgdG8gZGlzYWJsZSBhdXRvbWF0aWMgc3ByaXRlIGdlbmVyYXRpb24uXG4gICAgICogQnkgZGVmYXVsdCwgYSBzbmFwc2hvdCBpcyBnZW5lcmF0ZWQgZm9yIHRoZSBtZWRpYSBhc3NldC4gWW91IGNhbiBzZXQgTmVlZFNuYXBzaG90IHRvIGZhbHNlIHRvIGRpc2FibGUgYXV0b21hdGljIHNuYXBzaG90IGdlbmVyYXRpb24uXG4gICAgICovXG4gICAgcmVhZG9ubHkgcmVnaXN0ZXJDb25maWc/OiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgc21hcnRUYWdUZW1wbGF0ZUlkOiBUaGUgSUQgb2YgdGhlIHNtYXJ0IHRhZ2dpbmcgdGVtcGxhdGUuIFZhbGlkIHZhbHVlczpcbiAgICAgKiBTMDAwMDAxMDEtMzAwMDgwOiB0aGUgc3lzdGVtIHRlbXBsYXRlIHRoYXQgc3VwcG9ydHMgbmF0dXJhbCBsYW5ndWFnZSBwcm9jZXNzaW5nIChOTFApIGZvciBjb250ZW50IHJlY29nbml0aW9uLlxuICAgICAqIFMwMDAwMDEwMy0wMDAwMDE6IHRoZSBzeXN0ZW0gdGVtcGxhdGUgdGhhdCBzdXBwb3J0cyBOTFAgZm9yIGNvbnRlbnQgcmVjb2duaXRpb24gYW5kIGFsbCB0YWdnaW5nIGNhcGFiaWxpdGllcy5cbiAgICAgKiBTMDAwMDAxMDMtMDAwMDAyOiB0aGUgc3lzdGVtIHRlbXBsYXRlIHRoYXQgc3VwcG9ydHMgYWxsIHRhZ2dpbmcgY2FwYWJpbGl0aWVzIGJ1dCBkb2VzIG5vdCBzdXBwb3J0IE5MUCBmb3IgY29udGVudCByZWNvZ25pdGlvbi5cbiAgICAgKiBBZnRlciB5b3UgY29uZmlndXJlIHRoaXMgcGFyYW1ldGVyLCBhIHNtYXJ0IHRhZyBhbmFseXNpcyB0YXNrIGlzIGF1dG9tYXRpY2FsbHkgaW5pdGlhdGVkIGFmdGVyIHRoZSBtZWRpYSBhc3NldCBpcyByZWdpc3RlcmVkLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYmlsbGFibGUgaXRlbXMuXG4gICAgICovXG4gICAgcmVhZG9ubHkgc21hcnRUYWdUZW1wbGF0ZUlkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHRpdGxlOiBUaGUgdGl0bGUuIElmIHlvdSBkbyBub3Qgc3BlY2lmeSB0aGlzIHBhcmFtZXRlciwgYSBkZWZhdWx0IHRpdGxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJhc2VkIG9uIHRoZSBkYXRlLlxuICAgICAqIFRoZSB2YWx1ZSBjYW4gYmUgdXAgdG8gMTI4IGJ5dGVzIGluIGxlbmd0aC5cbiAgICAgKiBUaGUgdmFsdWUgbXVzdCBiZSBlbmNvZGVkIGluIFVURi04LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHRpdGxlPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHVzZXJEYXRhOiBUaGUgdXNlciBkYXRhLiBZb3UgY2FuIHNwZWNpZnkgYSBjdXN0b20gY2FsbGJhY2sgVVJMLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHVzZXJEYXRhPzogeyBba2V5OiBzdHJpbmddOiAoYW55IHwgcm9zLklSZXNvbHZhYmxlKSB9IHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHdvcmtmbG93SWQ6IFRoZSB3b3JrZmxvdyBJRC5cbiAgICAgKi9cbiAgICByZWFkb25seSB3b3JrZmxvd0lkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xufVxuXG4vKipcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBnaXZlbiBwcm9wZXJ0aWVzIG1hdGNoIHRob3NlIG9mIGEgYFJvc01lZGlhSW5mb1Byb3BzYFxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NNZWRpYUluZm9Qcm9wc2BcbiAqXG4gKiBAcmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSB2YWxpZGF0aW9uLlxuICovXG5mdW5jdGlvbiBSb3NNZWRpYUluZm9Qcm9wc1ZhbGlkYXRvcihwcm9wZXJ0aWVzOiBhbnkpOiByb3MuVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcm9zLlZBTElEQVRJT05fU1VDQ0VTUzsgfVxuICAgIGNvbnN0IGVycm9ycyA9IG5ldyByb3MuVmFsaWRhdGlvblJlc3VsdHMoKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3JlZ2lzdGVyQ29uZmlnJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnJlZ2lzdGVyQ29uZmlnKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdvdmVyd3JpdGUnLCByb3MudmFsaWRhdGVCb29sZWFuKShwcm9wZXJ0aWVzLm92ZXJ3cml0ZSkpO1xuICAgIGlmKHByb3BlcnRpZXMuZGVzY3JpcHRpb24gJiYgKEFycmF5LmlzQXJyYXkocHJvcGVydGllcy5kZXNjcmlwdGlvbikgfHwgKHR5cGVvZiBwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uKSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZGVzY3JpcHRpb24nLCByb3MudmFsaWRhdGVMZW5ndGgpKHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMuZGVzY3JpcHRpb24ubGVuZ3RoLFxuICAgICAgICAgICAgbWluOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBtYXg6IDEwMjQsXG4gICAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2Rlc2NyaXB0aW9uJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd1c2VyRGF0YScsIHJvcy5oYXNoVmFsaWRhdG9yKHJvcy52YWxpZGF0ZUFueSkpKHByb3BlcnRpZXMudXNlckRhdGEpKTtcbiAgICBpZihwcm9wZXJ0aWVzLmJ1c2luZXNzVHlwZSAmJiAodHlwZW9mIHByb3BlcnRpZXMuYnVzaW5lc3NUeXBlKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdidXNpbmVzc1R5cGUnLCByb3MudmFsaWRhdGVBbGxvd2VkVmFsdWVzKSh7XG4gICAgICAgICAgZGF0YTogcHJvcGVydGllcy5idXNpbmVzc1R5cGUsXG4gICAgICAgICAgYWxsb3dlZFZhbHVlczogW1wic3VidGl0bGVzXCIsXCJ3YXRlcm1hcmtcIixcIm9wZW5pbmdcIixcImVuZGluZ1wiLFwiZ2VuZXJhbFwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2J1c2luZXNzVHlwZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5idXNpbmVzc1R5cGUpKTtcbiAgICBpZihwcm9wZXJ0aWVzLnRpdGxlICYmIChBcnJheS5pc0FycmF5KHByb3BlcnRpZXMudGl0bGUpIHx8ICh0eXBlb2YgcHJvcGVydGllcy50aXRsZSkgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3RpdGxlJywgcm9zLnZhbGlkYXRlTGVuZ3RoKSh7XG4gICAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLnRpdGxlLmxlbmd0aCxcbiAgICAgICAgICAgIG1pbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWF4OiAxMjgsXG4gICAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3RpdGxlJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnRpdGxlKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdjYXRlSWQnLCByb3MudmFsaWRhdGVOdW1iZXIpKHByb3BlcnRpZXMuY2F0ZUlkKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCd3b3JrZmxvd0lkJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLndvcmtmbG93SWQpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2lucHV0VXJsJywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLmlucHV0VXJsKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdpbnB1dFVybCcsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5pbnB1dFVybCkpO1xuICAgIGlmKHByb3BlcnRpZXMuc21hcnRUYWdUZW1wbGF0ZUlkICYmICh0eXBlb2YgcHJvcGVydGllcy5zbWFydFRhZ1RlbXBsYXRlSWQpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3NtYXJ0VGFnVGVtcGxhdGVJZCcsIHJvcy52YWxpZGF0ZUFsbG93ZWRWYWx1ZXMpKHtcbiAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLnNtYXJ0VGFnVGVtcGxhdGVJZCxcbiAgICAgICAgICBhbGxvd2VkVmFsdWVzOiBbXCJTMDAwMDAxMDEtMzAwMDgwXCIsXCJTMDAwMDAxMDMtMDAwMDAxXCIsXCJTMDAwMDAxMDMtMDAwMDAyXCJdLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignc21hcnRUYWdUZW1wbGF0ZUlkJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLnNtYXJ0VGFnVGVtcGxhdGVJZCkpO1xuICAgIGlmKHByb3BlcnRpZXMucmVmZXJlbmNlSWQgJiYgKEFycmF5LmlzQXJyYXkocHJvcGVydGllcy5yZWZlcmVuY2VJZCkgfHwgKHR5cGVvZiBwcm9wZXJ0aWVzLnJlZmVyZW5jZUlkKSA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncmVmZXJlbmNlSWQnLCByb3MudmFsaWRhdGVMZW5ndGgpKHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMucmVmZXJlbmNlSWQubGVuZ3RoLFxuICAgICAgICAgICAgbWluOiA2LFxuICAgICAgICAgICAgbWF4OiA2NCxcbiAgICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigncmVmZXJlbmNlSWQnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMucmVmZXJlbmNlSWQpKTtcbiAgICBpZihwcm9wZXJ0aWVzLm1lZGlhVHlwZSAmJiAodHlwZW9mIHByb3BlcnRpZXMubWVkaWFUeXBlKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdtZWRpYVR5cGUnLCByb3MudmFsaWRhdGVBbGxvd2VkVmFsdWVzKSh7XG4gICAgICAgICAgZGF0YTogcHJvcGVydGllcy5tZWRpYVR5cGUsXG4gICAgICAgICAgYWxsb3dlZFZhbHVlczogW1wiaW1hZ2VcIixcInZpZGVvXCIsXCJhdWRpb1wiLFwidGV4dFwiXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ21lZGlhVHlwZScsIHJvcy52YWxpZGF0ZVN0cmluZykocHJvcGVydGllcy5tZWRpYVR5cGUpKTtcbiAgICBpZihwcm9wZXJ0aWVzLmNvdmVyVXJsICYmIChBcnJheS5pc0FycmF5KHByb3BlcnRpZXMuY292ZXJVcmwpIHx8ICh0eXBlb2YgcHJvcGVydGllcy5jb3ZlclVybCkgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NvdmVyVXJsJywgcm9zLnZhbGlkYXRlTGVuZ3RoKSh7XG4gICAgICAgICAgICBkYXRhOiBwcm9wZXJ0aWVzLmNvdmVyVXJsLmxlbmd0aCxcbiAgICAgICAgICAgIG1pbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWF4OiAxMjgsXG4gICAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2NvdmVyVXJsJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmNvdmVyVXJsKSk7XG4gICAgaWYocHJvcGVydGllcy5tZWRpYVRhZ3MgJiYgKEFycmF5LmlzQXJyYXkocHJvcGVydGllcy5tZWRpYVRhZ3MpIHx8ICh0eXBlb2YgcHJvcGVydGllcy5tZWRpYVRhZ3MpID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdtZWRpYVRhZ3MnLCByb3MudmFsaWRhdGVMZW5ndGgpKHtcbiAgICAgICAgICAgIGRhdGE6IHByb3BlcnRpZXMubWVkaWFUYWdzLmxlbmd0aCxcbiAgICAgICAgICAgIG1pbjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWF4OiAxNixcbiAgICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignbWVkaWFUYWdzJywgcm9zLmxpc3RWYWxpZGF0b3Iocm9zLnZhbGlkYXRlU3RyaW5nKSkocHJvcGVydGllcy5tZWRpYVRhZ3MpKTtcbiAgICByZXR1cm4gZXJyb3JzLndyYXAoJ3N1cHBsaWVkIHByb3BlcnRpZXMgbm90IGNvcnJlY3QgZm9yIFwiUm9zTWVkaWFJbmZvUHJvcHNcIicpO1xufVxuXG4vKipcbiAqIFJlbmRlcnMgdGhlIEFsaUNsb3VkIFJPUyBSZXNvdXJjZSBwcm9wZXJ0aWVzIG9mIGFuIGBBTElZVU46OklDRTo6TWVkaWFJbmZvYCByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NNZWRpYUluZm9Qcm9wc2BcbiAqXG4gKiBAcmV0dXJucyB0aGUgQWxpQ2xvdWQgUk9TIFJlc291cmNlIHByb3BlcnRpZXMgb2YgYW4gYEFMSVlVTjo6SUNFOjpNZWRpYUluZm9gIHJlc291cmNlLlxuICovXG4vLyBAdHMtaWdub3JlIFRTNjEzM1xuZnVuY3Rpb24gcm9zTWVkaWFJbmZvUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXM6IGFueSwgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pOiBhbnkge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHByb3BlcnRpZXM7IH1cbiAgICBpZihlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCkge1xuICAgICAgICBSb3NNZWRpYUluZm9Qcm9wc1ZhbGlkYXRvcihwcm9wZXJ0aWVzKS5hc3NlcnRTdWNjZXNzKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAnSW5wdXRVUkwnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmlucHV0VXJsKSxcbiAgICAgICdCdXNpbmVzc1R5cGUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmJ1c2luZXNzVHlwZSksXG4gICAgICAnQ2F0ZUlkJzogcm9zLm51bWJlclRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5jYXRlSWQpLFxuICAgICAgJ0NvdmVyVVJMJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5jb3ZlclVybCksXG4gICAgICAnRGVzY3JpcHRpb24nOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLmRlc2NyaXB0aW9uKSxcbiAgICAgICdNZWRpYVRhZ3MnOiByb3MubGlzdE1hcHBlcihyb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZSkocHJvcGVydGllcy5tZWRpYVRhZ3MpLFxuICAgICAgJ01lZGlhVHlwZSc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMubWVkaWFUeXBlKSxcbiAgICAgICdPdmVyd3JpdGUnOiByb3MuYm9vbGVhblRvUm9zVGVtcGxhdGUocHJvcGVydGllcy5vdmVyd3JpdGUpLFxuICAgICAgJ1JlZmVyZW5jZUlkJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5yZWZlcmVuY2VJZCksXG4gICAgICAnUmVnaXN0ZXJDb25maWcnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnJlZ2lzdGVyQ29uZmlnKSxcbiAgICAgICdTbWFydFRhZ1RlbXBsYXRlSWQnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnNtYXJ0VGFnVGVtcGxhdGVJZCksXG4gICAgICAnVGl0bGUnOiByb3Muc3RyaW5nVG9Sb3NUZW1wbGF0ZShwcm9wZXJ0aWVzLnRpdGxlKSxcbiAgICAgICdVc2VyRGF0YSc6IHJvcy5oYXNoTWFwcGVyKHJvcy5vYmplY3RUb1Jvc1RlbXBsYXRlKShwcm9wZXJ0aWVzLnVzZXJEYXRhKSxcbiAgICAgICdXb3JrZmxvd0lkJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy53b3JrZmxvd0lkKSxcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYSBiYXNlIGVuY2Fwc3VsYXRpb24gYXJvdW5kIHRoZSBST1MgcmVzb3VyY2UgdHlwZSBgQUxJWVVOOjpJQ0U6Ok1lZGlhSW5mb2AsIHdoaWNoIGlzIHVzZWQgdG8gcmVnaXN0ZXIgYSBtZWRpYSBhc3NldCBpbiBJbnRlbGxpZ2VudCBNZWRpYSBTZXJ2aWNlcyAoSU1TKS5cbiAqIEBOb3RlIFRoaXMgY2xhc3MgZG9lcyBub3QgY29udGFpbiBhZGRpdGlvbmFsIGZ1bmN0aW9ucywgc28gaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSBgTWVkaWFJbmZvYCBjbGFzcyBpbnN0ZWFkIG9mIHRoaXMgY2xhc3MgZm9yIGEgbW9yZSBjb252ZW5pZW50IGRldmVsb3BtZW50IGV4cGVyaWVuY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1pY2UtbWVkaWFpbmZvXG4gKi9cbmV4cG9ydCBjbGFzcyBSb3NNZWRpYUluZm8gZXh0ZW5kcyByb3MuUm9zUmVzb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZXNvdXJjZSB0eXBlIG5hbWUgZm9yIHRoaXMgcmVzb3VyY2UgY2xhc3MuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBST1NfUkVTT1VSQ0VfVFlQRV9OQU1FID0gXCJBTElZVU46OklDRTo6TWVkaWFJbmZvXCI7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIE1lZGlhSWQ6IFRoZSBJRCBvZiB0aGUgbWVkaWEgYXNzZXQgaW4gSU1TLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyTWVkaWFJZDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgcHVibGljIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuO1xuXG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgaW5wdXRVcmw6IFRoZSBVUkwgb2YgdGhlIG1lZGlhIGFzc2V0IGluIGFub3RoZXIgc2VydmljZS4gVGhlIFVSTCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIElEIG9mIHRoZSBtZWRpYSBhc3NldCBpbiBJTVMuIFRoZSBVUkwgY2Fubm90IGJlIG1vZGlmaWVkIG9uY2UgcmVnaXN0ZXJlZC4gVGhlIGZvbGxvd2luZyB0eXBlcyBvZiBVUkxzIGFyZSBzdXBwb3J0ZWQ6XG4gICAgICogT1NTIFVSTCBpbiBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtYXRzOlxuICAgICAqIGh0dHAocyk6XFwvXFwvZXhhbXBsZS1idWNrZXQub3NzLWNuLXNoYW5naGFpLmFsaXl1bmNzLmNvbVxcL2V4YW1wbGUubXA0XG4gICAgICogb3NzOlxcL1xcL2V4YW1wbGUtYnVja2V0XFwvZXhhbXBsZS5tcDQ6IEluIHRoaXMgZm9ybWF0LCBpdCBpcyBjb25zaWRlcmVkIGJ5IGRlZmF1bHQgdGhhdCB0aGUgcmVnaW9uIG9mIHRoZSBPU1MgYnVja2V0IGluIHdoaWNoIHRoZSBtZWRpYSBhc3NldCByZXNpZGVzIGlzIHRoZSBzYW1lIGFzIHRoZSByZWdpb24gaW4gd2hpY2ggSU1TIGlzIGFjdGl2YXRlZC5cbiAgICAgKiBVUkwgb2YgYW4gQXBzYXJhVmlkZW8gVk9EIG1lZGlhIGFzc2V0XG4gICAgICogdm9kOlxcL1xcLyoqKjIwYjQ4ZmIwNDQ4MzkxNWQ0ZjJjZDhhYyoqKipcbiAgICAgKi9cbiAgICBwdWJsaWMgaW5wdXRVcmw6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBidXNpbmVzc1R5cGU6IFRoZSBidXNpbmVzcyB0eXBlIG9mIHRoZSBtZWRpYSBhc3NldC4gVmFsaWQgdmFsdWVzOlxuICAgICAqIHN1YnRpdGxlc1xuICAgICAqIHdhdGVybWFya1xuICAgICAqIG9wZW5pbmdcbiAgICAgKiBlbmRpbmdcbiAgICAgKiBnZW5lcmFsXG4gICAgICovXG4gICAgcHVibGljIGJ1c2luZXNzVHlwZTogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGNhdGVJZDogVGhlIGNhdGVnb3J5IElELlxuICAgICAqL1xuICAgIHB1YmxpYyBjYXRlSWQ6IG51bWJlciB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBjb3ZlclVybDogVGhlIHRodW1ibmFpbCBVUkwgb2YgdGhlIG1lZGlhIGFzc2V0LlxuICAgICAqIFRoZSB2YWx1ZSBjYW4gYmUgdXAgdG8gMTI4IGJ5dGVzIGluIGxlbmd0aC5cbiAgICAgKiBUaGUgdmFsdWUgbXVzdCBiZSBlbmNvZGVkIGluIFVURi04LlxuICAgICAqL1xuICAgIHB1YmxpYyBjb3ZlclVybDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGRlc2NyaXB0aW9uOiBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIG1lZGlhIGFzc2V0LlxuICAgICAqIFRoZSB2YWx1ZSBjYW4gYmUgdXAgdG8gMSwwMjQgYnl0ZXMgaW4gbGVuZ3RoLlxuICAgICAqIFRoZSB2YWx1ZSBtdXN0IGJlIGVuY29kZWQgaW4gVVRGLTguXG4gICAgICovXG4gICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgbWVkaWFUYWdzOiBUaGUgdGFncyBvZiB0aGUgbWVkaWEgYXNzZXQuXG4gICAgICogVXAgdG8gMTYgdGFncyBhcmUgc3VwcG9ydGVkLlxuICAgICAqIFNlcGFyYXRlIG11bHRpcGxlIHRhZ3Mgd2l0aCBjb21tYXMgKCwpLlxuICAgICAqIEVhY2ggdGFnIGNhbiBiZSB1cCB0byAzMiBieXRlcyBpbiBsZW5ndGguXG4gICAgICogVGhlIHZhbHVlIG11c3QgYmUgZW5jb2RlZCBpbiBVVEYtOC5cbiAgICAgKi9cbiAgICBwdWJsaWMgbWVkaWFUYWdzOiBBcnJheTxzdHJpbmcgfCByb3MuSVJlc29sdmFibGU+IHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IG1lZGlhVHlwZTogVGhlIHR5cGUgb2YgdGhlIG1lZGlhIGFzc2V0LiBWYWxpZCB2YWx1ZXM6XG4gICAgICogaW1hZ2VcbiAgICAgKiB2aWRlb1xuICAgICAqIGF1ZGlvXG4gICAgICogdGV4dFxuICAgICAqIFdlIHJlY29tbWVuZCB0aGF0IHlvdSBzcGVjaWZ5IHRoaXMgcGFyYW1ldGVyIGJhc2VkIG9uIHlvdXIgYnVzaW5lc3MgcmVxdWlyZW1lbnRzLiBJZiB5b3Ugc2V0IElucHV0VVJMIHRvIGFuIE9TUyBVUkwsIHRoZSBtZWRpYSBhc3NldCB0eXBlIGNhbiBiZSBhdXRvbWF0aWNhbGx5IGRldGVybWluZWQgYmFzZWQgb24gdGhlIGZpbGUgbmFtZSBleHRlbnNpb24uIEZvciBtb3JlIGluZm9ybWF0aW9uXG4gICAgICogLlxuICAgICAqL1xuICAgIHB1YmxpYyBtZWRpYVR5cGU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBvdmVyd3JpdGU6IFNwZWNpZmllcyB3aGV0aGVyIHRvIG92ZXJ3cml0ZSB0aGUgbWVkaWEgYXNzZXQgdGhhdCBoYXMgYmVlbiByZWdpc3RlcmVkIGJ5IHVzaW5nIHRoZSBzYW1lIFVSTC4gRGVmYXVsdCB2YWx1ZTogZmFsc2UuIFZhbGlkIHZhbHVlczpcbiAgICAgKiAtIHRydWU6IElmIGEgbWVkaWEgYXNzZXQgaGFzIGJlZW4gcmVnaXN0ZXJlZCBieSB1c2luZyB0aGUgc2FtZSBVUkwsIHRoZSBvcmlnaW5hbCBtZWRpYSBhc3NldCBpcyBkZWxldGVkIGFuZCB0aGUgbmV3IG1lZGlhIGFzc2V0IGlzIHJlZ2lzdGVyZWQuXG4gICAgICogLSBmYWxzZTogSWYgYSBtZWRpYSBhc3NldCBoYXMgYmVlbiByZWdpc3RlcmVkIGJ5IHVzaW5nIHRoZSBzYW1lIFVSTCwgdGhlIG5ldyBtZWRpYSBhc3NldCBpcyBub3QgcmVnaXN0ZXJlZC4gQSBVUkwgY2Fubm90IGJlIHVzZWQgdG8gcmVnaXN0ZXIgbXVsdGlwbGUgbWVkaWEgYXNzZXRzLlxuICAgICAqL1xuICAgIHB1YmxpYyBvdmVyd3JpdGU6IGJvb2xlYW4gfCByb3MuSVJlc29sdmFibGUgfCB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgcmVmZXJlbmNlSWQ6IFRoZSBjdXN0b20gSUQuIFRoZSBJRCBjYW4gYmUgNiB0byA2NCBjaGFyYWN0ZXJzIGluIGxlbmd0aCBhbmQgY2FuIGNvbnRhaW4gb25seSBsZXR0ZXJzLCBkaWdpdHMsIGh5cGhlbnMgKC0pLCBhbmQgdW5kZXJzY29yZXMgKF8pLiBNYWtlIHN1cmUgdGhhdCB0aGUgSUQgaXMgdW5pcXVlIGFtb25nIHVzZXJzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWZlcmVuY2VJZDogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHJlZ2lzdGVyQ29uZmlnOiBUaGUgcmVnaXN0cmF0aW9uIGNvbmZpZ3VyYXRpb25zLlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgc3ByaXRlIGlzIGdlbmVyYXRlZCBmb3IgdGhlIG1lZGlhIGFzc2V0LiBZb3UgY2FuIHNldCBOZWVkU3ByaXRlIHRvIGZhbHNlIHRvIGRpc2FibGUgYXV0b21hdGljIHNwcml0ZSBnZW5lcmF0aW9uLlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgc25hcHNob3QgaXMgZ2VuZXJhdGVkIGZvciB0aGUgbWVkaWEgYXNzZXQuIFlvdSBjYW4gc2V0IE5lZWRTbmFwc2hvdCB0byBmYWxzZSB0byBkaXNhYmxlIGF1dG9tYXRpYyBzbmFwc2hvdCBnZW5lcmF0aW9uLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWdpc3RlckNvbmZpZzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHNtYXJ0VGFnVGVtcGxhdGVJZDogVGhlIElEIG9mIHRoZSBzbWFydCB0YWdnaW5nIHRlbXBsYXRlLiBWYWxpZCB2YWx1ZXM6XG4gICAgICogUzAwMDAwMTAxLTMwMDA4MDogdGhlIHN5c3RlbSB0ZW1wbGF0ZSB0aGF0IHN1cHBvcnRzIG5hdHVyYWwgbGFuZ3VhZ2UgcHJvY2Vzc2luZyAoTkxQKSBmb3IgY29udGVudCByZWNvZ25pdGlvbi5cbiAgICAgKiBTMDAwMDAxMDMtMDAwMDAxOiB0aGUgc3lzdGVtIHRlbXBsYXRlIHRoYXQgc3VwcG9ydHMgTkxQIGZvciBjb250ZW50IHJlY29nbml0aW9uIGFuZCBhbGwgdGFnZ2luZyBjYXBhYmlsaXRpZXMuXG4gICAgICogUzAwMDAwMTAzLTAwMDAwMjogdGhlIHN5c3RlbSB0ZW1wbGF0ZSB0aGF0IHN1cHBvcnRzIGFsbCB0YWdnaW5nIGNhcGFiaWxpdGllcyBidXQgZG9lcyBub3Qgc3VwcG9ydCBOTFAgZm9yIGNvbnRlbnQgcmVjb2duaXRpb24uXG4gICAgICogQWZ0ZXIgeW91IGNvbmZpZ3VyZSB0aGlzIHBhcmFtZXRlciwgYSBzbWFydCB0YWcgYW5hbHlzaXMgdGFzayBpcyBhdXRvbWF0aWNhbGx5IGluaXRpYXRlZCBhZnRlciB0aGUgbWVkaWEgYXNzZXQgaXMgcmVnaXN0ZXJlZC4gRm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGJpbGxhYmxlIGl0ZW1zLlxuICAgICAqL1xuICAgIHB1YmxpYyBzbWFydFRhZ1RlbXBsYXRlSWQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSB0aXRsZTogVGhlIHRpdGxlLiBJZiB5b3UgZG8gbm90IHNwZWNpZnkgdGhpcyBwYXJhbWV0ZXIsIGEgZGVmYXVsdCB0aXRsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBiYXNlZCBvbiB0aGUgZGF0ZS5cbiAgICAgKiBUaGUgdmFsdWUgY2FuIGJlIHVwIHRvIDEyOCBieXRlcyBpbiBsZW5ndGguXG4gICAgICogVGhlIHZhbHVlIG11c3QgYmUgZW5jb2RlZCBpbiBVVEYtOC5cbiAgICAgKi9cbiAgICBwdWJsaWMgdGl0bGU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSB1c2VyRGF0YTogVGhlIHVzZXIgZGF0YS4gWW91IGNhbiBzcGVjaWZ5IGEgY3VzdG9tIGNhbGxiYWNrIFVSTC5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXNlckRhdGE6IHsgW2tleTogc3RyaW5nXTogKGFueSB8IHJvcy5JUmVzb2x2YWJsZSkgfSB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSB3b3JrZmxvd0lkOiBUaGUgd29ya2Zsb3cgSUQuXG4gICAgICovXG4gICAgcHVibGljIHdvcmtmbG93SWQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzY29wZSAtIHNjb3BlIGluIHdoaWNoIHRoaXMgcmVzb3VyY2UgaXMgZGVmaW5lZFxuICAgICAqIEBwYXJhbSBpZCAgICAtIHNjb3BlZCBpZCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgKiBAcGFyYW0gcHJvcHMgLSByZXNvdXJjZSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc2NvcGU6IHJvcy5Db25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiBSb3NNZWRpYUluZm9Qcm9wcywgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pIHtcbiAgICAgICAgc3VwZXIoc2NvcGUsIGlkLCB7IHR5cGU6IFJvc01lZGlhSW5mby5ST1NfUkVTT1VSQ0VfVFlQRV9OQU1FLCBwcm9wZXJ0aWVzOiBwcm9wcyB9KTtcbiAgICAgICAgdGhpcy5hdHRyTWVkaWFJZCA9IHRoaXMuZ2V0QXR0KCdNZWRpYUlkJyk7XG5cbiAgICAgICAgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCA9IGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50O1xuICAgICAgICB0aGlzLmlucHV0VXJsID0gcHJvcHMuaW5wdXRVcmw7XG4gICAgICAgIHRoaXMuYnVzaW5lc3NUeXBlID0gcHJvcHMuYnVzaW5lc3NUeXBlO1xuICAgICAgICB0aGlzLmNhdGVJZCA9IHByb3BzLmNhdGVJZDtcbiAgICAgICAgdGhpcy5jb3ZlclVybCA9IHByb3BzLmNvdmVyVXJsO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gcHJvcHMuZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMubWVkaWFUYWdzID0gcHJvcHMubWVkaWFUYWdzO1xuICAgICAgICB0aGlzLm1lZGlhVHlwZSA9IHByb3BzLm1lZGlhVHlwZTtcbiAgICAgICAgdGhpcy5vdmVyd3JpdGUgPSBwcm9wcy5vdmVyd3JpdGU7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlSWQgPSBwcm9wcy5yZWZlcmVuY2VJZDtcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbmZpZyA9IHByb3BzLnJlZ2lzdGVyQ29uZmlnO1xuICAgICAgICB0aGlzLnNtYXJ0VGFnVGVtcGxhdGVJZCA9IHByb3BzLnNtYXJ0VGFnVGVtcGxhdGVJZDtcbiAgICAgICAgdGhpcy50aXRsZSA9IHByb3BzLnRpdGxlO1xuICAgICAgICB0aGlzLnVzZXJEYXRhID0gcHJvcHMudXNlckRhdGE7XG4gICAgICAgIHRoaXMud29ya2Zsb3dJZCA9IHByb3BzLndvcmtmbG93SWQ7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaW5wdXRVcmw6IHRoaXMuaW5wdXRVcmwsXG4gICAgICAgICAgICBidXNpbmVzc1R5cGU6IHRoaXMuYnVzaW5lc3NUeXBlLFxuICAgICAgICAgICAgY2F0ZUlkOiB0aGlzLmNhdGVJZCxcbiAgICAgICAgICAgIGNvdmVyVXJsOiB0aGlzLmNvdmVyVXJsLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBtZWRpYVRhZ3M6IHRoaXMubWVkaWFUYWdzLFxuICAgICAgICAgICAgbWVkaWFUeXBlOiB0aGlzLm1lZGlhVHlwZSxcbiAgICAgICAgICAgIG92ZXJ3cml0ZTogdGhpcy5vdmVyd3JpdGUsXG4gICAgICAgICAgICByZWZlcmVuY2VJZDogdGhpcy5yZWZlcmVuY2VJZCxcbiAgICAgICAgICAgIHJlZ2lzdGVyQ29uZmlnOiB0aGlzLnJlZ2lzdGVyQ29uZmlnLFxuICAgICAgICAgICAgc21hcnRUYWdUZW1wbGF0ZUlkOiB0aGlzLnNtYXJ0VGFnVGVtcGxhdGVJZCxcbiAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLFxuICAgICAgICAgICAgdXNlckRhdGE6IHRoaXMudXNlckRhdGEsXG4gICAgICAgICAgICB3b3JrZmxvd0lkOiB0aGlzLndvcmtmbG93SWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHByb3RlY3RlZCByZW5kZXJQcm9wZXJ0aWVzKHByb3BzOiB7W2tleTogc3RyaW5nXTogYW55fSk6IHsgW2tleTogc3RyaW5nXTogYW55IH0gIHtcbiAgICAgICAgcmV0dXJuIHJvc01lZGlhSW5mb1Byb3BzVG9Sb3NUZW1wbGF0ZShwcm9wcywgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3BlcnRpZXMgZm9yIGRlZmluaW5nIGEgYFJvc1NlYXJjaExpYmAuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1pY2Utc2VhcmNobGliXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUm9zU2VhcmNoTGliUHJvcHMge1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHNlYXJjaExpYk5hbWU6IFRoZSBuYW1lIG9mIHRoZSBTZWFyY2ggTGliLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHNlYXJjaExpYk5hbWU6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgZ2l2ZW4gcHJvcGVydGllcyBtYXRjaCB0aG9zZSBvZiBhIGBSb3NTZWFyY2hMaWJQcm9wc2BcbiAqXG4gKiBAcGFyYW0gcHJvcGVydGllcyAtIHRoZSBUeXBlU2NyaXB0IHByb3BlcnRpZXMgb2YgYSBgUm9zU2VhcmNoTGliUHJvcHNgXG4gKlxuICogQHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgdmFsaWRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gUm9zU2VhcmNoTGliUHJvcHNWYWxpZGF0b3IocHJvcGVydGllczogYW55KTogcm9zLlZhbGlkYXRpb25SZXN1bHQge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHJvcy5WQUxJREFUSU9OX1NVQ0NFU1M7IH1cbiAgICBjb25zdCBlcnJvcnMgPSBuZXcgcm9zLlZhbGlkYXRpb25SZXN1bHRzKCk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdzZWFyY2hMaWJOYW1lJywgcm9zLnJlcXVpcmVkVmFsaWRhdG9yKShwcm9wZXJ0aWVzLnNlYXJjaExpYk5hbWUpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3NlYXJjaExpYk5hbWUnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuc2VhcmNoTGliTmFtZSkpO1xuICAgIHJldHVybiBlcnJvcnMud3JhcCgnc3VwcGxpZWQgcHJvcGVydGllcyBub3QgY29ycmVjdCBmb3IgXCJSb3NTZWFyY2hMaWJQcm9wc1wiJyk7XG59XG5cbi8qKlxuICogUmVuZGVycyB0aGUgQWxpQ2xvdWQgUk9TIFJlc291cmNlIHByb3BlcnRpZXMgb2YgYW4gYEFMSVlVTjo6SUNFOjpTZWFyY2hMaWJgIHJlc291cmNlXG4gKlxuICogQHBhcmFtIHByb3BlcnRpZXMgLSB0aGUgVHlwZVNjcmlwdCBwcm9wZXJ0aWVzIG9mIGEgYFJvc1NlYXJjaExpYlByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpJQ0U6OlNlYXJjaExpYmAgcmVzb3VyY2UuXG4gKi9cbi8vIEB0cy1pZ25vcmUgVFM2MTMzXG5mdW5jdGlvbiByb3NTZWFyY2hMaWJQcm9wc1RvUm9zVGVtcGxhdGUocHJvcGVydGllczogYW55LCBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbik6IGFueSB7XG4gICAgaWYgKCFyb3MuY2FuSW5zcGVjdChwcm9wZXJ0aWVzKSkgeyByZXR1cm4gcHJvcGVydGllczsgfVxuICAgIGlmKGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50KSB7XG4gICAgICAgIFJvc1NlYXJjaExpYlByb3BzVmFsaWRhdG9yKHByb3BlcnRpZXMpLmFzc2VydFN1Y2Nlc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICdTZWFyY2hMaWJOYW1lJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5zZWFyY2hMaWJOYW1lKSxcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgYSBiYXNlIGVuY2Fwc3VsYXRpb24gYXJvdW5kIHRoZSBST1MgcmVzb3VyY2UgdHlwZSBgQUxJWVVOOjpJQ0U6OlNlYXJjaExpYmAsIHdoaWNoIGlzIHVzZWQgdG8gY3JlYXRlIGEgc2VhcmNoIGxpYnJhcnkuXG4gKiBATm90ZSBUaGlzIGNsYXNzIGRvZXMgbm90IGNvbnRhaW4gYWRkaXRpb25hbCBmdW5jdGlvbnMsIHNvIGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgYFNlYXJjaExpYmAgY2xhc3MgaW5zdGVhZCBvZiB0aGlzIGNsYXNzIGZvciBhIG1vcmUgY29udmVuaWVudCBkZXZlbG9wbWVudCBleHBlcmllbmNlLlxuICogU2VlIGh0dHBzOi8vd3d3LmFsaWJhYmFjbG91ZC5jb20vaGVscC9yb3MvZGV2ZWxvcGVyLXJlZmVyZW5jZS9hbGl5dW4taWNlLXNlYXJjaGxpYlxuICovXG5leHBvcnQgY2xhc3MgUm9zU2VhcmNoTGliIGV4dGVuZHMgcm9zLlJvc1Jlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzb3VyY2UgdHlwZSBuYW1lIGZvciB0aGlzIHJlc291cmNlIGNsYXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUk9TX1JFU09VUkNFX1RZUEVfTkFNRSA9IFwiQUxJWVVOOjpJQ0U6OlNlYXJjaExpYlwiO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBTZWFyY2hMaWJOYW1lOiBUaGUgbmFtZSBvZiB0aGUgU2VhcmNoIExpYi5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0clNlYXJjaExpYk5hbWU6IHJvcy5JUmVzb2x2YWJsZTtcblxuICAgIHB1YmxpYyBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDogYm9vbGVhbjtcblxuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHNlYXJjaExpYk5hbWU6IFRoZSBuYW1lIG9mIHRoZSBTZWFyY2ggTGliLlxuICAgICAqL1xuICAgIHB1YmxpYyBzZWFyY2hMaWJOYW1lOiBzdHJpbmcgfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2NvcGUgLSBzY29wZSBpbiB3aGljaCB0aGlzIHJlc291cmNlIGlzIGRlZmluZWRcbiAgICAgKiBAcGFyYW0gaWQgICAgLSBzY29wZWQgaWQgb2YgdGhlIHJlc291cmNlXG4gICAgICogQHBhcmFtIHByb3BzIC0gcmVzb3VyY2UgcHJvcGVydGllc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHNjb3BlOiByb3MuQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogUm9zU2VhcmNoTGliUHJvcHMsIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHNjb3BlLCBpZCwgeyB0eXBlOiBSb3NTZWFyY2hMaWIuUk9TX1JFU09VUkNFX1RZUEVfTkFNRSwgcHJvcGVydGllczogcHJvcHMgfSk7XG4gICAgICAgIHRoaXMuYXR0clNlYXJjaExpYk5hbWUgPSB0aGlzLmdldEF0dCgnU2VhcmNoTGliTmFtZScpO1xuXG4gICAgICAgIHRoaXMuZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQgPSBlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludDtcbiAgICAgICAgdGhpcy5zZWFyY2hMaWJOYW1lID0gcHJvcHMuc2VhcmNoTGliTmFtZTtcbiAgICB9XG5cblxuICAgIHByb3RlY3RlZCBnZXQgcm9zUHJvcGVydGllcygpOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ICB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWFyY2hMaWJOYW1lOiB0aGlzLnNlYXJjaExpYk5hbWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHByb3RlY3RlZCByZW5kZXJQcm9wZXJ0aWVzKHByb3BzOiB7W2tleTogc3RyaW5nXTogYW55fSk6IHsgW2tleTogc3RyaW5nXTogYW55IH0gIHtcbiAgICAgICAgcmV0dXJuIHJvc1NlYXJjaExpYlByb3BzVG9Sb3NUZW1wbGF0ZShwcm9wcywgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3BlcnRpZXMgZm9yIGRlZmluaW5nIGEgYFJvc1VwbG9hZE1lZGlhYC5cbiAqIFNlZSBodHRwczovL3d3dy5hbGliYWJhY2xvdWQuY29tL2hlbHAvcm9zL2RldmVsb3Blci1yZWZlcmVuY2UvYWxpeXVuLWljZS11cGxvYWRtZWRpYVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJvc1VwbG9hZE1lZGlhUHJvcHMge1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGFwcElkOiBUaGUgYXBwbGljYXRpb24gSUQuIERlZmF1bHQgdmFsdWU6IGFwcC0xMDAwMDAwLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGFwcElkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGVudGl0eUlkOiBUaGUgZW50aXR5IElELiBZb3UgY2FuIGNhbGwgdGhlIENyZWF0ZUVudGl0eSBvcGVyYXRpb24gdG8gY3JlYXRlIGFuIGVudGl0eSBhbmQgc3BlY2lmeSBhIGR5bmFtaWMgbWV0YWRhdGEgc3RydWN0dXJlLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGVudGl0eUlkPzogc3RyaW5nIHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IGZpbGVJbmZvOiBUaGUgZmlsZSBpbmZvcm1hdGlvbiwgd2hpY2ggaXMgaW4gdGhlIEpTT04gZm9ybWF0IGFuZCBjb250YWlucyB0aGUgZm9sbG93aW5nIGZpZWxkczpcbiAgICAgKiBUeXBlOiByZXF1aXJlZC4gVGhlIGZpbGUgdHlwZS4gVmFsaWQgdmFsdWVzOiB2aWRlbywgaW1hZ2UsIGF1ZGlvLCB0ZXh0LCBhbmQgb3RoZXIuXG4gICAgICogTmFtZTogcmVxdWlyZWQuIFRoZSBmaWxlIG5hbWUgd2l0aG91dCB0aGUgZXh0ZW5zaW9uLlxuICAgICAqIFNpemU6IG9wdGlvbmFsLiBUaGUgZmlsZSBzaXplLlxuICAgICAqIEV4dDogcmVxdWlyZWQuIFRoZSBmaWxlIG5hbWUgZXh0ZW5zaW9uLlxuICAgICAqL1xuICAgIHJlYWRvbmx5IGZpbGVJbmZvPzogeyBba2V5OiBzdHJpbmddOiAoYW55IHwgcm9zLklSZXNvbHZhYmxlKSB9IHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IG1lZGlhTWV0YURhdGE6IFRoZSBtZXRhZGF0YSBvZiB0aGUgbWVkaWEgYXNzZXQsIHdoaWNoIGlzIGEgSlNPTiBzdHJpbmcgdGhhdCBjb250YWlucyB0aGUgZm9sbG93aW5nIGZpZWxkczpcbiAgICAgKiBUaXRsZTogcmVxdWlyZWQuXG4gICAgICogVGhlIHZhbHVlIGNhbiBiZSB1cCB0byAxMjggY2hhcmFjdGVycyBpbiBsZW5ndGguXG4gICAgICogVGhlIHZhbHVlIG11c3QgYmUgZW5jb2RlZCBpbiBVVEYtOC5cbiAgICAgKiBEZXNjcmlwdGlvbjogb3B0aW9uYWwuXG4gICAgICogVGhlIHZhbHVlIGNhbiBiZSB1cCB0byAxLDAyNCBjaGFyYWN0ZXJzIGluIGxlbmd0aC5cbiAgICAgKiBUaGUgdmFsdWUgbXVzdCBiZSBlbmNvZGVkIGluIFVURi04LlxuICAgICAqIENhdGVJZDogb3B0aW9uYWwuXG4gICAgICogVGFnczogb3B0aW9uYWwuXG4gICAgICogQnVzaW5lc3NUeXBlOiByZXF1aXJlZC4gVmFsaWQgdmFsdWVzOlxuICAgICAqIG9wZW5pbmcgb3IgZW5kaW5nIGlmIFR5cGUgaXMgc2V0IHRvIHZpZGVvXG4gICAgICogZGVmYXVsdCBvciBjb3ZlciBpZiBUeXBlIGlzIHNldCB0byBpbWFnZVxuICAgICAqIHN1YnRpdGxlcyBvciBmb250IGlmIFR5cGUgaXMgc2V0IHRvIHRleHRcbiAgICAgKiB3YXRlcm1hcmsgaWYgVHlwZSBpcyBzZXQgdG8gbWF0ZXJpYWxcbiAgICAgKiBnZW5lcmFsIENvdmVyVVJMOiBvcHRpb25hbC5cbiAgICAgKiBEeW5hbWljTWV0YURhdGE6IFRoZSB2YWx1ZSBpcyBhIHN0cmluZy5cbiAgICAgKi9cbiAgICByZWFkb25seSBtZWRpYU1ldGFEYXRhPzogeyBba2V5OiBzdHJpbmddOiAoYW55IHwgcm9zLklSZXNvbHZhYmxlKSB9IHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHBvc3RQcm9jZXNzQ29uZmlnOiBUeXBlID0gdmlkZW8gfHwgYXVkaW8gVGhlcmUgaXMgYSBwb3N0LXVwbG9hZCBwcm9jZXNzaW5nIGFjdGlvbi4gUHJvY2Vzc1R5cGUgVmFsdWU6IFdvcmtmbG93LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IHBvc3RQcm9jZXNzQ29uZmlnPzogeyBba2V5OiBzdHJpbmddOiAoYW55IHwgcm9zLklSZXNvbHZhYmxlKSB9IHwgcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHVwbG9hZFRhcmdldENvbmZpZzogVGhlIGRlc3RpbmF0aW9uIHN0b3JhZ2UgYWRkcmVzcy5cbiAgICAgKiBTZXQgU3RvcmFnZVR5cGUgdG8gb3NzLlxuICAgICAqIFNldCBTdG9yYWdlTG9jYXRpb24gdG8gYW4gYWRkcmVzcyBpbiBBcHNhcmFWaWRlbyBWT0QuIFlvdSBjYW5ub3Qgc2V0IHRoaXMgZmllbGQgdG8gYW4gT1NTIFVSTC5cbiAgICAgKi9cbiAgICByZWFkb25seSB1cGxvYWRUYXJnZXRDb25maWc/OiB7IFtrZXk6IHN0cmluZ106IChhbnkgfCByb3MuSVJlc29sdmFibGUpIH0gfCByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAUHJvcGVydHkgdXNlckRhdGE6IFRoZSB1c2VyIGRhdGEuIFRoZSB2YWx1ZSBtdXN0IGJlIGEgSlNPTiBzdHJpbmcuIFlvdSBjYW4gY29uZmlndXJlIHNldHRpbmdzIHN1Y2ggYXMgbWVzc2FnZSBjYWxsYmFja3MuXG4gICAgICovXG4gICAgcmVhZG9ubHkgdXNlckRhdGE/OiB7IFtrZXk6IHN0cmluZ106IChhbnkgfCByb3MuSVJlc29sdmFibGUpIH0gfCByb3MuSVJlc29sdmFibGU7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGdpdmVuIHByb3BlcnRpZXMgbWF0Y2ggdGhvc2Ugb2YgYSBgUm9zVXBsb2FkTWVkaWFQcm9wc2BcbiAqXG4gKiBAcGFyYW0gcHJvcGVydGllcyAtIHRoZSBUeXBlU2NyaXB0IHByb3BlcnRpZXMgb2YgYSBgUm9zVXBsb2FkTWVkaWFQcm9wc2BcbiAqXG4gKiBAcmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSB2YWxpZGF0aW9uLlxuICovXG5mdW5jdGlvbiBSb3NVcGxvYWRNZWRpYVByb3BzVmFsaWRhdG9yKHByb3BlcnRpZXM6IGFueSk6IHJvcy5WYWxpZGF0aW9uUmVzdWx0IHtcbiAgICBpZiAoIXJvcy5jYW5JbnNwZWN0KHByb3BlcnRpZXMpKSB7IHJldHVybiByb3MuVkFMSURBVElPTl9TVUNDRVNTOyB9XG4gICAgY29uc3QgZXJyb3JzID0gbmV3IHJvcy5WYWxpZGF0aW9uUmVzdWx0cygpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcignZW50aXR5SWQnLCByb3MudmFsaWRhdGVTdHJpbmcpKHByb3BlcnRpZXMuZW50aXR5SWQpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ2FwcElkJywgcm9zLnZhbGlkYXRlU3RyaW5nKShwcm9wZXJ0aWVzLmFwcElkKSk7XG4gICAgZXJyb3JzLmNvbGxlY3Qocm9zLnByb3BlcnR5VmFsaWRhdG9yKCdmaWxlSW5mbycsIHJvcy5oYXNoVmFsaWRhdG9yKHJvcy52YWxpZGF0ZUFueSkpKHByb3BlcnRpZXMuZmlsZUluZm8pKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3VzZXJEYXRhJywgcm9zLmhhc2hWYWxpZGF0b3Iocm9zLnZhbGlkYXRlQW55KSkocHJvcGVydGllcy51c2VyRGF0YSkpO1xuICAgIGVycm9ycy5jb2xsZWN0KHJvcy5wcm9wZXJ0eVZhbGlkYXRvcigndXBsb2FkVGFyZ2V0Q29uZmlnJywgcm9zLmhhc2hWYWxpZGF0b3Iocm9zLnZhbGlkYXRlQW55KSkocHJvcGVydGllcy51cGxvYWRUYXJnZXRDb25maWcpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ21lZGlhTWV0YURhdGEnLCByb3MuaGFzaFZhbGlkYXRvcihyb3MudmFsaWRhdGVBbnkpKShwcm9wZXJ0aWVzLm1lZGlhTWV0YURhdGEpKTtcbiAgICBlcnJvcnMuY29sbGVjdChyb3MucHJvcGVydHlWYWxpZGF0b3IoJ3Bvc3RQcm9jZXNzQ29uZmlnJywgcm9zLmhhc2hWYWxpZGF0b3Iocm9zLnZhbGlkYXRlQW55KSkocHJvcGVydGllcy5wb3N0UHJvY2Vzc0NvbmZpZykpO1xuICAgIHJldHVybiBlcnJvcnMud3JhcCgnc3VwcGxpZWQgcHJvcGVydGllcyBub3QgY29ycmVjdCBmb3IgXCJSb3NVcGxvYWRNZWRpYVByb3BzXCInKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpJQ0U6OlVwbG9hZE1lZGlhYCByZXNvdXJjZVxuICpcbiAqIEBwYXJhbSBwcm9wZXJ0aWVzIC0gdGhlIFR5cGVTY3JpcHQgcHJvcGVydGllcyBvZiBhIGBSb3NVcGxvYWRNZWRpYVByb3BzYFxuICpcbiAqIEByZXR1cm5zIHRoZSBBbGlDbG91ZCBST1MgUmVzb3VyY2UgcHJvcGVydGllcyBvZiBhbiBgQUxJWVVOOjpJQ0U6OlVwbG9hZE1lZGlhYCByZXNvdXJjZS5cbiAqL1xuLy8gQHRzLWlnbm9yZSBUUzYxMzNcbmZ1bmN0aW9uIHJvc1VwbG9hZE1lZGlhUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXM6IGFueSwgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW4pOiBhbnkge1xuICAgIGlmICghcm9zLmNhbkluc3BlY3QocHJvcGVydGllcykpIHsgcmV0dXJuIHByb3BlcnRpZXM7IH1cbiAgICBpZihlbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCkge1xuICAgICAgICBSb3NVcGxvYWRNZWRpYVByb3BzVmFsaWRhdG9yKHByb3BlcnRpZXMpLmFzc2VydFN1Y2Nlc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICdBcHBJZCc6IHJvcy5zdHJpbmdUb1Jvc1RlbXBsYXRlKHByb3BlcnRpZXMuYXBwSWQpLFxuICAgICAgJ0VudGl0eUlkJzogcm9zLnN0cmluZ1RvUm9zVGVtcGxhdGUocHJvcGVydGllcy5lbnRpdHlJZCksXG4gICAgICAnRmlsZUluZm8nOiByb3MuaGFzaE1hcHBlcihyb3Mub2JqZWN0VG9Sb3NUZW1wbGF0ZSkocHJvcGVydGllcy5maWxlSW5mbyksXG4gICAgICAnTWVkaWFNZXRhRGF0YSc6IHJvcy5oYXNoTWFwcGVyKHJvcy5vYmplY3RUb1Jvc1RlbXBsYXRlKShwcm9wZXJ0aWVzLm1lZGlhTWV0YURhdGEpLFxuICAgICAgJ1Bvc3RQcm9jZXNzQ29uZmlnJzogcm9zLmhhc2hNYXBwZXIocm9zLm9iamVjdFRvUm9zVGVtcGxhdGUpKHByb3BlcnRpZXMucG9zdFByb2Nlc3NDb25maWcpLFxuICAgICAgJ1VwbG9hZFRhcmdldENvbmZpZyc6IHJvcy5oYXNoTWFwcGVyKHJvcy5vYmplY3RUb1Jvc1RlbXBsYXRlKShwcm9wZXJ0aWVzLnVwbG9hZFRhcmdldENvbmZpZyksXG4gICAgICAnVXNlckRhdGEnOiByb3MuaGFzaE1hcHBlcihyb3Mub2JqZWN0VG9Sb3NUZW1wbGF0ZSkocHJvcGVydGllcy51c2VyRGF0YSksXG4gICAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGEgYmFzZSBlbmNhcHN1bGF0aW9uIGFyb3VuZCB0aGUgUk9TIHJlc291cmNlIHR5cGUgYEFMSVlVTjo6SUNFOjpVcGxvYWRNZWRpYWAsIHdoaWNoIGlzIHVzZWQgdG8gcXVlcnkgdGhlIHVwbG9hZCBhZGRyZXNzIGFuZCBjcmVkZW50aWFsIG9mIGEgbWVkaWEgYXNzZXQuXG4gKiBATm90ZSBUaGlzIGNsYXNzIGRvZXMgbm90IGNvbnRhaW4gYWRkaXRpb25hbCBmdW5jdGlvbnMsIHNvIGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgYFVwbG9hZE1lZGlhYCBjbGFzcyBpbnN0ZWFkIG9mIHRoaXMgY2xhc3MgZm9yIGEgbW9yZSBjb252ZW5pZW50IGRldmVsb3BtZW50IGV4cGVyaWVuY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cuYWxpYmFiYWNsb3VkLmNvbS9oZWxwL3Jvcy9kZXZlbG9wZXItcmVmZXJlbmNlL2FsaXl1bi1pY2UtdXBsb2FkbWVkaWFcbiAqL1xuZXhwb3J0IGNsYXNzIFJvc1VwbG9hZE1lZGlhIGV4dGVuZHMgcm9zLlJvc1Jlc291cmNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzb3VyY2UgdHlwZSBuYW1lIGZvciB0aGlzIHJlc291cmNlIGNsYXNzLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUk9TX1JFU09VUkNFX1RZUEVfTkFNRSA9IFwiQUxJWVVOOjpJQ0U6OlVwbG9hZE1lZGlhXCI7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIEZpbGVVUkw6IFRoZSBPU1MgVVJMIG9mIHRoZSBmaWxlLiBUaGUgVVJMIGRvZXMgbm90IGNvbnRhaW4gdGhlIGluZm9ybWF0aW9uIHVzZWQgZm9yIGF1dGhlbnRpY2F0aW9uLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyRmlsZVVybDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBNZWRpYUlkOiBUaGUgSUQgb2YgdGhlIG1lZGlhIGFzc2V0LlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyTWVkaWFJZDogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBNZWRpYVVSTDogVGhlIFVSTCBvZiB0aGUgbWVkaWEgYXNzZXQuXG5Ob3RlIElmIGEgZG9tYWluIG5hbWUgZm9yIEFsaWJhYmEgQ2xvdWQgQ0ROIChDRE4pIGlzIHNwZWNpZmllZCwgYSBDRE4gVVJMIGlzIHJldHVybmVkLiBPdGhlcndpc2UsIGFuIE9TUyBVUkwgaXMgcmV0dXJuZWQuIElmIHRoZSBIVFRQIHN0YXR1cyBjb2RlIDQwMyBpcyByZXR1cm5lZCB3aGVuIHlvdSBhY2Nlc3MgdGhlIFVSTCBmcm9tIHlvdXIgYnJvd3NlciwgdGhlIFVSTCBhdXRoZW50aWNhdGlvbiBmZWF0dXJlIG9mIEFwc2FyYVZpZGVvIFZPRCBpcyBlbmFibGVkLiBUbyByZXNvbHZlIHRoaXMgaXNzdWUsIGRpc2FibGUgVVJMIGF1dGhlbnRpY2F0aW9uIG9yIGdlbmVyYXRlIGFuIGF1dGhlbnRpY2F0aW9uIHNpZ25hdHVyZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgYXR0ck1lZGlhVXJsOiByb3MuSVJlc29sdmFibGU7XG5cbiAgICAvKipcbiAgICAgKiBAQXR0cmlidXRlIFVwbG9hZEFkZHJlc3M6IFRoZSB1cGxvYWQgVVJMLlxuTm90ZSBUaGUgcmV0dXJuZWQgdXBsb2FkIFVSTCBpcyBhIEJhc2U2NC1lbmNvZGVkIFVSTC4gWW91IG11c3QgZGVjb2RlIHRoZSBCYXNlNjQtZW5jb2RlZCB1cGxvYWQgVVJMIGJlZm9yZSB5b3UgdXNlIGFuIFNESyBvciBjYWxsIGFuIEFQSSBvcGVyYXRpb24gdG8gdXBsb2FkIG1lZGlhIGZpbGVzLiBZb3UgbmVlZCB0byBwYXJzZSBVcGxvYWRBZGRyZXNzIG9ubHkgaWYgeW91IHVzZSBPU1MgU0RLIG9yIGNhbGwgYW4gT1NTIEFQSSBvcGVyYXRpb24gdG8gdXBsb2FkIG1lZGlhIGZpbGVzLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBhdHRyVXBsb2FkQWRkcmVzczogcm9zLklSZXNvbHZhYmxlO1xuXG4gICAgLyoqXG4gICAgICogQEF0dHJpYnV0ZSBVcGxvYWRBdXRoOiBUaGUgdXBsb2FkIGNyZWRlbnRpYWwuXG5Ob3RlIFRoZSByZXR1cm5lZCB1cGxvYWQgY3JlZGVudGlhbCBpcyBhIEJhc2U2NC1lbmNvZGVkIHZhbHVlLiBZb3UgbXVzdCBkZWNvZGUgdGhlIEJhc2U2NC1lbmNvZGVkIHVwbG9hZCBVUkwgYmVmb3JlIHlvdSB1c2UgYW4gU0RLIG9yIGNhbGwgYW4gQVBJIG9wZXJhdGlvbiB0byB1cGxvYWQgbWVkaWEgZmlsZXMuIFlvdSBuZWVkIHRvIHBhcnNlIFVwbG9hZEF1dGggb25seSBpZiB5b3UgdXNlIE9TUyBTREsgb3IgY2FsbCBhbiBPU1MgQVBJIG9wZXJhdGlvbiB0byB1cGxvYWQgbWVkaWEgZmlsZXMuXG4gICAgICovXG4gICAgcHVibGljIHJlYWRvbmx5IGF0dHJVcGxvYWRBdXRoOiByb3MuSVJlc29sdmFibGU7XG5cbiAgICBwdWJsaWMgZW5hYmxlUmVzb3VyY2VQcm9wZXJ0eUNvbnN0cmFpbnQ6IGJvb2xlYW47XG5cblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBhcHBJZDogVGhlIGFwcGxpY2F0aW9uIElELiBEZWZhdWx0IHZhbHVlOiBhcHAtMTAwMDAwMC5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXBwSWQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBlbnRpdHlJZDogVGhlIGVudGl0eSBJRC4gWW91IGNhbiBjYWxsIHRoZSBDcmVhdGVFbnRpdHkgb3BlcmF0aW9uIHRvIGNyZWF0ZSBhbiBlbnRpdHkgYW5kIHNwZWNpZnkgYSBkeW5hbWljIG1ldGFkYXRhIHN0cnVjdHVyZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZW50aXR5SWQ6IHN0cmluZyB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBmaWxlSW5mbzogVGhlIGZpbGUgaW5mb3JtYXRpb24sIHdoaWNoIGlzIGluIHRoZSBKU09OIGZvcm1hdCBhbmQgY29udGFpbnMgdGhlIGZvbGxvd2luZyBmaWVsZHM6XG4gICAgICogVHlwZTogcmVxdWlyZWQuIFRoZSBmaWxlIHR5cGUuIFZhbGlkIHZhbHVlczogdmlkZW8sIGltYWdlLCBhdWRpbywgdGV4dCwgYW5kIG90aGVyLlxuICAgICAqIE5hbWU6IHJlcXVpcmVkLiBUaGUgZmlsZSBuYW1lIHdpdGhvdXQgdGhlIGV4dGVuc2lvbi5cbiAgICAgKiBTaXplOiBvcHRpb25hbC4gVGhlIGZpbGUgc2l6ZS5cbiAgICAgKiBFeHQ6IHJlcXVpcmVkLiBUaGUgZmlsZSBuYW1lIGV4dGVuc2lvbi5cbiAgICAgKi9cbiAgICBwdWJsaWMgZmlsZUluZm86IHsgW2tleTogc3RyaW5nXTogKGFueSB8IHJvcy5JUmVzb2x2YWJsZSkgfSB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBtZWRpYU1ldGFEYXRhOiBUaGUgbWV0YWRhdGEgb2YgdGhlIG1lZGlhIGFzc2V0LCB3aGljaCBpcyBhIEpTT04gc3RyaW5nIHRoYXQgY29udGFpbnMgdGhlIGZvbGxvd2luZyBmaWVsZHM6XG4gICAgICogVGl0bGU6IHJlcXVpcmVkLlxuICAgICAqIFRoZSB2YWx1ZSBjYW4gYmUgdXAgdG8gMTI4IGNoYXJhY3RlcnMgaW4gbGVuZ3RoLlxuICAgICAqIFRoZSB2YWx1ZSBtdXN0IGJlIGVuY29kZWQgaW4gVVRGLTguXG4gICAgICogRGVzY3JpcHRpb246IG9wdGlvbmFsLlxuICAgICAqIFRoZSB2YWx1ZSBjYW4gYmUgdXAgdG8gMSwwMjQgY2hhcmFjdGVycyBpbiBsZW5ndGguXG4gICAgICogVGhlIHZhbHVlIG11c3QgYmUgZW5jb2RlZCBpbiBVVEYtOC5cbiAgICAgKiBDYXRlSWQ6IG9wdGlvbmFsLlxuICAgICAqIFRhZ3M6IG9wdGlvbmFsLlxuICAgICAqIEJ1c2luZXNzVHlwZTogcmVxdWlyZWQuIFZhbGlkIHZhbHVlczpcbiAgICAgKiBvcGVuaW5nIG9yIGVuZGluZyBpZiBUeXBlIGlzIHNldCB0byB2aWRlb1xuICAgICAqIGRlZmF1bHQgb3IgY292ZXIgaWYgVHlwZSBpcyBzZXQgdG8gaW1hZ2VcbiAgICAgKiBzdWJ0aXRsZXMgb3IgZm9udCBpZiBUeXBlIGlzIHNldCB0byB0ZXh0XG4gICAgICogd2F0ZXJtYXJrIGlmIFR5cGUgaXMgc2V0IHRvIG1hdGVyaWFsXG4gICAgICogZ2VuZXJhbCBDb3ZlclVSTDogb3B0aW9uYWwuXG4gICAgICogRHluYW1pY01ldGFEYXRhOiBUaGUgdmFsdWUgaXMgYSBzdHJpbmcuXG4gICAgICovXG4gICAgcHVibGljIG1lZGlhTWV0YURhdGE6IHsgW2tleTogc3RyaW5nXTogKGFueSB8IHJvcy5JUmVzb2x2YWJsZSkgfSB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSBwb3N0UHJvY2Vzc0NvbmZpZzogVHlwZSA9IHZpZGVvIHx8IGF1ZGlvIFRoZXJlIGlzIGEgcG9zdC11cGxvYWQgcHJvY2Vzc2luZyBhY3Rpb24uIFByb2Nlc3NUeXBlIFZhbHVlOiBXb3JrZmxvdy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcG9zdFByb2Nlc3NDb25maWc6IHsgW2tleTogc3RyaW5nXTogKGFueSB8IHJvcy5JUmVzb2x2YWJsZSkgfSB8IHJvcy5JUmVzb2x2YWJsZSB8IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBQcm9wZXJ0eSB1cGxvYWRUYXJnZXRDb25maWc6IFRoZSBkZXN0aW5hdGlvbiBzdG9yYWdlIGFkZHJlc3MuXG4gICAgICogU2V0IFN0b3JhZ2VUeXBlIHRvIG9zcy5cbiAgICAgKiBTZXQgU3RvcmFnZUxvY2F0aW9uIHRvIGFuIGFkZHJlc3MgaW4gQXBzYXJhVmlkZW8gVk9ELiBZb3UgY2Fubm90IHNldCB0aGlzIGZpZWxkIHRvIGFuIE9TUyBVUkwuXG4gICAgICovXG4gICAgcHVibGljIHVwbG9hZFRhcmdldENvbmZpZzogeyBba2V5OiBzdHJpbmddOiAoYW55IHwgcm9zLklSZXNvbHZhYmxlKSB9IHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQFByb3BlcnR5IHVzZXJEYXRhOiBUaGUgdXNlciBkYXRhLiBUaGUgdmFsdWUgbXVzdCBiZSBhIEpTT04gc3RyaW5nLiBZb3UgY2FuIGNvbmZpZ3VyZSBzZXR0aW5ncyBzdWNoIGFzIG1lc3NhZ2UgY2FsbGJhY2tzLlxuICAgICAqL1xuICAgIHB1YmxpYyB1c2VyRGF0YTogeyBba2V5OiBzdHJpbmddOiAoYW55IHwgcm9zLklSZXNvbHZhYmxlKSB9IHwgcm9zLklSZXNvbHZhYmxlIHwgdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNjb3BlIC0gc2NvcGUgaW4gd2hpY2ggdGhpcyByZXNvdXJjZSBpcyBkZWZpbmVkXG4gICAgICogQHBhcmFtIGlkICAgIC0gc2NvcGVkIGlkIG9mIHRoZSByZXNvdXJjZVxuICAgICAqIEBwYXJhbSBwcm9wcyAtIHJlc291cmNlIHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzY29wZTogcm9zLkNvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IFJvc1VwbG9hZE1lZGlhUHJvcHMsIGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHNjb3BlLCBpZCwgeyB0eXBlOiBSb3NVcGxvYWRNZWRpYS5ST1NfUkVTT1VSQ0VfVFlQRV9OQU1FLCBwcm9wZXJ0aWVzOiBwcm9wcyB9KTtcbiAgICAgICAgdGhpcy5hdHRyRmlsZVVybCA9IHRoaXMuZ2V0QXR0KCdGaWxlVVJMJyk7XG4gICAgICAgIHRoaXMuYXR0ck1lZGlhSWQgPSB0aGlzLmdldEF0dCgnTWVkaWFJZCcpO1xuICAgICAgICB0aGlzLmF0dHJNZWRpYVVybCA9IHRoaXMuZ2V0QXR0KCdNZWRpYVVSTCcpO1xuICAgICAgICB0aGlzLmF0dHJVcGxvYWRBZGRyZXNzID0gdGhpcy5nZXRBdHQoJ1VwbG9hZEFkZHJlc3MnKTtcbiAgICAgICAgdGhpcy5hdHRyVXBsb2FkQXV0aCA9IHRoaXMuZ2V0QXR0KCdVcGxvYWRBdXRoJyk7XG5cbiAgICAgICAgdGhpcy5lbmFibGVSZXNvdXJjZVByb3BlcnR5Q29uc3RyYWludCA9IGVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50O1xuICAgICAgICB0aGlzLmFwcElkID0gcHJvcHMuYXBwSWQ7XG4gICAgICAgIHRoaXMuZW50aXR5SWQgPSBwcm9wcy5lbnRpdHlJZDtcbiAgICAgICAgdGhpcy5maWxlSW5mbyA9IHByb3BzLmZpbGVJbmZvO1xuICAgICAgICB0aGlzLm1lZGlhTWV0YURhdGEgPSBwcm9wcy5tZWRpYU1ldGFEYXRhO1xuICAgICAgICB0aGlzLnBvc3RQcm9jZXNzQ29uZmlnID0gcHJvcHMucG9zdFByb2Nlc3NDb25maWc7XG4gICAgICAgIHRoaXMudXBsb2FkVGFyZ2V0Q29uZmlnID0gcHJvcHMudXBsb2FkVGFyZ2V0Q29uZmlnO1xuICAgICAgICB0aGlzLnVzZXJEYXRhID0gcHJvcHMudXNlckRhdGE7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJvc1Byb3BlcnRpZXMoKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSAge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXBwSWQ6IHRoaXMuYXBwSWQsXG4gICAgICAgICAgICBlbnRpdHlJZDogdGhpcy5lbnRpdHlJZCxcbiAgICAgICAgICAgIGZpbGVJbmZvOiB0aGlzLmZpbGVJbmZvLFxuICAgICAgICAgICAgbWVkaWFNZXRhRGF0YTogdGhpcy5tZWRpYU1ldGFEYXRhLFxuICAgICAgICAgICAgcG9zdFByb2Nlc3NDb25maWc6IHRoaXMucG9zdFByb2Nlc3NDb25maWcsXG4gICAgICAgICAgICB1cGxvYWRUYXJnZXRDb25maWc6IHRoaXMudXBsb2FkVGFyZ2V0Q29uZmlnLFxuICAgICAgICAgICAgdXNlckRhdGE6IHRoaXMudXNlckRhdGEsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHByb3RlY3RlZCByZW5kZXJQcm9wZXJ0aWVzKHByb3BzOiB7W2tleTogc3RyaW5nXTogYW55fSk6IHsgW2tleTogc3RyaW5nXTogYW55IH0gIHtcbiAgICAgICAgcmV0dXJuIHJvc1VwbG9hZE1lZGlhUHJvcHNUb1Jvc1RlbXBsYXRlKHByb3BzLCB0aGlzLmVuYWJsZVJlc291cmNlUHJvcGVydHlDb25zdHJhaW50KTtcbiAgICB9XG59XG4iXX0=